[2025-07-23 13:43:18 WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
[2025-07-23 13:43:19 INF] Executed DbCommand (49ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
[2025-07-23 13:43:19 INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
[2025-07-23 13:43:19 INF] Executed DbCommand (57ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
[2025-07-23 13:43:19 INF] Executed DbCommand (39ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
[2025-07-23 13:43:19 INF] Executed DbCommand (46ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
[2025-07-23 13:43:19 INF] Executed DbCommand (42ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
[2025-07-23 13:43:19 INF] Executed DbCommand (48ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
[2025-07-23 13:43:19 INF] Applying migration '20250628220812_InitialCreate'.
[2025-07-23 13:43:19 ERR] Failed executing DbCommand (96ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [TourCompanies] (
    [Id] int NOT NULL IDENTITY,
    [CompanyName] nvarchar(255) NOT NULL,
    [AuthorizedPerson] nvarchar(255) NOT NULL,
    [Email] nvarchar(255) NOT NULL,
    [Phone] nvarchar(50) NOT NULL,
    [LogoPath] nvarchar(500) NULL,
    [ImzaDocumentPath] nvarchar(500) NULL,
    [FaaliyetBelgesiPath] nvarchar(500) NULL,
    [OdaSicilKaydiPath] nvarchar(500) NULL,
    [TicaretSicilGazetesiPath] nvarchar(500) NULL,
    [VergiLevhasıPath] nvarchar(500) NULL,
    [SigortaBelgesiPath] nvarchar(500) NULL,
    [HizmetDetayiPath] nvarchar(500) NULL,
    [AracD2BelgesiPath] nvarchar(500) NULL,
    [SportifFaaliyetBelgesiPath] nvarchar(500) NULL,
    CONSTRAINT [PK__TourComp__3214EC07A431D01F] PRIMARY KEY ([Id])
);
[2025-07-23 13:43:19 ERR] Veritabanı güncellenirken bir hata oluştu.
Microsoft.Data.SqlClient.SqlException (0x80131904): There is already an object named 'TourCompanies' in the database.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteNonQueryTds(String methodName, Boolean isAsync, Int32 timeout, Boolean asyncWrite)
   at Microsoft.Data.SqlClient.SqlCommand.InternalExecuteNonQuery(TaskCompletionSource`1 completion, Boolean sendToPipe, Int32 timeout, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String methodName)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteNonQuery()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteNonQuery(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Migrations.MigrationCommand.ExecuteNonQuery(IRelationalConnection connection, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.MigrationCommandExecutor.Execute(IReadOnlyList`1 migrationCommands, IRelationalConnection connection, MigrationExecutionState executionState, Boolean beginTransaction, Boolean commitTransaction, Nullable`1 isolationLevel)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.MigrationCommandExecutor.<>c.<ExecuteNonQuery>b__3_1(DbContext _, ValueTuple`6 s)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.MigrationCommandExecutor.ExecuteNonQuery(IReadOnlyList`1 migrationCommands, IRelationalConnection connection, MigrationExecutionState executionState, Boolean commitTransaction, Nullable`1 isolationLevel)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.Migrator.MigrateImplementation(DbContext context, String targetMigration, MigrationExecutionState state, Boolean useTransaction)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.Migrator.<>c.<Migrate>b__20_1(DbContext c, ValueTuple`4 s)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass28_0`2.<Execute>b__0(DbContext context, TState state)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementation[TState,TResult](Func`3 operation, Func`3 verifySucceeded, TState state)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.Migrator.Migrate(String targetMigration)
   at Microsoft.EntityFrameworkCore.RelationalDatabaseFacadeExtensions.Migrate(DatabaseFacade databaseFacade)
   at Program.<Main>$(String[] args) in C:\Users\DALGIC\source\repos\tour-management-api-dotnet\Program.cs:line 121
ClientConnectionId:dcc0da64-e5a3-4420-a27b-1dac06c91e75
Error Number:2714,State:6,Class:16
[2025-07-23 13:43:20 INF] User profile is available. Using 'C:\Users\DALGIC\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2025-07-23 13:43:20 INF] Now listening on: http://localhost:5050
[2025-07-23 13:43:20 INF] Application started. Press Ctrl+C to shut down.
[2025-07-23 13:43:20 INF] Hosting environment: Development
[2025-07-23 13:43:20 INF] Content root path: C:\Users\DALGIC\source\repos\tour-management-api-dotnet
[2025-07-23 18:50:56 WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
[2025-07-23 18:50:57 INF] Executed DbCommand (62ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
[2025-07-23 18:50:57 INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
[2025-07-23 18:50:57 INF] Executed DbCommand (61ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
[2025-07-23 18:50:58 INF] Executed DbCommand (48ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
[2025-07-23 18:50:58 INF] Executed DbCommand (41ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
[2025-07-23 18:50:58 INF] Executed DbCommand (47ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
[2025-07-23 18:50:58 INF] Executed DbCommand (52ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
[2025-07-23 18:50:58 INF] Applying migration '20250628220812_InitialCreate'.
[2025-07-23 18:50:58 ERR] Failed executing DbCommand (83ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [TourCompanies] (
    [Id] int NOT NULL IDENTITY,
    [CompanyName] nvarchar(255) NOT NULL,
    [AuthorizedPerson] nvarchar(255) NOT NULL,
    [Email] nvarchar(255) NOT NULL,
    [Phone] nvarchar(50) NOT NULL,
    [LogoPath] nvarchar(500) NULL,
    [ImzaDocumentPath] nvarchar(500) NULL,
    [FaaliyetBelgesiPath] nvarchar(500) NULL,
    [OdaSicilKaydiPath] nvarchar(500) NULL,
    [TicaretSicilGazetesiPath] nvarchar(500) NULL,
    [VergiLevhasıPath] nvarchar(500) NULL,
    [SigortaBelgesiPath] nvarchar(500) NULL,
    [HizmetDetayiPath] nvarchar(500) NULL,
    [AracD2BelgesiPath] nvarchar(500) NULL,
    [SportifFaaliyetBelgesiPath] nvarchar(500) NULL,
    CONSTRAINT [PK__TourComp__3214EC07A431D01F] PRIMARY KEY ([Id])
);
[2025-07-23 18:50:58 ERR] Veritabanı güncellenirken bir hata oluştu.
Microsoft.Data.SqlClient.SqlException (0x80131904): There is already an object named 'TourCompanies' in the database.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteNonQueryTds(String methodName, Boolean isAsync, Int32 timeout, Boolean asyncWrite)
   at Microsoft.Data.SqlClient.SqlCommand.InternalExecuteNonQuery(TaskCompletionSource`1 completion, Boolean sendToPipe, Int32 timeout, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String methodName)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteNonQuery()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteNonQuery(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Migrations.MigrationCommand.ExecuteNonQuery(IRelationalConnection connection, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.MigrationCommandExecutor.Execute(IReadOnlyList`1 migrationCommands, IRelationalConnection connection, MigrationExecutionState executionState, Boolean beginTransaction, Boolean commitTransaction, Nullable`1 isolationLevel)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.MigrationCommandExecutor.<>c.<ExecuteNonQuery>b__3_1(DbContext _, ValueTuple`6 s)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.MigrationCommandExecutor.ExecuteNonQuery(IReadOnlyList`1 migrationCommands, IRelationalConnection connection, MigrationExecutionState executionState, Boolean commitTransaction, Nullable`1 isolationLevel)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.Migrator.MigrateImplementation(DbContext context, String targetMigration, MigrationExecutionState state, Boolean useTransaction)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.Migrator.<>c.<Migrate>b__20_1(DbContext c, ValueTuple`4 s)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass28_0`2.<Execute>b__0(DbContext context, TState state)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementation[TState,TResult](Func`3 operation, Func`3 verifySucceeded, TState state)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.Migrator.Migrate(String targetMigration)
   at Microsoft.EntityFrameworkCore.RelationalDatabaseFacadeExtensions.Migrate(DatabaseFacade databaseFacade)
   at Program.<Main>$(String[] args) in C:\Users\DALGIC\source\repos\tour-management-api-dotnet\Program.cs:line 121
ClientConnectionId:e55e6b56-584a-47e9-88e0-becbc357b3ab
Error Number:2714,State:6,Class:16
[2025-07-23 18:50:58 INF] User profile is available. Using 'C:\Users\DALGIC\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2025-07-23 18:50:58 INF] Now listening on: http://localhost:5050
[2025-07-23 18:50:58 INF] Application started. Press Ctrl+C to shut down.
[2025-07-23 18:50:58 INF] Hosting environment: Development
[2025-07-23 18:50:58 INF] Content root path: C:\Users\DALGIC\source\repos\tour-management-api-dotnet
[2025-07-23 18:53:14 WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
[2025-07-23 18:53:15 INF] Executed DbCommand (50ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
[2025-07-23 18:53:15 INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
[2025-07-23 18:53:15 INF] Executed DbCommand (91ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
[2025-07-23 18:53:15 INF] Executed DbCommand (46ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
[2025-07-23 18:53:15 INF] Executed DbCommand (68ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
[2025-07-23 18:53:15 INF] Executed DbCommand (63ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
[2025-07-23 18:53:15 INF] Executed DbCommand (37ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
[2025-07-23 18:53:15 INF] Applying migration '20250628220812_InitialCreate'.
[2025-07-23 18:53:16 ERR] Failed executing DbCommand (148ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [TourCompanies] (
    [Id] int NOT NULL IDENTITY,
    [CompanyName] nvarchar(255) NOT NULL,
    [AuthorizedPerson] nvarchar(255) NOT NULL,
    [Email] nvarchar(255) NOT NULL,
    [Phone] nvarchar(50) NOT NULL,
    [LogoPath] nvarchar(500) NULL,
    [ImzaDocumentPath] nvarchar(500) NULL,
    [FaaliyetBelgesiPath] nvarchar(500) NULL,
    [OdaSicilKaydiPath] nvarchar(500) NULL,
    [TicaretSicilGazetesiPath] nvarchar(500) NULL,
    [VergiLevhasıPath] nvarchar(500) NULL,
    [SigortaBelgesiPath] nvarchar(500) NULL,
    [HizmetDetayiPath] nvarchar(500) NULL,
    [AracD2BelgesiPath] nvarchar(500) NULL,
    [SportifFaaliyetBelgesiPath] nvarchar(500) NULL,
    CONSTRAINT [PK__TourComp__3214EC07A431D01F] PRIMARY KEY ([Id])
);
[2025-07-23 18:53:16 ERR] Veritabanı güncellenirken bir hata oluştu.
Microsoft.Data.SqlClient.SqlException (0x80131904): There is already an object named 'TourCompanies' in the database.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteNonQueryTds(String methodName, Boolean isAsync, Int32 timeout, Boolean asyncWrite)
   at Microsoft.Data.SqlClient.SqlCommand.InternalExecuteNonQuery(TaskCompletionSource`1 completion, Boolean sendToPipe, Int32 timeout, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String methodName)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteNonQuery()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteNonQuery(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Migrations.MigrationCommand.ExecuteNonQuery(IRelationalConnection connection, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.MigrationCommandExecutor.Execute(IReadOnlyList`1 migrationCommands, IRelationalConnection connection, MigrationExecutionState executionState, Boolean beginTransaction, Boolean commitTransaction, Nullable`1 isolationLevel)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.MigrationCommandExecutor.<>c.<ExecuteNonQuery>b__3_1(DbContext _, ValueTuple`6 s)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.MigrationCommandExecutor.ExecuteNonQuery(IReadOnlyList`1 migrationCommands, IRelationalConnection connection, MigrationExecutionState executionState, Boolean commitTransaction, Nullable`1 isolationLevel)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.Migrator.MigrateImplementation(DbContext context, String targetMigration, MigrationExecutionState state, Boolean useTransaction)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.Migrator.<>c.<Migrate>b__20_1(DbContext c, ValueTuple`4 s)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass28_0`2.<Execute>b__0(DbContext context, TState state)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementation[TState,TResult](Func`3 operation, Func`3 verifySucceeded, TState state)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.Migrator.Migrate(String targetMigration)
   at Microsoft.EntityFrameworkCore.RelationalDatabaseFacadeExtensions.Migrate(DatabaseFacade databaseFacade)
   at Program.<Main>$(String[] args) in C:\Users\DALGIC\source\repos\tour-management-api-dotnet\Program.cs:line 121
ClientConnectionId:07b5f00b-9023-48a6-b3ea-fc3cc46eff14
Error Number:2714,State:6,Class:16
[2025-07-23 18:53:16 INF] User profile is available. Using 'C:\Users\DALGIC\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2025-07-23 18:53:16 INF] Now listening on: http://localhost:5050
[2025-07-23 18:53:16 INF] Application started. Press Ctrl+C to shut down.
[2025-07-23 18:53:16 INF] Hosting environment: Development
[2025-07-23 18:53:16 INF] Content root path: C:\Users\DALGIC\source\repos\tour-management-api-dotnet
[2025-07-23 19:15:48 WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
[2025-07-23 19:15:49 INF] Executed DbCommand (26ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
[2025-07-23 19:15:49 INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
[2025-07-23 19:15:49 INF] Executed DbCommand (35ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
[2025-07-23 19:15:49 INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
[2025-07-23 19:15:49 INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
[2025-07-23 19:15:49 INF] Executed DbCommand (30ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
[2025-07-23 19:15:49 INF] Executed DbCommand (22ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
[2025-07-23 19:15:49 INF] Applying migration '20250628220812_InitialCreate'.
[2025-07-23 19:15:49 ERR] Failed executing DbCommand (94ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [TourCompanies] (
    [Id] int NOT NULL IDENTITY,
    [CompanyName] nvarchar(255) NOT NULL,
    [AuthorizedPerson] nvarchar(255) NOT NULL,
    [Email] nvarchar(255) NOT NULL,
    [Phone] nvarchar(50) NOT NULL,
    [LogoPath] nvarchar(500) NULL,
    [ImzaDocumentPath] nvarchar(500) NULL,
    [FaaliyetBelgesiPath] nvarchar(500) NULL,
    [OdaSicilKaydiPath] nvarchar(500) NULL,
    [TicaretSicilGazetesiPath] nvarchar(500) NULL,
    [VergiLevhasıPath] nvarchar(500) NULL,
    [SigortaBelgesiPath] nvarchar(500) NULL,
    [HizmetDetayiPath] nvarchar(500) NULL,
    [AracD2BelgesiPath] nvarchar(500) NULL,
    [SportifFaaliyetBelgesiPath] nvarchar(500) NULL,
    CONSTRAINT [PK__TourComp__3214EC07A431D01F] PRIMARY KEY ([Id])
);
[2025-07-23 19:15:49 ERR] Veritabanı güncellenirken bir hata oluştu.
Microsoft.Data.SqlClient.SqlException (0x80131904): There is already an object named 'TourCompanies' in the database.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteNonQueryTds(String methodName, Boolean isAsync, Int32 timeout, Boolean asyncWrite)
   at Microsoft.Data.SqlClient.SqlCommand.InternalExecuteNonQuery(TaskCompletionSource`1 completion, Boolean sendToPipe, Int32 timeout, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String methodName)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteNonQuery()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteNonQuery(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Migrations.MigrationCommand.ExecuteNonQuery(IRelationalConnection connection, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.MigrationCommandExecutor.Execute(IReadOnlyList`1 migrationCommands, IRelationalConnection connection, MigrationExecutionState executionState, Boolean beginTransaction, Boolean commitTransaction, Nullable`1 isolationLevel)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.MigrationCommandExecutor.<>c.<ExecuteNonQuery>b__3_1(DbContext _, ValueTuple`6 s)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.MigrationCommandExecutor.ExecuteNonQuery(IReadOnlyList`1 migrationCommands, IRelationalConnection connection, MigrationExecutionState executionState, Boolean commitTransaction, Nullable`1 isolationLevel)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.Migrator.MigrateImplementation(DbContext context, String targetMigration, MigrationExecutionState state, Boolean useTransaction)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.Migrator.<>c.<Migrate>b__20_1(DbContext c, ValueTuple`4 s)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass28_0`2.<Execute>b__0(DbContext context, TState state)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementation[TState,TResult](Func`3 operation, Func`3 verifySucceeded, TState state)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.Migrator.Migrate(String targetMigration)
   at Microsoft.EntityFrameworkCore.RelationalDatabaseFacadeExtensions.Migrate(DatabaseFacade databaseFacade)
   at Program.<Main>$(String[] args) in C:\Users\DALGIC\source\repos\tour-management-api-dotnet\Program.cs:line 121
ClientConnectionId:9f7eede6-80f0-479b-9a05-f843780ec8b3
Error Number:2714,State:6,Class:16
[2025-07-23 19:15:50 INF] User profile is available. Using 'C:\Users\DALGIC\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2025-07-23 19:15:50 INF] Request starting HTTP/2 GET https://localhost:44353/ - null null
[2025-07-23 19:15:50 INF] Application started. Press Ctrl+C to shut down.
[2025-07-23 19:15:50 INF] Hosting environment: Development
[2025-07-23 19:15:50 INF] Content root path: C:\Users\DALGIC\source\repos\tour-management-api-dotnet
[2025-07-23 19:15:51 INF] Executing endpoint 'TourManagementApi.Controllers.ActivitiesWizardController.Index (TourManagementApi)'
[2025-07-23 19:15:51 INF] Route matched with {action = "Index", controller = "ActivitiesWizard"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Index(System.String) on controller TourManagementApi.Controllers.ActivitiesWizardController (TourManagementApi).
[2025-07-23 19:15:52 INF] Executed DbCommand (101ms) [Parameters=[@__Id_0='96d2940f09674b0f81d86bc821c69ff6' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[Title], [a].[Description], [a].[Category], [t].[CompanyName], [a].[Label], [a].[Status], [t].[Id], [o].[Id], [o].[ActivityId], [o].[CanBeBookedAfterStartTime], [o].[CutOff], [o].[Duration], [o].[EndTime], [o].[FromDate], [o].[Name], [o].[StartTime], [o].[UntilDate], [o].[Weekdays], [a].[CountryCode], [a].[DestinationCode], [a].[DestinationName], [a].[CreatedAt], [a].[UpdatedAt], [a].[Rating], [a].[IsFreeCancellation], (
    SELECT COUNT(*)
    FROM [Reservations] AS [r]
    WHERE [a].[Id] = [r].[ActivityId]), (
    SELECT COUNT(*)
    FROM [Availabilities] AS [a0]
    WHERE [a].[Id] = [a0].[ActivityId])
FROM [Activities] AS [a]
LEFT JOIN [TourCompanies] AS [t] ON [a].[TourCompanyId] = [t].[Id]
LEFT JOIN [Options] AS [o] ON [a].[Id] = [o].[ActivityId]
WHERE [a].[B2BAgencyId] = @__Id_0
ORDER BY [a].[Id], [t].[Id]
[2025-07-23 19:16:03 INF] Executing ViewResult, running view Index.
[2025-07-23 19:16:04 INF] Executed ViewResult - view Index executed in 11486.9397ms.
[2025-07-23 19:16:04 INF] Executed action TourManagementApi.Controllers.ActivitiesWizardController.Index (TourManagementApi) in 12806.9383ms
[2025-07-23 19:16:04 INF] Executed endpoint 'TourManagementApi.Controllers.ActivitiesWizardController.Index (TourManagementApi)'
[2025-07-23 19:16:04 INF] Session started; Key:7cf10ce8-8c24-5cda-6b58-671a2086f7af, Id:a2013bd3-34a8-bac8-63f5-806d946b0fc6
[2025-07-23 19:16:04 INF] Request starting HTTP/2 GET https://localhost:44353/lib/bootstrap/dist/css/bootstrap.min.css - null null
[2025-07-23 19:16:04 INF] Request starting HTTP/2 GET https://localhost:44353/css/site.css?v=SdYn8dEg3FtG-NKLajhreC6d5tFLAHhsSFTabA04Z-Q - null null
[2025-07-23 19:16:04 INF] Request finished HTTP/2 GET https://localhost:44353/ - 200 null text/html; charset=utf-8 13901.1393ms
[2025-07-23 19:16:04 INF] Sending file. Request path: '/css/site.css'. Physical path: 'C:\Users\DALGIC\source\repos\tour-management-api-dotnet\wwwroot\css\site.css'
[2025-07-23 19:16:04 INF] Sending file. Request path: '/lib/bootstrap/dist/css/bootstrap.min.css'. Physical path: 'C:\Users\DALGIC\source\repos\tour-management-api-dotnet\wwwroot\lib\bootstrap\dist\css\bootstrap.min.css'
[2025-07-23 19:16:04 INF] Request finished HTTP/2 GET https://localhost:44353/css/site.css?v=SdYn8dEg3FtG-NKLajhreC6d5tFLAHhsSFTabA04Z-Q - 200 859 text/css 41.5083ms
[2025-07-23 19:16:04 INF] Request finished HTTP/2 GET https://localhost:44353/lib/bootstrap/dist/css/bootstrap.min.css - 200 163879 text/css 45.7961ms
[2025-07-23 19:16:04 INF] Request starting HTTP/2 GET https://localhost:44353/lib/bootstrap/dist/js/bootstrap.bundle.min.js - null null
[2025-07-23 19:16:04 INF] Request starting HTTP/2 GET https://localhost:44353/lib/jquery/dist/jquery.min.js - null null
[2025-07-23 19:16:04 INF] Request starting HTTP/2 GET https://localhost:44353/_vs/browserLink - null null
[2025-07-23 19:16:04 INF] Request starting HTTP/2 GET https://localhost:44353/_framework/aspnetcore-browser-refresh.js - null null
[2025-07-23 19:16:04 INF] Request starting HTTP/2 GET https://localhost:44353/js/site.js?v=qZeAq26xp7dsarNSRZDWTUJes-9D14egUbPPcChdFj4 - null null
[2025-07-23 19:16:04 INF] Sending file. Request path: '/lib/bootstrap/dist/js/bootstrap.bundle.min.js'. Physical path: 'C:\Users\DALGIC\source\repos\tour-management-api-dotnet\wwwroot\lib\bootstrap\dist\js\bootstrap.bundle.min.js'
[2025-07-23 19:16:04 INF] Sending file. Request path: '/js/site.js'. Physical path: 'C:\Users\DALGIC\source\repos\tour-management-api-dotnet\wwwroot\js\site.js'
[2025-07-23 19:16:04 INF] Sending file. Request path: '/lib/jquery/dist/jquery.min.js'. Physical path: 'C:\Users\DALGIC\source\repos\tour-management-api-dotnet\wwwroot\lib\jquery\dist\jquery.min.js'
[2025-07-23 19:16:04 INF] Request finished HTTP/2 GET https://localhost:44353/lib/bootstrap/dist/js/bootstrap.bundle.min.js - 200 78135 text/javascript 28.1759ms
[2025-07-23 19:16:04 INF] Request finished HTTP/2 GET https://localhost:44353/js/site.js?v=qZeAq26xp7dsarNSRZDWTUJes-9D14egUbPPcChdFj4 - 200 397 text/javascript 14.1995ms
[2025-07-23 19:16:04 INF] Request finished HTTP/2 GET https://localhost:44353/lib/jquery/dist/jquery.min.js - 200 89503 text/javascript 21.0106ms
[2025-07-23 19:16:04 INF] Request finished HTTP/2 GET https://localhost:44353/_framework/aspnetcore-browser-refresh.js - 200 16519 application/javascript; charset=utf-8 16.9537ms
[2025-07-23 19:16:04 INF] Request starting HTTP/2 GET https://localhost:44353/lib/bootstrap/dist/js/bootstrap.bundle.min.js - null null
[2025-07-23 19:16:04 INF] Request starting HTTP/2 GET https://localhost:44353/lib/jquery/dist/jquery.min.js - null null
[2025-07-23 19:16:04 INF] Request starting HTTP/2 GET https://localhost:44353/_framework/aspnetcore-browser-refresh.js - null null
[2025-07-23 19:16:04 INF] Request starting HTTP/2 GET https://localhost:44353/js/site.js?v=qZeAq26xp7dsarNSRZDWTUJes-9D14egUbPPcChdFj4 - null null
[2025-07-23 19:16:04 INF] Request finished HTTP/2 GET https://localhost:44353/_framework/aspnetcore-browser-refresh.js - 200 16519 application/javascript; charset=utf-8 7.0911ms
[2025-07-23 19:16:04 INF] Sending file. Request path: '/js/site.js'. Physical path: 'C:\Users\DALGIC\source\repos\tour-management-api-dotnet\wwwroot\js\site.js'
[2025-07-23 19:16:04 INF] Request finished HTTP/2 GET https://localhost:44353/js/site.js?v=qZeAq26xp7dsarNSRZDWTUJes-9D14egUbPPcChdFj4 - 200 397 text/javascript 13.3272ms
[2025-07-23 19:16:04 INF] Sending file. Request path: '/lib/jquery/dist/jquery.min.js'. Physical path: 'C:\Users\DALGIC\source\repos\tour-management-api-dotnet\wwwroot\lib\jquery\dist\jquery.min.js'
[2025-07-23 19:16:04 INF] Sending file. Request path: '/lib/bootstrap/dist/js/bootstrap.bundle.min.js'. Physical path: 'C:\Users\DALGIC\source\repos\tour-management-api-dotnet\wwwroot\lib\bootstrap\dist\js\bootstrap.bundle.min.js'
[2025-07-23 19:16:04 INF] Request finished HTTP/2 GET https://localhost:44353/lib/bootstrap/dist/js/bootstrap.bundle.min.js - 200 78135 text/javascript 36.3138ms
[2025-07-23 19:16:04 INF] Request finished HTTP/2 GET https://localhost:44353/lib/jquery/dist/jquery.min.js - 200 89503 text/javascript 31.972ms
[2025-07-23 19:16:04 INF] Request finished HTTP/2 GET https://localhost:44353/_vs/browserLink - 200 null text/javascript; charset=UTF-8 152.5166ms
[2025-07-23 19:16:05 INF] Request starting HTTP/2 GET https://localhost:44353/_vs/browserLink - null null
[2025-07-23 19:16:05 INF] Request finished HTTP/2 GET https://localhost:44353/_vs/browserLink - 200 null text/javascript; charset=UTF-8 49.0854ms
[2025-07-23 19:17:21 INF] Request starting HTTP/2 GET https://localhost:44353/swagger - null null
[2025-07-23 19:17:21 INF] Request finished HTTP/2 GET https://localhost:44353/swagger - 301 null null 10.7614ms
[2025-07-23 19:17:21 INF] Request starting HTTP/2 GET https://localhost:44353/swagger/index.html - null null
[2025-07-23 19:17:21 INF] Request finished HTTP/2 GET https://localhost:44353/swagger/index.html - 200 null text/html;charset=utf-8 30.6578ms
[2025-07-23 19:17:21 INF] Request starting HTTP/2 GET https://localhost:44353/swagger/swagger-ui-standalone-preset.js - null null
[2025-07-23 19:17:21 INF] Request starting HTTP/2 GET https://localhost:44353/swagger/swagger-ui-bundle.js - null null
[2025-07-23 19:17:21 INF] Request starting HTTP/2 GET https://localhost:44353/_framework/aspnetcore-browser-refresh.js - null null
[2025-07-23 19:17:21 INF] Request finished HTTP/2 GET https://localhost:44353/_framework/aspnetcore-browser-refresh.js - 200 16519 application/javascript; charset=utf-8 4.5714ms
[2025-07-23 19:17:21 INF] Request starting HTTP/2 GET https://localhost:44353/swagger/swagger-ui.css - null null
[2025-07-23 19:17:21 INF] Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
[2025-07-23 19:17:21 INF] Request starting HTTP/2 GET https://localhost:44353/_vs/browserLink - null null
[2025-07-23 19:17:21 INF] Sending file. Request path: '/swagger-ui-standalone-preset.js'. Physical path: 'N/A'
[2025-07-23 19:17:21 INF] Request finished HTTP/2 GET https://localhost:44353/swagger/swagger-ui.css - 200 144929 text/css 12.8082ms
[2025-07-23 19:17:21 INF] Sending file. Request path: '/swagger-ui-bundle.js'. Physical path: 'N/A'
[2025-07-23 19:17:21 INF] Request finished HTTP/2 GET https://localhost:44353/swagger/swagger-ui-standalone-preset.js - 200 312163 text/javascript 22.5602ms
[2025-07-23 19:17:21 INF] Request finished HTTP/2 GET https://localhost:44353/_vs/browserLink - 200 null text/javascript; charset=UTF-8 29.392ms
[2025-07-23 19:17:21 INF] Request finished HTTP/2 GET https://localhost:44353/swagger/swagger-ui-bundle.js - 200 1061536 text/javascript 52.0747ms
[2025-07-23 19:17:21 INF] Request starting HTTP/2 GET https://localhost:44353/swagger/favicon-32x32.png - null null
[2025-07-23 19:17:21 INF] Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
[2025-07-23 19:17:21 INF] Request finished HTTP/2 GET https://localhost:44353/swagger/favicon-32x32.png - 200 628 image/png 0.9379ms
[2025-07-23 19:17:21 INF] Request starting HTTP/2 GET https://localhost:44353/swagger/favicon-16x16.png - null null
[2025-07-23 19:17:21 INF] Sending file. Request path: '/favicon-16x16.png'. Physical path: 'N/A'
[2025-07-23 19:17:21 INF] Request finished HTTP/2 GET https://localhost:44353/swagger/favicon-16x16.png - 200 665 image/png 0.8365ms
[2025-07-23 19:17:21 INF] Request starting HTTP/2 GET https://localhost:44353/swagger/v1/swagger.json - null null
[2025-07-23 19:17:21 INF] Request finished HTTP/2 GET https://localhost:44353/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 7.0407ms
