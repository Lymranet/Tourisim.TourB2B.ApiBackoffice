[2025-08-02 14:38:25 WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
[2025-08-02 14:38:25 ERR] Veritabanı güncellenirken bir hata oluştu.
System.InvalidOperationException: An error was generated for warning 'Microsoft.EntityFrameworkCore.Migrations.PendingModelChangesWarning': The model for context 'ApplicationDbContext' has pending changes. Add a new migration before updating the database. See https://aka.ms/efcore-docs-pending-changes. This exception can be suppressed or logged by passing event ID 'RelationalEventId.PendingModelChangesWarning' to the 'ConfigureWarnings' method in 'DbContext.OnConfiguring' or 'AddDbContext'.
   at Microsoft.EntityFrameworkCore.Diagnostics.EventDefinition`1.Log[TLoggerCategory](IDiagnosticsLogger`1 logger, TParam arg)
   at Microsoft.EntityFrameworkCore.Diagnostics.RelationalLoggerExtensions.PendingModelChangesWarning(IDiagnosticsLogger`1 diagnostics, Type contextType)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.Migrator.ValidateMigrations(Boolean useTransaction, String targetMigration)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.Migrator.Migrate(String targetMigration)
   at Microsoft.EntityFrameworkCore.RelationalDatabaseFacadeExtensions.Migrate(DatabaseFacade databaseFacade)
   at Program.<Main>$(String[] args) in D:\TFS\Lymranet\Tourism\B2B\HotelWidget\TourManagement\Program.cs:line 160
[2025-08-02 14:38:26 INF] User profile is available. Using 'C:\Users\OZKAN\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2025-08-02 14:38:26 INF] Now listening on: http://localhost:5050
[2025-08-02 14:38:26 INF] Application started. Press Ctrl+C to shut down.
[2025-08-02 14:38:26 INF] Hosting environment: Development
[2025-08-02 14:38:26 INF] Content root path: D:\TFS\Lymranet\Tourism\B2B\HotelWidget\TourManagement
[2025-08-02 14:38:34 INF] Request starting HTTP/1.1 GET http://localhost:5050/api/rezdyconnect/availability?apiKey=6f686c1986af4830aefb398dc2525bc6&productCode=PYSYJM&externalProductCode=42&startTime=2025-07-31T21:36:09Z&endTime=2025-08-31T20:59:59Z&from=2025-07-31T21:36:09Z&to=2025-08-31T20:59:59Z&startTimeLocal=2025-08-01%2000:36:09&endTimeLocal=2025-08-31%2023:59:59&fromLocal=2025-08-01%2000:36:09&toLocal=2025-08-31%2023:59:59 - null null
[2025-08-02 14:38:34 INF] Executing endpoint 'TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi)'
[2025-08-02 14:38:34 INF] Route matched with {action = "GetAvailability", controller = "RezdyConnect"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAvailability(System.String, System.String, System.String, System.DateTime, System.DateTime, System.String, System.String) on controller TourManagementApi.Controllers.Api.RezdyConnectController (TourManagementApi).
[2025-08-02 14:38:34 INF] Executing action method TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi) - Validation state: "Valid"
[2025-08-02 14:38:35 INF] Executed DbCommand (79ms) [Parameters=[@__activityId_0='42', @__p_1='2025-07-31T21:36:09.0000000+00:00' (Nullable = true), @__p_2='2025-08-31T20:59:59.0000000+00:00' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ActivityId], [a].[AvailableCapacity], [a].[Date], [a].[MaximumCapacity], [a].[OptionId], [a].[PartnerSupplierId], [a].[StartTime], [o].[Id], [o].[ActivityId], [o].[CanBeBookedAfterStartTime], [o].[CutOff], [o].[Duration], [o].[EndTime], [o].[FromDate], [o].[Name], [o].[StartTime], [o].[UntilDate], [o].[Weekdays], [t].[Id], [t].[Amount], [t].[Currency], [t].[MaxAge], [t].[MaxSeats], [t].[MinAge], [t].[MinSeats], [t].[Name], [t].[OptionId], [t].[PriceType], [t].[Type]
FROM [Availabilities] AS [a]
INNER JOIN [Options] AS [o] ON [a].[OptionId] = [o].[Id]
LEFT JOIN [TicketCategories] AS [t] ON [o].[Id] = [t].[OptionId]
WHERE [a].[ActivityId] = @__activityId_0 AND [a].[StartTime] >= @__p_1 AND [a].[StartTime] <= @__p_2
ORDER BY [a].[Id], [o].[Id]
[2025-08-02 14:38:35 INF] Executed action method TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 852.0646ms.
[2025-08-02 14:38:35 INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`2[[<>f__AnonymousType1`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], TourManagementApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[TourManagementApi.Models.Api.RezdyConnectModels.AvailabilitySessionResponse, TourManagementApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-08-02 14:38:35 INF] Executed action TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi) in 924.3723ms
[2025-08-02 14:38:35 INF] Executed endpoint 'TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi)'
[2025-08-02 14:38:35 INF] Request finished HTTP/1.1 GET http://localhost:5050/api/rezdyconnect/availability?apiKey=6f686c1986af4830aefb398dc2525bc6&productCode=PYSYJM&externalProductCode=42&startTime=2025-07-31T21:36:09Z&endTime=2025-08-31T20:59:59Z&from=2025-07-31T21:36:09Z&to=2025-08-31T20:59:59Z&startTimeLocal=2025-08-01%2000:36:09&endTimeLocal=2025-08-31%2023:59:59&fromLocal=2025-08-01%2000:36:09&toLocal=2025-08-31%2023:59:59 - 200 null application/json; charset=utf-8 1129.3936ms
[2025-08-02 15:00:46 INF] Request starting HTTP/1.1 GET http://localhost:5050/api/rezdyconnect/availability?apiKey=6f686c1986af4830aefb398dc2525bc6&productCode=PYSYJM&externalProductCode=42&startTime=2025-07-31T21:36:09Z&endTime=2025-08-3T20:59:59Z&from=2025-07-31T21:36:09Z&to=2025-08-31T20:59:59Z&startTimeLocal=2025-08-01%2000:36:09&endTimeLocal=2025-08-31%2023:59:59&fromLocal=2025-08-01%2000:36:09&toLocal=2025-08-31%2023:59:59 - null null
[2025-08-02 15:00:46 INF] Executing endpoint 'TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi)'
[2025-08-02 15:00:46 INF] Route matched with {action = "GetAvailability", controller = "RezdyConnect"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAvailability(System.String, System.String, System.String, System.DateTime, System.DateTime, System.String, System.String) on controller TourManagementApi.Controllers.Api.RezdyConnectController (TourManagementApi).
[2025-08-02 15:00:46 INF] Executing action method TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi) - Validation state: "Valid"
[2025-08-02 15:00:46 INF] Executed DbCommand (68ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ActivityId], [a].[AvailableCapacity], [a].[Date], [a].[MaximumCapacity], [a].[OptionId], [a].[PartnerSupplierId], [a].[StartTime], [o].[Id], [o].[ActivityId], [o].[CanBeBookedAfterStartTime], [o].[CutOff], [o].[Duration], [o].[EndTime], [o].[FromDate], [o].[Name], [o].[StartTime], [o].[UntilDate], [o].[Weekdays], [t].[Id], [t].[Amount], [t].[Currency], [t].[MaxAge], [t].[MaxSeats], [t].[MinAge], [t].[MinSeats], [t].[Name], [t].[OptionId], [t].[PriceType], [t].[Type]
FROM [Availabilities] AS [a]
INNER JOIN [Options] AS [o] ON [a].[OptionId] = [o].[Id]
LEFT JOIN [TicketCategories] AS [t] ON [o].[Id] = [t].[OptionId]
ORDER BY [a].[Id], [o].[Id]
[2025-08-02 15:00:47 INF] Executed action method TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 624.9274ms.
[2025-08-02 15:00:47 INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`2[[<>f__AnonymousType1`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], TourManagementApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[TourManagementApi.Models.Api.RezdyConnectModels.AvailabilitySessionResponse, TourManagementApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-08-02 15:00:47 INF] Executed action TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi) in 642.9071ms
[2025-08-02 15:00:47 INF] Executed endpoint 'TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi)'
[2025-08-02 15:00:47 INF] Request finished HTTP/1.1 GET http://localhost:5050/api/rezdyconnect/availability?apiKey=6f686c1986af4830aefb398dc2525bc6&productCode=PYSYJM&externalProductCode=42&startTime=2025-07-31T21:36:09Z&endTime=2025-08-3T20:59:59Z&from=2025-07-31T21:36:09Z&to=2025-08-31T20:59:59Z&startTimeLocal=2025-08-01%2000:36:09&endTimeLocal=2025-08-31%2023:59:59&fromLocal=2025-08-01%2000:36:09&toLocal=2025-08-31%2023:59:59 - 200 null application/json; charset=utf-8 684.4855ms
[2025-08-02 15:01:15 INF] Request starting HTTP/1.1 GET http://localhost:5050/api/rezdyconnect/availability?apiKey=6f686c1986af4830aefb398dc2525bc6&productCode=PYSYJM&externalProductCode=42&startTime=2025-07-31T21:36:09Z&endTime=2025-08-2T20:59:59Z&from=2025-07-31T21:36:09Z&to=2025-08-31T20:59:59Z&startTimeLocal=2025-08-01%2000:36:09&endTimeLocal=2025-08-31%2023:59:59&fromLocal=2025-08-01%2000:36:09&toLocal=2025-08-31%2023:59:59 - null null
[2025-08-02 15:01:15 INF] Executing endpoint 'TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi)'
[2025-08-02 15:01:15 INF] Route matched with {action = "GetAvailability", controller = "RezdyConnect"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAvailability(System.String, System.String, System.String, System.DateTime, System.DateTime, System.String, System.String) on controller TourManagementApi.Controllers.Api.RezdyConnectController (TourManagementApi).
[2025-08-02 15:01:15 INF] Executing action method TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi) - Validation state: "Valid"
[2025-08-02 15:01:15 INF] Executed DbCommand (50ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ActivityId], [a].[AvailableCapacity], [a].[Date], [a].[MaximumCapacity], [a].[OptionId], [a].[PartnerSupplierId], [a].[StartTime], [o].[Id], [o].[ActivityId], [o].[CanBeBookedAfterStartTime], [o].[CutOff], [o].[Duration], [o].[EndTime], [o].[FromDate], [o].[Name], [o].[StartTime], [o].[UntilDate], [o].[Weekdays], [t].[Id], [t].[Amount], [t].[Currency], [t].[MaxAge], [t].[MaxSeats], [t].[MinAge], [t].[MinSeats], [t].[Name], [t].[OptionId], [t].[PriceType], [t].[Type]
FROM [Availabilities] AS [a]
INNER JOIN [Options] AS [o] ON [a].[OptionId] = [o].[Id]
LEFT JOIN [TicketCategories] AS [t] ON [o].[Id] = [t].[OptionId]
ORDER BY [a].[Id], [o].[Id]
[2025-08-02 15:01:16 INF] Executed action method TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 410.236ms.
[2025-08-02 15:01:16 INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`2[[<>f__AnonymousType1`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], TourManagementApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[TourManagementApi.Models.Api.RezdyConnectModels.AvailabilitySessionResponse, TourManagementApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-08-02 15:01:16 INF] Executed action TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi) in 421.8257ms
[2025-08-02 15:01:16 INF] Executed endpoint 'TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi)'
[2025-08-02 15:01:16 INF] Request finished HTTP/1.1 GET http://localhost:5050/api/rezdyconnect/availability?apiKey=6f686c1986af4830aefb398dc2525bc6&productCode=PYSYJM&externalProductCode=42&startTime=2025-07-31T21:36:09Z&endTime=2025-08-2T20:59:59Z&from=2025-07-31T21:36:09Z&to=2025-08-31T20:59:59Z&startTimeLocal=2025-08-01%2000:36:09&endTimeLocal=2025-08-31%2023:59:59&fromLocal=2025-08-01%2000:36:09&toLocal=2025-08-31%2023:59:59 - 200 null application/json; charset=utf-8 452.4533ms
[2025-08-02 15:01:18 INF] Request starting HTTP/1.1 GET http://localhost:5050/api/rezdyconnect/availability?apiKey=6f686c1986af4830aefb398dc2525bc6&productCode=PYSYJM&externalProductCode=42&startTime=2025-07-31T21:36:09Z&endTime=2025-08-2T20:59:59Z&from=2025-07-31T21:36:09Z&to=2025-08-31T20:59:59Z&startTimeLocal=2025-08-01%2000:36:09&endTimeLocal=2025-08-31%2023:59:59&fromLocal=2025-08-01%2000:36:09&toLocal=2025-08-31%2023:59:59 - null null
[2025-08-02 15:01:18 INF] Executing endpoint 'TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi)'
[2025-08-02 15:01:18 INF] Route matched with {action = "GetAvailability", controller = "RezdyConnect"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAvailability(System.String, System.String, System.String, System.DateTime, System.DateTime, System.String, System.String) on controller TourManagementApi.Controllers.Api.RezdyConnectController (TourManagementApi).
[2025-08-02 15:01:18 INF] Executing action method TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi) - Validation state: "Valid"
[2025-08-02 15:01:18 INF] Executed DbCommand (26ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ActivityId], [a].[AvailableCapacity], [a].[Date], [a].[MaximumCapacity], [a].[OptionId], [a].[PartnerSupplierId], [a].[StartTime], [o].[Id], [o].[ActivityId], [o].[CanBeBookedAfterStartTime], [o].[CutOff], [o].[Duration], [o].[EndTime], [o].[FromDate], [o].[Name], [o].[StartTime], [o].[UntilDate], [o].[Weekdays], [t].[Id], [t].[Amount], [t].[Currency], [t].[MaxAge], [t].[MaxSeats], [t].[MinAge], [t].[MinSeats], [t].[Name], [t].[OptionId], [t].[PriceType], [t].[Type]
FROM [Availabilities] AS [a]
INNER JOIN [Options] AS [o] ON [a].[OptionId] = [o].[Id]
LEFT JOIN [TicketCategories] AS [t] ON [o].[Id] = [t].[OptionId]
ORDER BY [a].[Id], [o].[Id]
[2025-08-02 15:01:18 INF] Executed action method TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 374.9169ms.
[2025-08-02 15:01:18 INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`2[[<>f__AnonymousType1`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], TourManagementApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[TourManagementApi.Models.Api.RezdyConnectModels.AvailabilitySessionResponse, TourManagementApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-08-02 15:01:18 INF] Executed action TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi) in 382.0203ms
[2025-08-02 15:01:18 INF] Executed endpoint 'TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi)'
[2025-08-02 15:01:18 INF] Request finished HTTP/1.1 GET http://localhost:5050/api/rezdyconnect/availability?apiKey=6f686c1986af4830aefb398dc2525bc6&productCode=PYSYJM&externalProductCode=42&startTime=2025-07-31T21:36:09Z&endTime=2025-08-2T20:59:59Z&from=2025-07-31T21:36:09Z&to=2025-08-31T20:59:59Z&startTimeLocal=2025-08-01%2000:36:09&endTimeLocal=2025-08-31%2023:59:59&fromLocal=2025-08-01%2000:36:09&toLocal=2025-08-31%2023:59:59 - 200 null application/json; charset=utf-8 408.5275ms
[2025-08-02 15:11:59 INF] Request starting HTTP/1.1 GET http://localhost:5050/api/rezdyconnect/availability?apiKey=6f686c1986af4830aefb398dc2525bc6&productCode=PYSYJM&externalProductCode=42&startTime=2025-07-31T21:36:09Z&endTime=2025-08-2T20:59:59Z&from=2025-07-31T21:36:09Z&to=2025-08-31T20:59:59Z&startTimeLocal=2025-08-01%2000:36:09&endTimeLocal=2025-08-31%2023:59:59&fromLocal=2025-08-01%2000:36:09&toLocal=2025-08-31%2023:59:59 - null null
[2025-08-02 15:11:59 INF] Executing endpoint 'TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi)'
[2025-08-02 15:11:59 INF] Route matched with {action = "GetAvailability", controller = "RezdyConnect"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAvailability(System.String, System.String, System.String, System.DateTime, System.DateTime, System.String, System.String) on controller TourManagementApi.Controllers.Api.RezdyConnectController (TourManagementApi).
[2025-08-02 15:11:59 INF] Executing action method TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi) - Validation state: "Valid"
[2025-08-02 15:11:59 INF] Executed DbCommand (51ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ActivityId], [a].[AvailableCapacity], [a].[Date], [a].[MaximumCapacity], [a].[OptionId], [a].[PartnerSupplierId], [a].[StartTime], [o].[Id], [o].[ActivityId], [o].[CanBeBookedAfterStartTime], [o].[CutOff], [o].[Duration], [o].[EndTime], [o].[FromDate], [o].[Name], [o].[StartTime], [o].[UntilDate], [o].[Weekdays], [t].[Id], [t].[Amount], [t].[Currency], [t].[MaxAge], [t].[MaxSeats], [t].[MinAge], [t].[MinSeats], [t].[Name], [t].[OptionId], [t].[PriceType], [t].[Type]
FROM [Availabilities] AS [a]
INNER JOIN [Options] AS [o] ON [a].[OptionId] = [o].[Id]
LEFT JOIN [TicketCategories] AS [t] ON [o].[Id] = [t].[OptionId]
ORDER BY [a].[Id], [o].[Id]
[2025-08-02 15:11:59 INF] Executed action method TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 557.2048ms.
[2025-08-02 15:11:59 INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`2[[<>f__AnonymousType1`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], TourManagementApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[TourManagementApi.Models.Api.RezdyConnectModels.AvailabilitySessionResponse, TourManagementApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-08-02 15:11:59 INF] Executed action TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi) in 571.8714ms
[2025-08-02 15:11:59 INF] Executed endpoint 'TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi)'
[2025-08-02 15:11:59 INF] Request finished HTTP/1.1 GET http://localhost:5050/api/rezdyconnect/availability?apiKey=6f686c1986af4830aefb398dc2525bc6&productCode=PYSYJM&externalProductCode=42&startTime=2025-07-31T21:36:09Z&endTime=2025-08-2T20:59:59Z&from=2025-07-31T21:36:09Z&to=2025-08-31T20:59:59Z&startTimeLocal=2025-08-01%2000:36:09&endTimeLocal=2025-08-31%2023:59:59&fromLocal=2025-08-01%2000:36:09&toLocal=2025-08-31%2023:59:59 - 200 null application/json; charset=utf-8 618.8228ms
[2025-08-02 15:13:20 INF] Request starting HTTP/1.1 GET http://localhost:5050/api/rezdyconnect/availability?apiKey=6f686c1986af4830aefb398dc2525bc6&productCode=PHN0ZK&externalProductCode=42&startTime=2025-08-01T21:00:00Z&endTime=2025-08-01T21:00:00Z&from=2025-08-01T21:00:00Z&to=2025-08-01T21:00:00Z&startTimeLocal=2025-08-02%2000:00:00&endTimeLocal=2025-08-02%2000:00:00&fromLocal=2025-08-02%2000:00:00&toLocal=2025-08-02%2000:00:00 - null null
[2025-08-02 15:13:20 INF] Executing endpoint 'TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi)'
[2025-08-02 15:13:20 INF] Route matched with {action = "GetAvailability", controller = "RezdyConnect"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAvailability(System.String, System.String, System.String, System.DateTime, System.DateTime, System.String, System.String) on controller TourManagementApi.Controllers.Api.RezdyConnectController (TourManagementApi).
[2025-08-02 15:13:20 INF] Executing action method TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi) - Validation state: "Valid"
[2025-08-02 15:13:20 INF] Executed DbCommand (26ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ActivityId], [a].[AvailableCapacity], [a].[Date], [a].[MaximumCapacity], [a].[OptionId], [a].[PartnerSupplierId], [a].[StartTime], [o].[Id], [o].[ActivityId], [o].[CanBeBookedAfterStartTime], [o].[CutOff], [o].[Duration], [o].[EndTime], [o].[FromDate], [o].[Name], [o].[StartTime], [o].[UntilDate], [o].[Weekdays], [t].[Id], [t].[Amount], [t].[Currency], [t].[MaxAge], [t].[MaxSeats], [t].[MinAge], [t].[MinSeats], [t].[Name], [t].[OptionId], [t].[PriceType], [t].[Type]
FROM [Availabilities] AS [a]
INNER JOIN [Options] AS [o] ON [a].[OptionId] = [o].[Id]
LEFT JOIN [TicketCategories] AS [t] ON [o].[Id] = [t].[OptionId]
ORDER BY [a].[Id], [o].[Id]
[2025-08-02 15:13:20 INF] Executed action method TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 373.7715ms.
[2025-08-02 15:13:20 INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`2[[<>f__AnonymousType1`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], TourManagementApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[TourManagementApi.Models.Api.RezdyConnectModels.AvailabilitySessionResponse, TourManagementApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-08-02 15:13:20 INF] Executed action TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi) in 388.2858ms
[2025-08-02 15:13:20 INF] Executed endpoint 'TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi)'
[2025-08-02 15:13:20 INF] Request finished HTTP/1.1 GET http://localhost:5050/api/rezdyconnect/availability?apiKey=6f686c1986af4830aefb398dc2525bc6&productCode=PHN0ZK&externalProductCode=42&startTime=2025-08-01T21:00:00Z&endTime=2025-08-01T21:00:00Z&from=2025-08-01T21:00:00Z&to=2025-08-01T21:00:00Z&startTimeLocal=2025-08-02%2000:00:00&endTimeLocal=2025-08-02%2000:00:00&fromLocal=2025-08-02%2000:00:00&toLocal=2025-08-02%2000:00:00 - 200 null application/json; charset=utf-8 415.0631ms
[2025-08-02 15:16:17 INF] Request starting HTTP/1.1 GET http://localhost:5050/api/rezdyconnect/availability?apiKey=6f686c1986af4830aefb398dc2525bc6&productCode=PHN0ZK&externalProductCode=42&startTime=2025-08-02T21:00:00Z&endTime=2025-08-03T21:00:00Z&from=2025-08-01T21:00:00Z&to=2025-08-01T21:00:00Z&startTimeLocal=2025-08-02%2000:00:00&endTimeLocal=2025-08-02%2000:00:00&fromLocal=2025-08-02%2000:00:00&toLocal=2025-08-02%2000:00:00 - null null
[2025-08-02 15:16:17 INF] Executing endpoint 'TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi)'
[2025-08-02 15:16:17 INF] Route matched with {action = "GetAvailability", controller = "RezdyConnect"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAvailability(System.String, System.String, System.String, System.DateTime, System.DateTime, System.String, System.String) on controller TourManagementApi.Controllers.Api.RezdyConnectController (TourManagementApi).
[2025-08-02 15:16:17 INF] Executing action method TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi) - Validation state: "Valid"
[2025-08-02 15:16:17 INF] Executed DbCommand (27ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ActivityId], [a].[AvailableCapacity], [a].[Date], [a].[MaximumCapacity], [a].[OptionId], [a].[PartnerSupplierId], [a].[StartTime], [o].[Id], [o].[ActivityId], [o].[CanBeBookedAfterStartTime], [o].[CutOff], [o].[Duration], [o].[EndTime], [o].[FromDate], [o].[Name], [o].[StartTime], [o].[UntilDate], [o].[Weekdays], [t].[Id], [t].[Amount], [t].[Currency], [t].[MaxAge], [t].[MaxSeats], [t].[MinAge], [t].[MinSeats], [t].[Name], [t].[OptionId], [t].[PriceType], [t].[Type]
FROM [Availabilities] AS [a]
INNER JOIN [Options] AS [o] ON [a].[OptionId] = [o].[Id]
LEFT JOIN [TicketCategories] AS [t] ON [o].[Id] = [t].[OptionId]
ORDER BY [a].[Id], [o].[Id]
[2025-08-02 15:16:17 INF] Executed action method TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 373.3443ms.
[2025-08-02 15:16:17 INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`2[[<>f__AnonymousType1`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], TourManagementApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[TourManagementApi.Models.Api.RezdyConnectModels.AvailabilitySessionResponse, TourManagementApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-08-02 15:16:17 INF] Executed action TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi) in 393.3679ms
[2025-08-02 15:16:17 INF] Executed endpoint 'TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi)'
[2025-08-02 15:16:17 INF] Request finished HTTP/1.1 GET http://localhost:5050/api/rezdyconnect/availability?apiKey=6f686c1986af4830aefb398dc2525bc6&productCode=PHN0ZK&externalProductCode=42&startTime=2025-08-02T21:00:00Z&endTime=2025-08-03T21:00:00Z&from=2025-08-01T21:00:00Z&to=2025-08-01T21:00:00Z&startTimeLocal=2025-08-02%2000:00:00&endTimeLocal=2025-08-02%2000:00:00&fromLocal=2025-08-02%2000:00:00&toLocal=2025-08-02%2000:00:00 - 200 null application/json; charset=utf-8 436.4668ms
[2025-08-02 15:16:20 INF] Request starting HTTP/1.1 GET http://localhost:5050/api/rezdyconnect/availability?apiKey=6f686c1986af4830aefb398dc2525bc6&productCode=PHN0ZK&externalProductCode=42&startTime=2025-08-02T21:00:00Z&endTime=2025-08-03T21:00:00Z&from=2025-08-01T21:00:00Z&to=2025-08-01T21:00:00Z&startTimeLocal=2025-08-02%2000:00:00&endTimeLocal=2025-08-02%2000:00:00&fromLocal=2025-08-02%2000:00:00&toLocal=2025-08-02%2000:00:00 - null null
[2025-08-02 15:16:20 INF] Executing endpoint 'TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi)'
[2025-08-02 15:16:20 INF] Route matched with {action = "GetAvailability", controller = "RezdyConnect"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAvailability(System.String, System.String, System.String, System.DateTime, System.DateTime, System.String, System.String) on controller TourManagementApi.Controllers.Api.RezdyConnectController (TourManagementApi).
[2025-08-02 15:16:20 INF] Executing action method TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi) - Validation state: "Valid"
[2025-08-02 15:16:20 INF] Executed DbCommand (26ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ActivityId], [a].[AvailableCapacity], [a].[Date], [a].[MaximumCapacity], [a].[OptionId], [a].[PartnerSupplierId], [a].[StartTime], [o].[Id], [o].[ActivityId], [o].[CanBeBookedAfterStartTime], [o].[CutOff], [o].[Duration], [o].[EndTime], [o].[FromDate], [o].[Name], [o].[StartTime], [o].[UntilDate], [o].[Weekdays], [t].[Id], [t].[Amount], [t].[Currency], [t].[MaxAge], [t].[MaxSeats], [t].[MinAge], [t].[MinSeats], [t].[Name], [t].[OptionId], [t].[PriceType], [t].[Type]
FROM [Availabilities] AS [a]
INNER JOIN [Options] AS [o] ON [a].[OptionId] = [o].[Id]
LEFT JOIN [TicketCategories] AS [t] ON [o].[Id] = [t].[OptionId]
ORDER BY [a].[Id], [o].[Id]
[2025-08-02 15:16:20 INF] Executed action method TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 376.6223ms.
[2025-08-02 15:16:20 INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`2[[<>f__AnonymousType1`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], TourManagementApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[TourManagementApi.Models.Api.RezdyConnectModels.AvailabilitySessionResponse, TourManagementApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-08-02 15:16:20 INF] Executed action TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi) in 385.1518ms
[2025-08-02 15:16:20 INF] Executed endpoint 'TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi)'
[2025-08-02 15:16:20 INF] Request finished HTTP/1.1 GET http://localhost:5050/api/rezdyconnect/availability?apiKey=6f686c1986af4830aefb398dc2525bc6&productCode=PHN0ZK&externalProductCode=42&startTime=2025-08-02T21:00:00Z&endTime=2025-08-03T21:00:00Z&from=2025-08-01T21:00:00Z&to=2025-08-01T21:00:00Z&startTimeLocal=2025-08-02%2000:00:00&endTimeLocal=2025-08-02%2000:00:00&fromLocal=2025-08-02%2000:00:00&toLocal=2025-08-02%2000:00:00 - 200 null application/json; charset=utf-8 405.4231ms
[2025-08-02 15:16:45 INF] Request starting HTTP/1.1 GET http://localhost:5050/api/rezdyconnect/availability?apiKey=6f686c1986af4830aefb398dc2525bc6&productCode=PHN0ZK&externalProductCode=42&startTime=2025-08-02T21:00:00Z&endTime=2025-08-03T21:00:00Z&from=2025-08-02T21:00:00Z&to=2025-08-03T21:00:00Z&startTimeLocal=2025-08-02%2000:00:00&endTimeLocal=2025-08-03%2000:00:00&fromLocal=2025-08-02%2000:00:00&toLocal=2025-08-02%2000:00:00 - null null
[2025-08-02 15:16:45 INF] Executing endpoint 'TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi)'
[2025-08-02 15:16:45 INF] Route matched with {action = "GetAvailability", controller = "RezdyConnect"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAvailability(System.String, System.String, System.String, System.DateTime, System.DateTime, System.String, System.String) on controller TourManagementApi.Controllers.Api.RezdyConnectController (TourManagementApi).
[2025-08-02 15:16:45 INF] Executing action method TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi) - Validation state: "Valid"
[2025-08-02 15:16:45 INF] Executed DbCommand (26ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ActivityId], [a].[AvailableCapacity], [a].[Date], [a].[MaximumCapacity], [a].[OptionId], [a].[PartnerSupplierId], [a].[StartTime], [o].[Id], [o].[ActivityId], [o].[CanBeBookedAfterStartTime], [o].[CutOff], [o].[Duration], [o].[EndTime], [o].[FromDate], [o].[Name], [o].[StartTime], [o].[UntilDate], [o].[Weekdays], [t].[Id], [t].[Amount], [t].[Currency], [t].[MaxAge], [t].[MaxSeats], [t].[MinAge], [t].[MinSeats], [t].[Name], [t].[OptionId], [t].[PriceType], [t].[Type]
FROM [Availabilities] AS [a]
INNER JOIN [Options] AS [o] ON [a].[OptionId] = [o].[Id]
LEFT JOIN [TicketCategories] AS [t] ON [o].[Id] = [t].[OptionId]
ORDER BY [a].[Id], [o].[Id]
[2025-08-02 15:16:46 INF] Executed action method TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 380.157ms.
[2025-08-02 15:16:46 INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`2[[<>f__AnonymousType1`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], TourManagementApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[TourManagementApi.Models.Api.RezdyConnectModels.AvailabilitySessionResponse, TourManagementApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-08-02 15:16:46 INF] Executed action TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi) in 394.2815ms
[2025-08-02 15:16:46 INF] Executed endpoint 'TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi)'
[2025-08-02 15:16:46 INF] Request finished HTTP/1.1 GET http://localhost:5050/api/rezdyconnect/availability?apiKey=6f686c1986af4830aefb398dc2525bc6&productCode=PHN0ZK&externalProductCode=42&startTime=2025-08-02T21:00:00Z&endTime=2025-08-03T21:00:00Z&from=2025-08-02T21:00:00Z&to=2025-08-03T21:00:00Z&startTimeLocal=2025-08-02%2000:00:00&endTimeLocal=2025-08-03%2000:00:00&fromLocal=2025-08-02%2000:00:00&toLocal=2025-08-02%2000:00:00 - 200 null application/json; charset=utf-8 422.718ms
[2025-08-02 16:07:59 INF] Request starting HTTP/1.1 GET http://localhost:5050/api/rezdyconnect/availability?apiKey=6f686c1986af4830aefb398dc2525bc6&productCode=PHN0ZK&externalProductCode=42&startTime=2025-08-01T21:00:00Z&endTime=2025-08-01T21:00:00Z&from=2025-08-01T21:00:00Z&to=2025-08-01T21:00:00Z&startTimeLocal=2025-08-02%2000:00:00&endTimeLocal=2025-08-02%2000:00:00&fromLocal=2025-08-02%2000:00:00&toLocal=2025-08-02%2000:00:00 - null null
[2025-08-02 16:07:59 INF] Executing endpoint 'TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi)'
[2025-08-02 16:07:59 INF] Route matched with {action = "GetAvailability", controller = "RezdyConnect"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAvailability(System.String, System.String, System.String, System.DateTime, System.DateTime, System.String, System.String) on controller TourManagementApi.Controllers.Api.RezdyConnectController (TourManagementApi).
[2025-08-02 16:07:59 INF] Executing action method TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi) - Validation state: "Valid"
[2025-08-02 16:08:27 INF] Executed DbCommand (51ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ActivityId], [a].[AvailableCapacity], [a].[Date], [a].[MaximumCapacity], [a].[OptionId], [a].[PartnerSupplierId], [a].[StartTime], [o].[Id], [o].[ActivityId], [o].[CanBeBookedAfterStartTime], [o].[CutOff], [o].[Duration], [o].[EndTime], [o].[FromDate], [o].[Name], [o].[StartTime], [o].[UntilDate], [o].[Weekdays], [t].[Id], [t].[Amount], [t].[Currency], [t].[MaxAge], [t].[MaxSeats], [t].[MinAge], [t].[MinSeats], [t].[Name], [t].[OptionId], [t].[PriceType], [t].[Type]
FROM [Availabilities] AS [a]
INNER JOIN [Options] AS [o] ON [a].[OptionId] = [o].[Id]
LEFT JOIN [TicketCategories] AS [t] ON [o].[Id] = [t].[OptionId]
ORDER BY [a].[Id], [o].[Id]
[2025-08-02 16:08:55 INF] Executed action method TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 55643.8418ms.
[2025-08-02 16:08:55 INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`2[[<>f__AnonymousType1`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], TourManagementApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[TourManagementApi.Models.Api.RezdyConnectModels.AvailabilitySessionResponse, TourManagementApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-08-02 16:08:55 INF] Executed action TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi) in 55664.0196ms
[2025-08-02 16:08:55 INF] Executed endpoint 'TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi)'
[2025-08-02 16:08:55 INF] Request finished HTTP/1.1 GET http://localhost:5050/api/rezdyconnect/availability?apiKey=6f686c1986af4830aefb398dc2525bc6&productCode=PHN0ZK&externalProductCode=42&startTime=2025-08-01T21:00:00Z&endTime=2025-08-01T21:00:00Z&from=2025-08-01T21:00:00Z&to=2025-08-01T21:00:00Z&startTimeLocal=2025-08-02%2000:00:00&endTimeLocal=2025-08-02%2000:00:00&fromLocal=2025-08-02%2000:00:00&toLocal=2025-08-02%2000:00:00 - 200 null application/json; charset=utf-8 55705.1318ms
[2025-08-02 16:09:30 INF] Request starting HTTP/1.1 GET http://localhost:5050/api/rezdyconnect/availability?apiKey=6f686c1986af4830aefb398dc2525bc6&productCode=PHN0ZK&externalProductCode=42&startTime=2025-08-03T21:00:00Z&endTime=2025-08-03T21:00:00Z&from=2025-08-03T21:00:00Z&to=2025-08-03T21:00:00Z&startTimeLocal=2025-08-03%2000:00:00&endTimeLocal=2025-08-03%2000:00:00&fromLocal=2025-08-03%2000:00:00&toLocal=2025-08-03%2000:00:00 - null null
[2025-08-02 16:09:30 INF] Executing endpoint 'TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi)'
[2025-08-02 16:09:30 INF] Route matched with {action = "GetAvailability", controller = "RezdyConnect"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAvailability(System.String, System.String, System.String, System.DateTime, System.DateTime, System.String, System.String) on controller TourManagementApi.Controllers.Api.RezdyConnectController (TourManagementApi).
[2025-08-02 16:09:31 INF] Executing action method TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi) - Validation state: "Valid"
[2025-08-02 16:10:04 INF] Executed DbCommand (25ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ActivityId], [a].[AvailableCapacity], [a].[Date], [a].[MaximumCapacity], [a].[OptionId], [a].[PartnerSupplierId], [a].[StartTime], [o].[Id], [o].[ActivityId], [o].[CanBeBookedAfterStartTime], [o].[CutOff], [o].[Duration], [o].[EndTime], [o].[FromDate], [o].[Name], [o].[StartTime], [o].[UntilDate], [o].[Weekdays], [t].[Id], [t].[Amount], [t].[Currency], [t].[MaxAge], [t].[MaxSeats], [t].[MinAge], [t].[MinSeats], [t].[Name], [t].[OptionId], [t].[PriceType], [t].[Type]
FROM [Availabilities] AS [a]
INNER JOIN [Options] AS [o] ON [a].[OptionId] = [o].[Id]
LEFT JOIN [TicketCategories] AS [t] ON [o].[Id] = [t].[OptionId]
ORDER BY [a].[Id], [o].[Id]
[2025-08-02 16:11:15 INF] Executed action method TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 104342.5027ms.
[2025-08-02 16:11:15 INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`2[[<>f__AnonymousType1`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], TourManagementApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[TourManagementApi.Models.Api.RezdyConnectModels.AvailabilitySessionResponse, TourManagementApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-08-02 16:11:15 INF] Executed action TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi) in 104395.4905ms
[2025-08-02 16:11:15 INF] Executed endpoint 'TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi)'
[2025-08-02 16:11:15 INF] Request finished HTTP/1.1 GET http://localhost:5050/api/rezdyconnect/availability?apiKey=6f686c1986af4830aefb398dc2525bc6&productCode=PHN0ZK&externalProductCode=42&startTime=2025-08-03T21:00:00Z&endTime=2025-08-03T21:00:00Z&from=2025-08-03T21:00:00Z&to=2025-08-03T21:00:00Z&startTimeLocal=2025-08-03%2000:00:00&endTimeLocal=2025-08-03%2000:00:00&fromLocal=2025-08-03%2000:00:00&toLocal=2025-08-03%2000:00:00 - 200 null application/json; charset=utf-8 104438.6575ms
[2025-08-02 16:13:03 INF] Request starting HTTP/1.1 GET http://localhost:5050/api/rezdyconnect/availability?apiKey=6f686c1986af4830aefb398dc2525bc6&productCode=PHN0ZK&externalProductCode=42&startTime=2025-08-02T21:00:00Z&endTime=2025-08-03T21:00:00Z&from=2025-08-02T21:00:00Z&to=2025-08-03T21:00:00Z&startTimeLocal=2025-08-02%2000:00:00&endTimeLocal=2025-08-03%2000:00:00&fromLocal=2025-08-02%2000:00:00&toLocal=2025-08-02%2000:00:00 - null null
[2025-08-02 16:13:03 INF] Executing endpoint 'TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi)'
[2025-08-02 16:13:03 INF] Route matched with {action = "GetAvailability", controller = "RezdyConnect"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAvailability(System.String, System.String, System.String, System.DateTime, System.DateTime, System.String, System.String) on controller TourManagementApi.Controllers.Api.RezdyConnectController (TourManagementApi).
[2025-08-02 16:13:03 INF] Executing action method TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi) - Validation state: "Valid"
[2025-08-02 16:13:05 INF] Executed DbCommand (25ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ActivityId], [a].[AvailableCapacity], [a].[Date], [a].[MaximumCapacity], [a].[OptionId], [a].[PartnerSupplierId], [a].[StartTime], [o].[Id], [o].[ActivityId], [o].[CanBeBookedAfterStartTime], [o].[CutOff], [o].[Duration], [o].[EndTime], [o].[FromDate], [o].[Name], [o].[StartTime], [o].[UntilDate], [o].[Weekdays], [t].[Id], [t].[Amount], [t].[Currency], [t].[MaxAge], [t].[MaxSeats], [t].[MinAge], [t].[MinSeats], [t].[Name], [t].[OptionId], [t].[PriceType], [t].[Type]
FROM [Availabilities] AS [a]
INNER JOIN [Options] AS [o] ON [a].[OptionId] = [o].[Id]
LEFT JOIN [TicketCategories] AS [t] ON [o].[Id] = [t].[OptionId]
ORDER BY [a].[Id], [o].[Id]
[2025-08-02 16:13:05 INF] Executed action method TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 2459.4394ms.
[2025-08-02 16:13:05 INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`2[[<>f__AnonymousType1`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], TourManagementApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[TourManagementApi.Models.Api.RezdyConnectModels.AvailabilitySessionResponse, TourManagementApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-08-02 16:13:05 INF] Executed action TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi) in 2476.6227ms
[2025-08-02 16:13:05 INF] Executed endpoint 'TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi)'
[2025-08-02 16:13:05 INF] Request finished HTTP/1.1 GET http://localhost:5050/api/rezdyconnect/availability?apiKey=6f686c1986af4830aefb398dc2525bc6&productCode=PHN0ZK&externalProductCode=42&startTime=2025-08-02T21:00:00Z&endTime=2025-08-03T21:00:00Z&from=2025-08-02T21:00:00Z&to=2025-08-03T21:00:00Z&startTimeLocal=2025-08-02%2000:00:00&endTimeLocal=2025-08-03%2000:00:00&fromLocal=2025-08-02%2000:00:00&toLocal=2025-08-02%2000:00:00 - 200 null application/json; charset=utf-8 2515.8629ms
[2025-08-02 16:13:45 INF] Request starting HTTP/1.1 GET http://localhost:5050/api/rezdyconnect/availability?apiKey=6f686c1986af4830aefb398dc2525bc6&productCode=PHN0ZK&externalProductCode=42&startTime=2025-08-01T21:00:00Z&endTime=2025-08-01T21:00:00Z&from=2025-08-01T21:00:00Z&to=2025-08-01T21:00:00Z&startTimeLocal=2025-08-02%2000:00:00&endTimeLocal=2025-08-02%2000:00:00&fromLocal=2025-08-02%2000:00:00&toLocal=2025-08-02%2000:00:00 - null null
[2025-08-02 16:13:45 INF] Executing endpoint 'TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi)'
[2025-08-02 16:13:45 INF] Route matched with {action = "GetAvailability", controller = "RezdyConnect"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAvailability(System.String, System.String, System.String, System.DateTime, System.DateTime, System.String, System.String) on controller TourManagementApi.Controllers.Api.RezdyConnectController (TourManagementApi).
[2025-08-02 16:13:45 INF] Executing action method TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi) - Validation state: "Valid"
[2025-08-02 16:13:50 INF] Executed DbCommand (25ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ActivityId], [a].[AvailableCapacity], [a].[Date], [a].[MaximumCapacity], [a].[OptionId], [a].[PartnerSupplierId], [a].[StartTime], [o].[Id], [o].[ActivityId], [o].[CanBeBookedAfterStartTime], [o].[CutOff], [o].[Duration], [o].[EndTime], [o].[FromDate], [o].[Name], [o].[StartTime], [o].[UntilDate], [o].[Weekdays], [t].[Id], [t].[Amount], [t].[Currency], [t].[MaxAge], [t].[MaxSeats], [t].[MinAge], [t].[MinSeats], [t].[Name], [t].[OptionId], [t].[PriceType], [t].[Type]
FROM [Availabilities] AS [a]
INNER JOIN [Options] AS [o] ON [a].[OptionId] = [o].[Id]
LEFT JOIN [TicketCategories] AS [t] ON [o].[Id] = [t].[OptionId]
ORDER BY [a].[Id], [o].[Id]
[2025-08-02 16:13:50 INF] Executed action method TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 4988.1924ms.
[2025-08-02 16:13:50 INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`2[[<>f__AnonymousType1`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], TourManagementApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[TourManagementApi.Models.Api.RezdyConnectModels.AvailabilitySessionResponse, TourManagementApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-08-02 16:13:50 INF] Executed action TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi) in 5002.2079ms
[2025-08-02 16:13:50 INF] Executed endpoint 'TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi)'
[2025-08-02 16:13:50 INF] Request finished HTTP/1.1 GET http://localhost:5050/api/rezdyconnect/availability?apiKey=6f686c1986af4830aefb398dc2525bc6&productCode=PHN0ZK&externalProductCode=42&startTime=2025-08-01T21:00:00Z&endTime=2025-08-01T21:00:00Z&from=2025-08-01T21:00:00Z&to=2025-08-01T21:00:00Z&startTimeLocal=2025-08-02%2000:00:00&endTimeLocal=2025-08-02%2000:00:00&fromLocal=2025-08-02%2000:00:00&toLocal=2025-08-02%2000:00:00 - 200 null application/json; charset=utf-8 5029.2515ms
[2025-08-02 16:14:18 INF] Request starting HTTP/1.1 GET http://localhost:5050/api/rezdyconnect/availability?apiKey=6f686c1986af4830aefb398dc2525bc6&productCode=PHN0ZK&externalProductCode=42&startTime=2025-08-01T21:00:00Z&endTime=2025-08-01T21:00:00Z&from=2025-08-01T21:00:00Z&to=2025-08-01T21:00:00Z&startTimeLocal=2025-08-02%2000:00:00&endTimeLocal=2025-08-02%2000:00:00&fromLocal=2025-08-02%2000:00:00&toLocal=2025-08-02%2000:00:00 - null null
[2025-08-02 16:14:18 INF] Executing endpoint 'TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi)'
[2025-08-02 16:14:18 INF] Route matched with {action = "GetAvailability", controller = "RezdyConnect"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAvailability(System.String, System.String, System.String, System.DateTime, System.DateTime, System.String, System.String) on controller TourManagementApi.Controllers.Api.RezdyConnectController (TourManagementApi).
[2025-08-02 16:14:18 INF] Executing action method TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi) - Validation state: "Valid"
[2025-08-02 16:14:42 INF] Executed DbCommand (25ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ActivityId], [a].[AvailableCapacity], [a].[Date], [a].[MaximumCapacity], [a].[OptionId], [a].[PartnerSupplierId], [a].[StartTime], [o].[Id], [o].[ActivityId], [o].[CanBeBookedAfterStartTime], [o].[CutOff], [o].[Duration], [o].[EndTime], [o].[FromDate], [o].[Name], [o].[StartTime], [o].[UntilDate], [o].[Weekdays], [t].[Id], [t].[Amount], [t].[Currency], [t].[MaxAge], [t].[MaxSeats], [t].[MinAge], [t].[MinSeats], [t].[Name], [t].[OptionId], [t].[PriceType], [t].[Type]
FROM [Availabilities] AS [a]
INNER JOIN [Options] AS [o] ON [a].[OptionId] = [o].[Id]
LEFT JOIN [TicketCategories] AS [t] ON [o].[Id] = [t].[OptionId]
ORDER BY [a].[Id], [o].[Id]
[2025-08-02 16:14:42 INF] Executed action method TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 24882.3565ms.
[2025-08-02 16:14:42 INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`2[[<>f__AnonymousType1`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], TourManagementApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[TourManagementApi.Models.Api.RezdyConnectModels.AvailabilitySessionResponse, TourManagementApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-08-02 16:14:42 INF] Executed action TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi) in 24893.6622ms
[2025-08-02 16:14:42 INF] Executed endpoint 'TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi)'
[2025-08-02 16:14:42 INF] Request finished HTTP/1.1 GET http://localhost:5050/api/rezdyconnect/availability?apiKey=6f686c1986af4830aefb398dc2525bc6&productCode=PHN0ZK&externalProductCode=42&startTime=2025-08-01T21:00:00Z&endTime=2025-08-01T21:00:00Z&from=2025-08-01T21:00:00Z&to=2025-08-01T21:00:00Z&startTimeLocal=2025-08-02%2000:00:00&endTimeLocal=2025-08-02%2000:00:00&fromLocal=2025-08-02%2000:00:00&toLocal=2025-08-02%2000:00:00 - 200 null application/json; charset=utf-8 24915.537ms
[2025-08-02 16:15:17 INF] Request starting HTTP/1.1 GET http://localhost:5050/api/rezdyconnect/availability?apiKey=6f686c1986af4830aefb398dc2525bc6&productCode=PHN0ZK&externalProductCode=42&startTime=2025-08-04T21:00:00Z&endTime=2025-08-04T21:00:00Z&from=2025-08-04T21:00:00Z&to=2025-08-04T21:00:00Z&startTimeLocal=2025-08-05%2000:00:00&endTimeLocal=2025-08-05%2000:00:00&fromLocal=2025-08-05%2000:00:00&toLocal=2025-08-05%2000:00:00 - null null
[2025-08-02 16:15:17 INF] Executing endpoint 'TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi)'
[2025-08-02 16:15:17 INF] Route matched with {action = "GetAvailability", controller = "RezdyConnect"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAvailability(System.String, System.String, System.String, System.DateTime, System.DateTime, System.String, System.String) on controller TourManagementApi.Controllers.Api.RezdyConnectController (TourManagementApi).
[2025-08-02 16:15:17 INF] Executing action method TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi) - Validation state: "Valid"
[2025-08-02 16:15:24 INF] Executed DbCommand (25ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ActivityId], [a].[AvailableCapacity], [a].[Date], [a].[MaximumCapacity], [a].[OptionId], [a].[PartnerSupplierId], [a].[StartTime], [o].[Id], [o].[ActivityId], [o].[CanBeBookedAfterStartTime], [o].[CutOff], [o].[Duration], [o].[EndTime], [o].[FromDate], [o].[Name], [o].[StartTime], [o].[UntilDate], [o].[Weekdays], [t].[Id], [t].[Amount], [t].[Currency], [t].[MaxAge], [t].[MaxSeats], [t].[MinAge], [t].[MinSeats], [t].[Name], [t].[OptionId], [t].[PriceType], [t].[Type]
FROM [Availabilities] AS [a]
INNER JOIN [Options] AS [o] ON [a].[OptionId] = [o].[Id]
LEFT JOIN [TicketCategories] AS [t] ON [o].[Id] = [t].[OptionId]
ORDER BY [a].[Id], [o].[Id]
[2025-08-02 16:15:24 INF] Executed action method TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 6474.932ms.
[2025-08-02 16:15:24 INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`2[[<>f__AnonymousType1`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], TourManagementApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[TourManagementApi.Models.Api.RezdyConnectModels.AvailabilitySessionResponse, TourManagementApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-08-02 16:15:24 INF] Executed action TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi) in 6500.1915ms
[2025-08-02 16:15:24 INF] Executed endpoint 'TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi)'
[2025-08-02 16:15:24 INF] Request finished HTTP/1.1 GET http://localhost:5050/api/rezdyconnect/availability?apiKey=6f686c1986af4830aefb398dc2525bc6&productCode=PHN0ZK&externalProductCode=42&startTime=2025-08-04T21:00:00Z&endTime=2025-08-04T21:00:00Z&from=2025-08-04T21:00:00Z&to=2025-08-04T21:00:00Z&startTimeLocal=2025-08-05%2000:00:00&endTimeLocal=2025-08-05%2000:00:00&fromLocal=2025-08-05%2000:00:00&toLocal=2025-08-05%2000:00:00 - 200 null application/json; charset=utf-8 6528.4162ms
[2025-08-02 16:22:15 INF] Request starting HTTP/1.1 GET http://localhost:5050/api/rezdyconnect/availability?apiKey=6f686c1986af4830aefb398dc2525bc6&productCode=PHN0ZK&externalProductCode=42&startTime=2025-08-04T21:00:00Z&endTime=2025-08-04T21:00:00Z&from=2025-08-04T21:00:00Z&to=2025-08-04T21:00:00Z&startTimeLocal=2025-08-05%2000:00:00&endTimeLocal=2025-08-05%2000:00:00&fromLocal=2025-08-05%2000:00:00&toLocal=2025-08-05%2000:00:00 - null null
[2025-08-02 16:22:15 INF] Executing endpoint 'TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi)'
[2025-08-02 16:22:15 INF] Route matched with {action = "GetAvailability", controller = "RezdyConnect"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAvailability(System.String, System.String, System.String, System.DateTime, System.DateTime, System.String, System.String) on controller TourManagementApi.Controllers.Api.RezdyConnectController (TourManagementApi).
[2025-08-02 16:22:15 INF] Executing action method TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi) - Validation state: "Valid"
[2025-08-02 16:22:18 INF] Executed DbCommand (30ms) [Parameters=[@__activityId_0='42', @__fromDateOnly_1='08/04/2025' (DbType = Date), @__toDateOnly_2='08/04/2025' (DbType = Date)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ActivityId], [a].[AvailableCapacity], [a].[Date], [a].[MaximumCapacity], [a].[OptionId], [a].[PartnerSupplierId], [a].[StartTime], [o].[Id], [o].[ActivityId], [o].[CanBeBookedAfterStartTime], [o].[CutOff], [o].[Duration], [o].[EndTime], [o].[FromDate], [o].[Name], [o].[StartTime], [o].[UntilDate], [o].[Weekdays], [t].[Id], [t].[Amount], [t].[Currency], [t].[MaxAge], [t].[MaxSeats], [t].[MinAge], [t].[MinSeats], [t].[Name], [t].[OptionId], [t].[PriceType], [t].[Type]
FROM [Availabilities] AS [a]
INNER JOIN [Options] AS [o] ON [a].[OptionId] = [o].[Id]
LEFT JOIN [TicketCategories] AS [t] ON [o].[Id] = [t].[OptionId]
WHERE [a].[ActivityId] = @__activityId_0 AND [a].[Date] >= @__fromDateOnly_1 AND [a].[Date] <= @__toDateOnly_2
ORDER BY [a].[Id], [o].[Id]
[2025-08-02 16:22:18 INF] Executed action method TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 2118.137ms.
[2025-08-02 16:22:18 INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`2[[<>f__AnonymousType1`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], TourManagementApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[TourManagementApi.Models.Api.RezdyConnectModels.AvailabilitySessionResponse, TourManagementApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-08-02 16:22:18 INF] Executed action TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi) in 2127.6827ms
[2025-08-02 16:22:18 INF] Executed endpoint 'TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi)'
[2025-08-02 16:22:18 INF] Request finished HTTP/1.1 GET http://localhost:5050/api/rezdyconnect/availability?apiKey=6f686c1986af4830aefb398dc2525bc6&productCode=PHN0ZK&externalProductCode=42&startTime=2025-08-04T21:00:00Z&endTime=2025-08-04T21:00:00Z&from=2025-08-04T21:00:00Z&to=2025-08-04T21:00:00Z&startTimeLocal=2025-08-05%2000:00:00&endTimeLocal=2025-08-05%2000:00:00&fromLocal=2025-08-05%2000:00:00&toLocal=2025-08-05%2000:00:00 - 200 null application/json; charset=utf-8 2195.5859ms
[2025-08-02 16:23:42 INF] Request starting HTTP/1.1 GET http://localhost:5050/api/rezdyconnect/availability?apiKey=6f686c1986af4830aefb398dc2525bc6&productCode=PHN0ZK&externalProductCode=42&startTime=2025-08-04T21:00:00Z&endTime=2025-08-04T21:00:00Z&from=2025-08-04T21:00:00Z&to=2025-08-04T21:00:00Z&startTimeLocal=2025-08-05%2000:00:00&endTimeLocal=2025-08-05%2000:00:00&fromLocal=2025-08-05%2000:00:00&toLocal=2025-08-05%2000:00:00 - null null
[2025-08-02 16:23:42 INF] Executing endpoint 'TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi)'
[2025-08-02 16:23:42 INF] Route matched with {action = "GetAvailability", controller = "RezdyConnect"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAvailability(System.String, System.String, System.String, System.DateTime, System.DateTime, System.String, System.String) on controller TourManagementApi.Controllers.Api.RezdyConnectController (TourManagementApi).
[2025-08-02 16:23:42 INF] Executing action method TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi) - Validation state: "Valid"
[2025-08-02 16:23:46 INF] Executed DbCommand (26ms) [Parameters=[@__activityId_0='42', @__fromDateOnly_1='08/04/2025' (DbType = Date), @__toDateOnly_2='08/04/2025' (DbType = Date)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ActivityId], [a].[AvailableCapacity], [a].[Date], [a].[MaximumCapacity], [a].[OptionId], [a].[PartnerSupplierId], [a].[StartTime], [o].[Id], [o].[ActivityId], [o].[CanBeBookedAfterStartTime], [o].[CutOff], [o].[Duration], [o].[EndTime], [o].[FromDate], [o].[Name], [o].[StartTime], [o].[UntilDate], [o].[Weekdays], [t].[Id], [t].[Amount], [t].[Currency], [t].[MaxAge], [t].[MaxSeats], [t].[MinAge], [t].[MinSeats], [t].[Name], [t].[OptionId], [t].[PriceType], [t].[Type]
FROM [Availabilities] AS [a]
INNER JOIN [Options] AS [o] ON [a].[OptionId] = [o].[Id]
LEFT JOIN [TicketCategories] AS [t] ON [o].[Id] = [t].[OptionId]
WHERE [a].[ActivityId] = @__activityId_0 AND [a].[Date] >= @__fromDateOnly_1 AND [a].[Date] <= @__toDateOnly_2
ORDER BY [a].[Id], [o].[Id]
[2025-08-02 16:23:46 INF] Executed action method TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 3681.8993ms.
[2025-08-02 16:23:46 INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`2[[<>f__AnonymousType1`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], TourManagementApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[TourManagementApi.Models.Api.RezdyConnectModels.AvailabilitySessionResponse, TourManagementApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-08-02 16:23:46 INF] Executed action TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi) in 3693.163ms
[2025-08-02 16:23:46 INF] Executed endpoint 'TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi)'
[2025-08-02 16:23:46 INF] Request finished HTTP/1.1 GET http://localhost:5050/api/rezdyconnect/availability?apiKey=6f686c1986af4830aefb398dc2525bc6&productCode=PHN0ZK&externalProductCode=42&startTime=2025-08-04T21:00:00Z&endTime=2025-08-04T21:00:00Z&from=2025-08-04T21:00:00Z&to=2025-08-04T21:00:00Z&startTimeLocal=2025-08-05%2000:00:00&endTimeLocal=2025-08-05%2000:00:00&fromLocal=2025-08-05%2000:00:00&toLocal=2025-08-05%2000:00:00 - 200 null application/json; charset=utf-8 3719.6651ms
[2025-08-02 16:26:46 INF] Request starting HTTP/1.1 GET http://localhost:5050/api/rezdyconnect/availability?apiKey=6f686c1986af4830aefb398dc2525bc6&productCode=PHN0ZK&externalProductCode=42&startTime=2025-08-04T21:00:00Z&endTime=2025-08-04T21:00:00Z&from=2025-08-04T21:00:00Z&to=2025-08-04T21:00:00Z&startTimeLocal=2025-08-05%2000:00:00&endTimeLocal=2025-08-05%2000:00:00&fromLocal=2025-08-05%2000:00:00&toLocal=2025-08-05%2000:00:00 - null null
[2025-08-02 16:26:47 INF] Executing endpoint 'TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi)'
[2025-08-02 16:26:47 INF] Route matched with {action = "GetAvailability", controller = "RezdyConnect"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAvailability(System.String, System.String, System.String, System.DateTime, System.DateTime, System.String, System.String) on controller TourManagementApi.Controllers.Api.RezdyConnectController (TourManagementApi).
[2025-08-02 16:26:47 INF] Executing action method TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi) - Validation state: "Valid"
[2025-08-02 16:26:49 INF] Executed DbCommand (26ms) [Parameters=[@__activityId_0='42', @__fromDateOnly_1='08/04/2025' (DbType = Date), @__toDateOnly_2='08/04/2025' (DbType = Date)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ActivityId], [a].[AvailableCapacity], [a].[Date], [a].[MaximumCapacity], [a].[OptionId], [a].[PartnerSupplierId], [a].[StartTime], [o].[Id], [o].[ActivityId], [o].[CanBeBookedAfterStartTime], [o].[CutOff], [o].[Duration], [o].[EndTime], [o].[FromDate], [o].[Name], [o].[StartTime], [o].[UntilDate], [o].[Weekdays], [t].[Id], [t].[Amount], [t].[Currency], [t].[MaxAge], [t].[MaxSeats], [t].[MinAge], [t].[MinSeats], [t].[Name], [t].[OptionId], [t].[PriceType], [t].[Type]
FROM [Availabilities] AS [a]
INNER JOIN [Options] AS [o] ON [a].[OptionId] = [o].[Id]
LEFT JOIN [TicketCategories] AS [t] ON [o].[Id] = [t].[OptionId]
WHERE [a].[ActivityId] = @__activityId_0 AND [a].[Date] >= @__fromDateOnly_1 AND [a].[Date] <= @__toDateOnly_2
ORDER BY [a].[Id], [o].[Id]
[2025-08-02 16:26:49 INF] Executed action method TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1941.4919ms.
[2025-08-02 16:26:49 INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`2[[<>f__AnonymousType1`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], TourManagementApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[TourManagementApi.Models.Api.RezdyConnectModels.AvailabilitySessionResponse, TourManagementApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-08-02 16:26:49 INF] Executed action TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi) in 2005.0203ms
[2025-08-02 16:26:49 INF] Executed endpoint 'TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi)'
[2025-08-02 16:26:49 INF] Request finished HTTP/1.1 GET http://localhost:5050/api/rezdyconnect/availability?apiKey=6f686c1986af4830aefb398dc2525bc6&productCode=PHN0ZK&externalProductCode=42&startTime=2025-08-04T21:00:00Z&endTime=2025-08-04T21:00:00Z&from=2025-08-04T21:00:00Z&to=2025-08-04T21:00:00Z&startTimeLocal=2025-08-05%2000:00:00&endTimeLocal=2025-08-05%2000:00:00&fromLocal=2025-08-05%2000:00:00&toLocal=2025-08-05%2000:00:00 - 200 null application/json; charset=utf-8 2066.5554ms
[2025-08-02 16:32:08 INF] Request starting HTTP/1.1 GET http://localhost:5050/api/rezdyconnect/availability?apiKey=6f686c1986af4830aefb398dc2525bc6&productCode=PHN0ZK&externalProductCode=42&startTime=2025-08-04T21:00:00Z&endTime=2025-08-04T21:00:00Z&from=2025-08-04T21:00:00Z&to=2025-08-04T21:00:00Z&startTimeLocal=2025-08-05%2000:00:00&endTimeLocal=2025-08-05%2000:00:00&fromLocal=2025-08-05%2000:00:00&toLocal=2025-08-05%2000:00:00 - null null
[2025-08-02 16:32:08 INF] Executing endpoint 'TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi)'
[2025-08-02 16:32:08 INF] Route matched with {action = "GetAvailability", controller = "RezdyConnect"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAvailability(System.String, System.String, System.String, System.DateTime, System.DateTime, System.String, System.String) on controller TourManagementApi.Controllers.Api.RezdyConnectController (TourManagementApi).
[2025-08-02 16:32:08 INF] Executing action method TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi) - Validation state: "Valid"
[2025-08-02 16:32:08 INF] Executed DbCommand (49ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ActivityId], [a].[AvailableCapacity], [a].[Date], [a].[MaximumCapacity], [a].[OptionId], [a].[PartnerSupplierId], [a].[StartTime], [o].[Id], [o].[ActivityId], [o].[CanBeBookedAfterStartTime], [o].[CutOff], [o].[Duration], [o].[EndTime], [o].[FromDate], [o].[Name], [o].[StartTime], [o].[UntilDate], [o].[Weekdays], [t].[Id], [t].[Amount], [t].[Currency], [t].[MaxAge], [t].[MaxSeats], [t].[MinAge], [t].[MinSeats], [t].[Name], [t].[OptionId], [t].[PriceType], [t].[Type]
FROM [Availabilities] AS [a]
INNER JOIN [Options] AS [o] ON [a].[OptionId] = [o].[Id]
LEFT JOIN [TicketCategories] AS [t] ON [o].[Id] = [t].[OptionId]
ORDER BY [a].[Id], [o].[Id]
[2025-08-02 16:32:09 INF] Executed action method TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 536.7443ms.
[2025-08-02 16:32:09 INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`2[[<>f__AnonymousType1`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], TourManagementApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[TourManagementApi.Models.Api.RezdyConnectModels.AvailabilitySessionResponse, TourManagementApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-08-02 16:32:09 INF] Executed action TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi) in 547.4836ms
[2025-08-02 16:32:09 INF] Executed endpoint 'TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi)'
[2025-08-02 16:32:09 INF] Request finished HTTP/1.1 GET http://localhost:5050/api/rezdyconnect/availability?apiKey=6f686c1986af4830aefb398dc2525bc6&productCode=PHN0ZK&externalProductCode=42&startTime=2025-08-04T21:00:00Z&endTime=2025-08-04T21:00:00Z&from=2025-08-04T21:00:00Z&to=2025-08-04T21:00:00Z&startTimeLocal=2025-08-05%2000:00:00&endTimeLocal=2025-08-05%2000:00:00&fromLocal=2025-08-05%2000:00:00&toLocal=2025-08-05%2000:00:00 - 200 null application/json; charset=utf-8 587.0103ms
[2025-08-02 16:32:55 INF] Request starting HTTP/1.1 GET http://localhost:5050/api/rezdyconnect/availability?apiKey=6f686c1986af4830aefb398dc2525bc6&productCode=PHN0ZK&externalProductCode=42&startTime=2025-08-04T21:00:00Z&endTime=2025-08-06T21:00:00Z&from=2025-08-04T21:00:00Z&to=2025-08-06T21:00:00Z&startTimeLocal=2025-08-05%2000:00:00&endTimeLocal=2025-08-07%2000:00:00&fromLocal=2025-08-05%2000:00:00&toLocal=2025-08-07%2000:00:00 - null null
[2025-08-02 16:32:55 INF] Executing endpoint 'TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi)'
[2025-08-02 16:32:55 INF] Route matched with {action = "GetAvailability", controller = "RezdyConnect"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAvailability(System.String, System.String, System.String, System.DateTime, System.DateTime, System.String, System.String) on controller TourManagementApi.Controllers.Api.RezdyConnectController (TourManagementApi).
[2025-08-02 16:32:55 INF] Executing action method TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi) - Validation state: "Valid"
[2025-08-02 16:32:55 INF] Executed DbCommand (27ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ActivityId], [a].[AvailableCapacity], [a].[Date], [a].[MaximumCapacity], [a].[OptionId], [a].[PartnerSupplierId], [a].[StartTime], [o].[Id], [o].[ActivityId], [o].[CanBeBookedAfterStartTime], [o].[CutOff], [o].[Duration], [o].[EndTime], [o].[FromDate], [o].[Name], [o].[StartTime], [o].[UntilDate], [o].[Weekdays], [t].[Id], [t].[Amount], [t].[Currency], [t].[MaxAge], [t].[MaxSeats], [t].[MinAge], [t].[MinSeats], [t].[Name], [t].[OptionId], [t].[PriceType], [t].[Type]
FROM [Availabilities] AS [a]
INNER JOIN [Options] AS [o] ON [a].[OptionId] = [o].[Id]
LEFT JOIN [TicketCategories] AS [t] ON [o].[Id] = [t].[OptionId]
ORDER BY [a].[Id], [o].[Id]
[2025-08-02 16:32:55 INF] Executed action method TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 383.1217ms.
[2025-08-02 16:32:55 INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`2[[<>f__AnonymousType1`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], TourManagementApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[TourManagementApi.Models.Api.RezdyConnectModels.AvailabilitySessionResponse, TourManagementApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-08-02 16:32:55 INF] Executed action TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi) in 402.1708ms
[2025-08-02 16:32:55 INF] Executed endpoint 'TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi)'
[2025-08-02 16:32:55 INF] Request finished HTTP/1.1 GET http://localhost:5050/api/rezdyconnect/availability?apiKey=6f686c1986af4830aefb398dc2525bc6&productCode=PHN0ZK&externalProductCode=42&startTime=2025-08-04T21:00:00Z&endTime=2025-08-06T21:00:00Z&from=2025-08-04T21:00:00Z&to=2025-08-06T21:00:00Z&startTimeLocal=2025-08-05%2000:00:00&endTimeLocal=2025-08-07%2000:00:00&fromLocal=2025-08-05%2000:00:00&toLocal=2025-08-07%2000:00:00 - 200 null application/json; charset=utf-8 450.0417ms
[2025-08-02 16:53:34 INF] Request starting HTTP/1.1 GET http://localhost:5050/ - null null
[2025-08-02 16:53:34 INF] Executing endpoint 'TourManagementApi.Controllers.ActivitiesWizardController.Index (TourManagementApi)'
[2025-08-02 16:53:34 INF] Route matched with {action = "Index", controller = "ActivitiesWizard"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Index(System.String) on controller TourManagementApi.Controllers.ActivitiesWizardController (TourManagementApi).
[2025-08-02 16:53:34 INF] Executing action method TourManagementApi.Controllers.ActivitiesWizardController.Index (TourManagementApi) - Validation state: "Invalid"
[2025-08-02 16:53:34 INF] Accessing expired session, Key:9197a2e7-8108-f16f-1ec9-56dc9812da82
[2025-08-02 16:53:34 INF] Executed DbCommand (77ms) [Parameters=[@__Id_0='96d2940f09674b0f81d86bc821c69ff6' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[Title], [a].[Description], [a].[Category], [t].[CompanyName], [a].[Label], [a].[Status], [t].[Id], [o].[Id], [o].[ActivityId], [o].[CanBeBookedAfterStartTime], [o].[CutOff], [o].[Duration], [o].[EndTime], [o].[FromDate], [o].[Name], [o].[StartTime], [o].[UntilDate], [o].[Weekdays], [a].[CountryCode], [a].[DestinationCode], [a].[DestinationName], [a].[CreatedAt], [a].[UpdatedAt], [a].[Rating], [a].[IsFreeCancellation], (
    SELECT COUNT(*)
    FROM [Reservations] AS [r]
    WHERE [a].[Id] = [r].[ActivityId]), (
    SELECT COUNT(*)
    FROM [Availabilities] AS [a0]
    WHERE [a].[Id] = [a0].[ActivityId])
FROM [Activities] AS [a]
LEFT JOIN [TourCompanies] AS [t] ON [a].[TourCompanyId] = [t].[Id]
LEFT JOIN [Options] AS [o] ON [a].[Id] = [o].[ActivityId]
WHERE [a].[B2BAgencyId] = @__Id_0
ORDER BY [a].[Id], [t].[Id]
[2025-08-02 16:53:34 INF] Executed action method TourManagementApi.Controllers.ActivitiesWizardController.Index (TourManagementApi), returned result Microsoft.AspNetCore.Mvc.ViewResult in 313.4845ms.
[2025-08-02 16:53:36 INF] Executing ViewResult, running view Index.
[2025-08-02 16:53:36 INF] Executed ViewResult - view Index executed in 2163.2669ms.
[2025-08-02 16:53:36 INF] Executed action TourManagementApi.Controllers.ActivitiesWizardController.Index (TourManagementApi) in 2495.4659ms
[2025-08-02 16:53:36 INF] Executed endpoint 'TourManagementApi.Controllers.ActivitiesWizardController.Index (TourManagementApi)'
[2025-08-02 16:53:36 INF] Session started; Key:9197a2e7-8108-f16f-1ec9-56dc9812da82, Id:66877a6c-5dd0-5d1e-7eb4-30a2c5d19cad
[2025-08-02 16:53:36 INF] Request finished HTTP/1.1 GET http://localhost:5050/ - 200 null text/html; charset=utf-8 2546.2844ms
[2025-08-02 16:53:36 INF] Request starting HTTP/1.1 GET http://localhost:5050/lib/bootstrap/dist/css/bootstrap.min.css - null null
[2025-08-02 16:53:36 INF] Request starting HTTP/1.1 GET http://localhost:5050/css/site.css?v=SdYn8dEg3FtG-NKLajhreC6d5tFLAHhsSFTabA04Z-Q - null null
[2025-08-02 16:53:36 INF] Request starting HTTP/1.1 GET http://localhost:5050/lib/jquery/dist/jquery.min.js - null null
[2025-08-02 16:53:36 INF] Request starting HTTP/1.1 GET http://localhost:5050/lib/bootstrap/dist/js/bootstrap.bundle.min.js - null null
[2025-08-02 16:53:36 INF] Request starting HTTP/1.1 GET http://localhost:5050/js/site.js?v=qZeAq26xp7dsarNSRZDWTUJes-9D14egUbPPcChdFj4 - null null
[2025-08-02 16:53:36 INF] Request starting HTTP/1.1 GET http://localhost:5050/_framework/aspnetcore-browser-refresh.js - null null
[2025-08-02 16:53:36 INF] Request finished HTTP/1.1 GET http://localhost:5050/_framework/aspnetcore-browser-refresh.js - 200 13770 application/javascript; charset=utf-8 12.6966ms
[2025-08-02 16:53:36 INF] Sending file. Request path: '/css/site.css'. Physical path: 'D:\TFS\Lymranet\Tourism\B2B\HotelWidget\TourManagement\wwwroot\css\site.css'
[2025-08-02 16:53:36 INF] Sending file. Request path: '/js/site.js'. Physical path: 'D:\TFS\Lymranet\Tourism\B2B\HotelWidget\TourManagement\wwwroot\js\site.js'
[2025-08-02 16:53:36 INF] Request finished HTTP/1.1 GET http://localhost:5050/css/site.css?v=SdYn8dEg3FtG-NKLajhreC6d5tFLAHhsSFTabA04Z-Q - 200 859 text/css 41.3111ms
[2025-08-02 16:53:36 INF] Request finished HTTP/1.1 GET http://localhost:5050/js/site.js?v=qZeAq26xp7dsarNSRZDWTUJes-9D14egUbPPcChdFj4 - 200 397 text/javascript 27.8487ms
[2025-08-02 16:53:36 INF] Sending file. Request path: '/lib/bootstrap/dist/js/bootstrap.bundle.min.js'. Physical path: 'D:\TFS\Lymranet\Tourism\B2B\HotelWidget\TourManagement\wwwroot\lib\bootstrap\dist\js\bootstrap.bundle.min.js'
[2025-08-02 16:53:36 INF] Sending file. Request path: '/lib/jquery/dist/jquery.min.js'. Physical path: 'D:\TFS\Lymranet\Tourism\B2B\HotelWidget\TourManagement\wwwroot\lib\jquery\dist\jquery.min.js'
[2025-08-02 16:53:36 INF] Request finished HTTP/1.1 GET http://localhost:5050/lib/bootstrap/dist/js/bootstrap.bundle.min.js - 200 78135 text/javascript 55.1527ms
[2025-08-02 16:53:36 INF] Request finished HTTP/1.1 GET http://localhost:5050/lib/jquery/dist/jquery.min.js - 200 89503 text/javascript 56.0492ms
[2025-08-02 16:53:36 INF] Sending file. Request path: '/lib/bootstrap/dist/css/bootstrap.min.css'. Physical path: 'D:\TFS\Lymranet\Tourism\B2B\HotelWidget\TourManagement\wwwroot\lib\bootstrap\dist\css\bootstrap.min.css'
[2025-08-02 16:53:36 INF] Request finished HTTP/1.1 GET http://localhost:5050/lib/bootstrap/dist/css/bootstrap.min.css - 200 163879 text/css 60.6455ms
[2025-08-02 16:53:37 INF] Request starting HTTP/1.1 GET http://localhost:5050/_vs/browserLink - null null
[2025-08-02 16:53:37 INF] Request finished HTTP/1.1 GET http://localhost:5050/_vs/browserLink - 200 null text/javascript; charset=UTF-8 21.1216ms
[2025-08-02 16:55:47 INF] Request starting HTTP/1.1 GET http://localhost:5050/ - null null
[2025-08-02 16:55:47 INF] Executing endpoint 'TourManagementApi.Controllers.ActivitiesWizardController.Index (TourManagementApi)'
[2025-08-02 16:55:47 INF] Route matched with {action = "Index", controller = "ActivitiesWizard"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Index(System.String) on controller TourManagementApi.Controllers.ActivitiesWizardController (TourManagementApi).
[2025-08-02 16:55:47 INF] Executing action method TourManagementApi.Controllers.ActivitiesWizardController.Index (TourManagementApi) - Validation state: "Invalid"
[2025-08-02 16:55:47 INF] Executed DbCommand (26ms) [Parameters=[@__Id_0='96d2940f09674b0f81d86bc821c69ff6' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[Title], [a].[Description], [a].[Category], [t].[CompanyName], [a].[Label], [a].[Status], [t].[Id], [o].[Id], [o].[ActivityId], [o].[CanBeBookedAfterStartTime], [o].[CutOff], [o].[Duration], [o].[EndTime], [o].[FromDate], [o].[Name], [o].[StartTime], [o].[UntilDate], [o].[Weekdays], [a].[CountryCode], [a].[DestinationCode], [a].[DestinationName], [a].[CreatedAt], [a].[UpdatedAt], [a].[Rating], [a].[IsFreeCancellation], (
    SELECT COUNT(*)
    FROM [Reservations] AS [r]
    WHERE [a].[Id] = [r].[ActivityId]), (
    SELECT COUNT(*)
    FROM [Availabilities] AS [a0]
    WHERE [a].[Id] = [a0].[ActivityId])
FROM [Activities] AS [a]
LEFT JOIN [TourCompanies] AS [t] ON [a].[TourCompanyId] = [t].[Id]
LEFT JOIN [Options] AS [o] ON [a].[Id] = [o].[ActivityId]
WHERE [a].[B2BAgencyId] = @__Id_0
ORDER BY [a].[Id], [t].[Id]
[2025-08-02 16:55:47 INF] Executed action method TourManagementApi.Controllers.ActivitiesWizardController.Index (TourManagementApi), returned result Microsoft.AspNetCore.Mvc.ViewResult in 56.421ms.
[2025-08-02 16:55:47 INF] Executing ViewResult, running view Index.
[2025-08-02 16:55:47 INF] Executed ViewResult - view Index executed in 5.1053ms.
[2025-08-02 16:55:47 INF] Executed action TourManagementApi.Controllers.ActivitiesWizardController.Index (TourManagementApi) in 73.7984ms
[2025-08-02 16:55:47 INF] Executed endpoint 'TourManagementApi.Controllers.ActivitiesWizardController.Index (TourManagementApi)'
[2025-08-02 16:55:47 INF] Request finished HTTP/1.1 GET http://localhost:5050/ - 200 null text/html; charset=utf-8 128.6813ms
[2025-08-02 16:55:47 INF] Request starting HTTP/1.1 GET http://localhost:5050/_vs/browserLink - null null
[2025-08-02 16:55:47 INF] Request finished HTTP/1.1 GET http://localhost:5050/_vs/browserLink - 200 null text/javascript; charset=UTF-8 9.4342ms
[2025-08-02 16:55:47 INF] Request starting HTTP/1.1 GET http://localhost:5050/_framework/aspnetcore-browser-refresh.js - null null
[2025-08-02 16:55:47 INF] Request finished HTTP/1.1 GET http://localhost:5050/_framework/aspnetcore-browser-refresh.js - 200 13770 application/javascript; charset=utf-8 0.1435ms
[2025-08-02 16:55:57 INF] Request starting HTTP/1.1 GET http://localhost:5050/ActivitiesWizard/Availabilities?activityId=42 - null null
[2025-08-02 16:55:57 INF] Executing endpoint 'TourManagementApi.Controllers.ActivitiesWizardController.Availabilities (TourManagementApi)'
[2025-08-02 16:55:57 INF] Route matched with {action = "Availabilities", controller = "ActivitiesWizard"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Availabilities(Int32) on controller TourManagementApi.Controllers.ActivitiesWizardController (TourManagementApi).
[2025-08-02 16:55:57 INF] Executing action method TourManagementApi.Controllers.ActivitiesWizardController.Availabilities (TourManagementApi) - Validation state: "Valid"
[2025-08-02 16:55:57 WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
[2025-08-02 16:55:57 INF] Executed DbCommand (40ms) [Parameters=[@__activityId_0='42'], CommandType='"Text"', CommandTimeout='30']
SELECT [a1].[Id], [a1].[B2BAgencyId], [a1].[Category], [a1].[ContactInfo_Email], [a1].[ContactInfoIsNull], [a1].[ContactInfo_Name], [a1].[ContactInfo_Phone], [a1].[ContactInfo_Role], [a1].[CountryCode], [a1].[CoverImage], [a1].[CreatedAt], [a1].[Description], [a1].[DestinationCode], [a1].[DestinationName], [a1].[DetailsUrl], [a1].[Duration], [a1].[Exclusions], [a1].[ExclusionsJson], [a1].[GalleryImages], [a1].[GuestFields], [a1].[GuestFieldsJson], [a1].[Highlights], [a1].[ImportantInfo], [a1].[ImportantInfoJson], [a1].[Inclusions], [a1].[InclusionsJson], [a1].[IsActive], [a1].[IsFreeCancellation], [a1].[Itinerary], [a1].[Label], [a1].[Media_Videos], [a1].[PartnerSupplierId], [a1].[PreviewImage], [a1].[Rating], [a1].[Status], [a1].[Title], [a1].[TotalRatingCount], [a1].[TourCompanyId], [a1].[UpdatedAt], [s0].[Id], [s0].[ActivityId], [s0].[AvailableCapacity], [s0].[Date], [s0].[MaximumCapacity], [s0].[OptionId], [s0].[PartnerSupplierId], [s0].[StartTime], [s0].[Id0], [s0].[ActivityId0], [s0].[CanBeBookedAfterStartTime], [s0].[CutOff], [s0].[Duration], [s0].[EndTime], [s0].[FromDate], [s0].[Name], [s0].[StartTime0], [s0].[UntilDate], [s0].[Weekdays], [s0].[Id1], [s0].[AvailabilityId], [s0].[Capacity], [s0].[TicketCategoryId], [s0].[Id00], [s0].[Amount], [s0].[Currency], [s0].[MaxAge], [s0].[MaxSeats], [s0].[MinAge], [s0].[MinSeats], [s0].[Name0], [s0].[OptionId0], [s0].[PriceType], [s0].[Type]
FROM (
    SELECT TOP(1) [a].[Id], [a].[B2BAgencyId], [a].[Category], [a].[ContactInfo_Email], [a].[ContactInfoIsNull], [a].[ContactInfo_Name], [a].[ContactInfo_Phone], [a].[ContactInfo_Role], [a].[CountryCode], [a].[CoverImage], [a].[CreatedAt], [a].[Description], [a].[DestinationCode], [a].[DestinationName], [a].[DetailsUrl], [a].[Duration], [a].[Exclusions], [a].[ExclusionsJson], [a].[GalleryImages], [a].[GuestFields], [a].[GuestFieldsJson], [a].[Highlights], [a].[ImportantInfo], [a].[ImportantInfoJson], [a].[Inclusions], [a].[InclusionsJson], [a].[IsActive], [a].[IsFreeCancellation], [a].[Itinerary], [a].[Label], [a].[Media_Videos], [a].[PartnerSupplierId], [a].[PreviewImage], [a].[Rating], [a].[Status], [a].[Title], [a].[TotalRatingCount], [a].[TourCompanyId], [a].[UpdatedAt]
    FROM [Activities] AS [a]
    WHERE [a].[Id] = @__activityId_0
) AS [a1]
LEFT JOIN (
    SELECT [a0].[Id], [a0].[ActivityId], [a0].[AvailableCapacity], [a0].[Date], [a0].[MaximumCapacity], [a0].[OptionId], [a0].[PartnerSupplierId], [a0].[StartTime], [o].[Id] AS [Id0], [o].[ActivityId] AS [ActivityId0], [o].[CanBeBookedAfterStartTime], [o].[CutOff], [o].[Duration], [o].[EndTime], [o].[FromDate], [o].[Name], [o].[StartTime] AS [StartTime0], [o].[UntilDate], [o].[Weekdays], [s].[Id] AS [Id1], [s].[AvailabilityId], [s].[Capacity], [s].[TicketCategoryId], [s].[Id0] AS [Id00], [s].[Amount], [s].[Currency], [s].[MaxAge], [s].[MaxSeats], [s].[MinAge], [s].[MinSeats], [s].[Name] AS [Name0], [s].[OptionId] AS [OptionId0], [s].[PriceType], [s].[Type]
    FROM [Availabilities] AS [a0]
    INNER JOIN [Options] AS [o] ON [a0].[OptionId] = [o].[Id]
    LEFT JOIN (
        SELECT [t].[Id], [t].[AvailabilityId], [t].[Capacity], [t].[TicketCategoryId], [t0].[Id] AS [Id0], [t0].[Amount], [t0].[Currency], [t0].[MaxAge], [t0].[MaxSeats], [t0].[MinAge], [t0].[MinSeats], [t0].[Name], [t0].[OptionId], [t0].[PriceType], [t0].[Type]
        FROM [TicketCategoryCapacities] AS [t]
        INNER JOIN [TicketCategories] AS [t0] ON [t].[TicketCategoryId] = [t0].[Id]
    ) AS [s] ON [a0].[Id] = [s].[AvailabilityId]
) AS [s0] ON [a1].[Id] = [s0].[ActivityId]
ORDER BY [a1].[Id], [s0].[Id], [s0].[Id0], [s0].[Id1]
[2025-08-02 16:55:57 INF] Executed action method TourManagementApi.Controllers.ActivitiesWizardController.Availabilities (TourManagementApi), returned result Microsoft.AspNetCore.Mvc.ViewResult in 312.9765ms.
[2025-08-02 16:55:57 INF] Executing ViewResult, running view Availabilities.
[2025-08-02 16:55:57 INF] Executed ViewResult - view Availabilities executed in 164.0945ms.
[2025-08-02 16:55:57 INF] Executed action TourManagementApi.Controllers.ActivitiesWizardController.Availabilities (TourManagementApi) in 488.4643ms
[2025-08-02 16:55:57 INF] Executed endpoint 'TourManagementApi.Controllers.ActivitiesWizardController.Availabilities (TourManagementApi)'
[2025-08-02 16:55:57 INF] Request finished HTTP/1.1 GET http://localhost:5050/ActivitiesWizard/Availabilities?activityId=42 - 200 null text/html; charset=utf-8 510.0375ms
[2025-08-02 16:55:57 INF] Request starting HTTP/1.1 GET http://localhost:5050/_vs/browserLink - null null
[2025-08-02 16:55:57 INF] Request starting HTTP/1.1 GET http://localhost:5050/_framework/aspnetcore-browser-refresh.js - null null
[2025-08-02 16:55:57 INF] Request finished HTTP/1.1 GET http://localhost:5050/_framework/aspnetcore-browser-refresh.js - 200 13770 application/javascript; charset=utf-8 0.1278ms
[2025-08-02 16:55:57 INF] Request finished HTTP/1.1 GET http://localhost:5050/_vs/browserLink - 200 null text/javascript; charset=UTF-8 5.4186ms
[2025-08-02 16:56:00 INF] Request starting HTTP/1.1 POST http://localhost:5050/ActivitiesWizard/DeleteAllAvailabilities?activityId=42 - application/x-www-form-urlencoded 182
[2025-08-02 16:56:00 INF] Executing endpoint 'TourManagementApi.Controllers.ActivitiesWizardController.DeleteAllAvailabilities (TourManagementApi)'
[2025-08-02 16:56:00 INF] Route matched with {action = "DeleteAllAvailabilities", controller = "ActivitiesWizard"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] DeleteAllAvailabilities(Int32) on controller TourManagementApi.Controllers.ActivitiesWizardController (TourManagementApi).
[2025-08-02 16:56:00 INF] Executing action method TourManagementApi.Controllers.ActivitiesWizardController.DeleteAllAvailabilities (TourManagementApi) - Validation state: "Valid"
[2025-08-02 16:56:00 INF] Executed DbCommand (28ms) [Parameters=[@__activityId_0='42'], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ActivityId], [a].[AvailableCapacity], [a].[Date], [a].[MaximumCapacity], [a].[OptionId], [a].[PartnerSupplierId], [a].[StartTime], [t].[Id], [t].[AvailabilityId], [t].[Capacity], [t].[TicketCategoryId]
FROM [Availabilities] AS [a]
LEFT JOIN [TicketCategoryCapacities] AS [t] ON [a].[Id] = [t].[AvailabilityId]
WHERE [a].[ActivityId] = @__activityId_0
ORDER BY [a].[Id]
[2025-08-02 16:56:00 ERR] ExperienceBank availability notify failed (DeleteAllAvailabilities)
System.FormatException: Input string was not in a correct format.
   at System.DateTimeFormat.IsValidCustomDateOnlyFormat(ReadOnlySpan`1 format, Boolean throwOnError)
   at System.DateOnly.ToString(String format, IFormatProvider provider)
   at TourManagementApi.Controllers.ActivitiesWizardController.DeleteAllAvailabilities(Int32 activityId)
[2025-08-02 16:56:00 ERR] ExperienceBank availability notify failed (DeleteAllAvailabilities)
System.FormatException: Input string was not in a correct format.
   at System.DateTimeFormat.IsValidCustomDateOnlyFormat(ReadOnlySpan`1 format, Boolean throwOnError)
   at System.DateOnly.ToString(String format, IFormatProvider provider)
   at TourManagementApi.Controllers.ActivitiesWizardController.DeleteAllAvailabilities(Int32 activityId)
[2025-08-02 16:56:00 ERR] ExperienceBank availability notify failed (DeleteAllAvailabilities)
System.FormatException: Input string was not in a correct format.
   at System.DateTimeFormat.IsValidCustomDateOnlyFormat(ReadOnlySpan`1 format, Boolean throwOnError)
   at System.DateOnly.ToString(String format, IFormatProvider provider)
   at TourManagementApi.Controllers.ActivitiesWizardController.DeleteAllAvailabilities(Int32 activityId)
[2025-08-02 16:56:00 ERR] ExperienceBank availability notify failed (DeleteAllAvailabilities)
System.FormatException: Input string was not in a correct format.
   at System.DateTimeFormat.IsValidCustomDateOnlyFormat(ReadOnlySpan`1 format, Boolean throwOnError)
   at System.DateOnly.ToString(String format, IFormatProvider provider)
   at TourManagementApi.Controllers.ActivitiesWizardController.DeleteAllAvailabilities(Int32 activityId)
[2025-08-02 16:56:00 ERR] ExperienceBank availability notify failed (DeleteAllAvailabilities)
System.FormatException: Input string was not in a correct format.
   at System.DateTimeFormat.IsValidCustomDateOnlyFormat(ReadOnlySpan`1 format, Boolean throwOnError)
   at System.DateOnly.ToString(String format, IFormatProvider provider)
   at TourManagementApi.Controllers.ActivitiesWizardController.DeleteAllAvailabilities(Int32 activityId)
[2025-08-02 16:56:00 ERR] ExperienceBank availability notify failed (DeleteAllAvailabilities)
System.FormatException: Input string was not in a correct format.
   at System.DateTimeFormat.IsValidCustomDateOnlyFormat(ReadOnlySpan`1 format, Boolean throwOnError)
   at System.DateOnly.ToString(String format, IFormatProvider provider)
   at TourManagementApi.Controllers.ActivitiesWizardController.DeleteAllAvailabilities(Int32 activityId)
[2025-08-02 16:56:00 ERR] ExperienceBank availability notify failed (DeleteAllAvailabilities)
System.FormatException: Input string was not in a correct format.
   at System.DateTimeFormat.IsValidCustomDateOnlyFormat(ReadOnlySpan`1 format, Boolean throwOnError)
   at System.DateOnly.ToString(String format, IFormatProvider provider)
   at TourManagementApi.Controllers.ActivitiesWizardController.DeleteAllAvailabilities(Int32 activityId)
[2025-08-02 16:56:00 ERR] ExperienceBank availability notify failed (DeleteAllAvailabilities)
System.FormatException: Input string was not in a correct format.
   at System.DateTimeFormat.IsValidCustomDateOnlyFormat(ReadOnlySpan`1 format, Boolean throwOnError)
   at System.DateOnly.ToString(String format, IFormatProvider provider)
   at TourManagementApi.Controllers.ActivitiesWizardController.DeleteAllAvailabilities(Int32 activityId)
[2025-08-02 16:56:00 ERR] ExperienceBank availability notify failed (DeleteAllAvailabilities)
System.FormatException: Input string was not in a correct format.
   at System.DateTimeFormat.IsValidCustomDateOnlyFormat(ReadOnlySpan`1 format, Boolean throwOnError)
   at System.DateOnly.ToString(String format, IFormatProvider provider)
   at TourManagementApi.Controllers.ActivitiesWizardController.DeleteAllAvailabilities(Int32 activityId)
[2025-08-02 16:56:00 ERR] ExperienceBank availability notify failed (DeleteAllAvailabilities)
System.FormatException: Input string was not in a correct format.
   at System.DateTimeFormat.IsValidCustomDateOnlyFormat(ReadOnlySpan`1 format, Boolean throwOnError)
   at System.DateOnly.ToString(String format, IFormatProvider provider)
   at TourManagementApi.Controllers.ActivitiesWizardController.DeleteAllAvailabilities(Int32 activityId)
[2025-08-02 16:56:00 ERR] ExperienceBank availability notify failed (DeleteAllAvailabilities)
System.FormatException: Input string was not in a correct format.
   at System.DateTimeFormat.IsValidCustomDateOnlyFormat(ReadOnlySpan`1 format, Boolean throwOnError)
   at System.DateOnly.ToString(String format, IFormatProvider provider)
   at TourManagementApi.Controllers.ActivitiesWizardController.DeleteAllAvailabilities(Int32 activityId)
[2025-08-02 16:56:01 ERR] ExperienceBank availability notify failed (DeleteAllAvailabilities)
System.FormatException: Input string was not in a correct format.
   at System.DateTimeFormat.IsValidCustomDateOnlyFormat(ReadOnlySpan`1 format, Boolean throwOnError)
   at System.DateOnly.ToString(String format, IFormatProvider provider)
   at TourManagementApi.Controllers.ActivitiesWizardController.DeleteAllAvailabilities(Int32 activityId)
[2025-08-02 16:56:01 ERR] ExperienceBank availability notify failed (DeleteAllAvailabilities)
System.FormatException: Input string was not in a correct format.
   at System.DateTimeFormat.IsValidCustomDateOnlyFormat(ReadOnlySpan`1 format, Boolean throwOnError)
   at System.DateOnly.ToString(String format, IFormatProvider provider)
   at TourManagementApi.Controllers.ActivitiesWizardController.DeleteAllAvailabilities(Int32 activityId)
[2025-08-02 16:56:01 ERR] ExperienceBank availability notify failed (DeleteAllAvailabilities)
System.FormatException: Input string was not in a correct format.
   at System.DateTimeFormat.IsValidCustomDateOnlyFormat(ReadOnlySpan`1 format, Boolean throwOnError)
   at System.DateOnly.ToString(String format, IFormatProvider provider)
   at TourManagementApi.Controllers.ActivitiesWizardController.DeleteAllAvailabilities(Int32 activityId)
[2025-08-02 16:56:01 ERR] ExperienceBank availability notify failed (DeleteAllAvailabilities)
System.FormatException: Input string was not in a correct format.
   at System.DateTimeFormat.IsValidCustomDateOnlyFormat(ReadOnlySpan`1 format, Boolean throwOnError)
   at System.DateOnly.ToString(String format, IFormatProvider provider)
   at TourManagementApi.Controllers.ActivitiesWizardController.DeleteAllAvailabilities(Int32 activityId)
[2025-08-02 16:56:01 ERR] ExperienceBank availability notify failed (DeleteAllAvailabilities)
System.FormatException: Input string was not in a correct format.
   at System.DateTimeFormat.IsValidCustomDateOnlyFormat(ReadOnlySpan`1 format, Boolean throwOnError)
   at System.DateOnly.ToString(String format, IFormatProvider provider)
   at TourManagementApi.Controllers.ActivitiesWizardController.DeleteAllAvailabilities(Int32 activityId)
[2025-08-02 16:56:01 ERR] ExperienceBank availability notify failed (DeleteAllAvailabilities)
System.FormatException: Input string was not in a correct format.
   at System.DateTimeFormat.IsValidCustomDateOnlyFormat(ReadOnlySpan`1 format, Boolean throwOnError)
   at System.DateOnly.ToString(String format, IFormatProvider provider)
   at TourManagementApi.Controllers.ActivitiesWizardController.DeleteAllAvailabilities(Int32 activityId)
[2025-08-02 16:56:01 ERR] ExperienceBank availability notify failed (DeleteAllAvailabilities)
System.FormatException: Input string was not in a correct format.
   at System.DateTimeFormat.IsValidCustomDateOnlyFormat(ReadOnlySpan`1 format, Boolean throwOnError)
   at System.DateOnly.ToString(String format, IFormatProvider provider)
   at TourManagementApi.Controllers.ActivitiesWizardController.DeleteAllAvailabilities(Int32 activityId)
[2025-08-02 16:56:01 ERR] ExperienceBank availability notify failed (DeleteAllAvailabilities)
System.FormatException: Input string was not in a correct format.
   at System.DateTimeFormat.IsValidCustomDateOnlyFormat(ReadOnlySpan`1 format, Boolean throwOnError)
   at System.DateOnly.ToString(String format, IFormatProvider provider)
   at TourManagementApi.Controllers.ActivitiesWizardController.DeleteAllAvailabilities(Int32 activityId)
[2025-08-02 16:56:01 ERR] ExperienceBank availability notify failed (DeleteAllAvailabilities)
System.FormatException: Input string was not in a correct format.
   at System.DateTimeFormat.IsValidCustomDateOnlyFormat(ReadOnlySpan`1 format, Boolean throwOnError)
   at System.DateOnly.ToString(String format, IFormatProvider provider)
   at TourManagementApi.Controllers.ActivitiesWizardController.DeleteAllAvailabilities(Int32 activityId)
[2025-08-02 16:56:01 ERR] ExperienceBank availability notify failed (DeleteAllAvailabilities)
System.FormatException: Input string was not in a correct format.
   at System.DateTimeFormat.IsValidCustomDateOnlyFormat(ReadOnlySpan`1 format, Boolean throwOnError)
   at System.DateOnly.ToString(String format, IFormatProvider provider)
   at TourManagementApi.Controllers.ActivitiesWizardController.DeleteAllAvailabilities(Int32 activityId)
[2025-08-02 16:56:01 ERR] ExperienceBank availability notify failed (DeleteAllAvailabilities)
System.FormatException: Input string was not in a correct format.
   at System.DateTimeFormat.IsValidCustomDateOnlyFormat(ReadOnlySpan`1 format, Boolean throwOnError)
   at System.DateOnly.ToString(String format, IFormatProvider provider)
   at TourManagementApi.Controllers.ActivitiesWizardController.DeleteAllAvailabilities(Int32 activityId)
[2025-08-02 16:56:01 ERR] ExperienceBank availability notify failed (DeleteAllAvailabilities)
System.FormatException: Input string was not in a correct format.
   at System.DateTimeFormat.IsValidCustomDateOnlyFormat(ReadOnlySpan`1 format, Boolean throwOnError)
   at System.DateOnly.ToString(String format, IFormatProvider provider)
   at TourManagementApi.Controllers.ActivitiesWizardController.DeleteAllAvailabilities(Int32 activityId)
[2025-08-02 16:56:01 ERR] ExperienceBank availability notify failed (DeleteAllAvailabilities)
System.FormatException: Input string was not in a correct format.
   at System.DateTimeFormat.IsValidCustomDateOnlyFormat(ReadOnlySpan`1 format, Boolean throwOnError)
   at System.DateOnly.ToString(String format, IFormatProvider provider)
   at TourManagementApi.Controllers.ActivitiesWizardController.DeleteAllAvailabilities(Int32 activityId)
[2025-08-02 16:56:01 ERR] ExperienceBank availability notify failed (DeleteAllAvailabilities)
System.FormatException: Input string was not in a correct format.
   at System.DateTimeFormat.IsValidCustomDateOnlyFormat(ReadOnlySpan`1 format, Boolean throwOnError)
   at System.DateOnly.ToString(String format, IFormatProvider provider)
   at TourManagementApi.Controllers.ActivitiesWizardController.DeleteAllAvailabilities(Int32 activityId)
[2025-08-02 16:56:01 ERR] ExperienceBank availability notify failed (DeleteAllAvailabilities)
System.FormatException: Input string was not in a correct format.
   at System.DateTimeFormat.IsValidCustomDateOnlyFormat(ReadOnlySpan`1 format, Boolean throwOnError)
   at System.DateOnly.ToString(String format, IFormatProvider provider)
   at TourManagementApi.Controllers.ActivitiesWizardController.DeleteAllAvailabilities(Int32 activityId)
[2025-08-02 16:56:01 ERR] ExperienceBank availability notify failed (DeleteAllAvailabilities)
System.FormatException: Input string was not in a correct format.
   at System.DateTimeFormat.IsValidCustomDateOnlyFormat(ReadOnlySpan`1 format, Boolean throwOnError)
   at System.DateOnly.ToString(String format, IFormatProvider provider)
   at TourManagementApi.Controllers.ActivitiesWizardController.DeleteAllAvailabilities(Int32 activityId)
[2025-08-02 16:56:01 ERR] ExperienceBank availability notify failed (DeleteAllAvailabilities)
System.FormatException: Input string was not in a correct format.
   at System.DateTimeFormat.IsValidCustomDateOnlyFormat(ReadOnlySpan`1 format, Boolean throwOnError)
   at System.DateOnly.ToString(String format, IFormatProvider provider)
   at TourManagementApi.Controllers.ActivitiesWizardController.DeleteAllAvailabilities(Int32 activityId)
[2025-08-02 16:56:01 ERR] ExperienceBank availability notify failed (DeleteAllAvailabilities)
System.FormatException: Input string was not in a correct format.
   at System.DateTimeFormat.IsValidCustomDateOnlyFormat(ReadOnlySpan`1 format, Boolean throwOnError)
   at System.DateOnly.ToString(String format, IFormatProvider provider)
   at TourManagementApi.Controllers.ActivitiesWizardController.DeleteAllAvailabilities(Int32 activityId)
[2025-08-02 16:56:01 ERR] ExperienceBank availability notify failed (DeleteAllAvailabilities)
System.FormatException: Input string was not in a correct format.
   at System.DateTimeFormat.IsValidCustomDateOnlyFormat(ReadOnlySpan`1 format, Boolean throwOnError)
   at System.DateOnly.ToString(String format, IFormatProvider provider)
   at TourManagementApi.Controllers.ActivitiesWizardController.DeleteAllAvailabilities(Int32 activityId)
[2025-08-02 16:56:01 INF] Executed DbCommand (74ms) [Parameters=[@p0='1343', @p1='1344', @p2='1345', @p3='1346', @p4='1347', @p5='1348', @p6='1349', @p7='1350', @p8='1351', @p9='1352', @p10='1353', @p11='1354', @p12='1355', @p13='1356', @p14='1357', @p15='1358', @p16='1359', @p17='1360', @p18='1361', @p19='1362', @p20='1363', @p21='1364', @p22='1365', @p23='1366', @p24='1367', @p25='1368', @p26='1369', @p27='1370', @p28='1371', @p29='1372', @p30='679', @p31='680', @p32='681', @p33='682', @p34='683', @p35='684', @p36='685', @p37='686', @p38='687', @p39='688', @p40='689', @p41='690'], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [TicketCategoryCapacities]
OUTPUT 1
WHERE [Id] = @p0;
DELETE FROM [TicketCategoryCapacities]
OUTPUT 1
WHERE [Id] = @p1;
DELETE FROM [TicketCategoryCapacities]
OUTPUT 1
WHERE [Id] = @p2;
DELETE FROM [TicketCategoryCapacities]
OUTPUT 1
WHERE [Id] = @p3;
DELETE FROM [TicketCategoryCapacities]
OUTPUT 1
WHERE [Id] = @p4;
DELETE FROM [TicketCategoryCapacities]
OUTPUT 1
WHERE [Id] = @p5;
DELETE FROM [TicketCategoryCapacities]
OUTPUT 1
WHERE [Id] = @p6;
DELETE FROM [TicketCategoryCapacities]
OUTPUT 1
WHERE [Id] = @p7;
DELETE FROM [TicketCategoryCapacities]
OUTPUT 1
WHERE [Id] = @p8;
DELETE FROM [TicketCategoryCapacities]
OUTPUT 1
WHERE [Id] = @p9;
DELETE FROM [TicketCategoryCapacities]
OUTPUT 1
WHERE [Id] = @p10;
DELETE FROM [TicketCategoryCapacities]
OUTPUT 1
WHERE [Id] = @p11;
DELETE FROM [TicketCategoryCapacities]
OUTPUT 1
WHERE [Id] = @p12;
DELETE FROM [TicketCategoryCapacities]
OUTPUT 1
WHERE [Id] = @p13;
DELETE FROM [TicketCategoryCapacities]
OUTPUT 1
WHERE [Id] = @p14;
DELETE FROM [TicketCategoryCapacities]
OUTPUT 1
WHERE [Id] = @p15;
DELETE FROM [TicketCategoryCapacities]
OUTPUT 1
WHERE [Id] = @p16;
DELETE FROM [TicketCategoryCapacities]
OUTPUT 1
WHERE [Id] = @p17;
DELETE FROM [TicketCategoryCapacities]
OUTPUT 1
WHERE [Id] = @p18;
DELETE FROM [TicketCategoryCapacities]
OUTPUT 1
WHERE [Id] = @p19;
DELETE FROM [TicketCategoryCapacities]
OUTPUT 1
WHERE [Id] = @p20;
DELETE FROM [TicketCategoryCapacities]
OUTPUT 1
WHERE [Id] = @p21;
DELETE FROM [TicketCategoryCapacities]
OUTPUT 1
WHERE [Id] = @p22;
DELETE FROM [TicketCategoryCapacities]
OUTPUT 1
WHERE [Id] = @p23;
DELETE FROM [TicketCategoryCapacities]
OUTPUT 1
WHERE [Id] = @p24;
DELETE FROM [TicketCategoryCapacities]
OUTPUT 1
WHERE [Id] = @p25;
DELETE FROM [TicketCategoryCapacities]
OUTPUT 1
WHERE [Id] = @p26;
DELETE FROM [TicketCategoryCapacities]
OUTPUT 1
WHERE [Id] = @p27;
DELETE FROM [TicketCategoryCapacities]
OUTPUT 1
WHERE [Id] = @p28;
DELETE FROM [TicketCategoryCapacities]
OUTPUT 1
WHERE [Id] = @p29;
DELETE FROM [Availabilities]
OUTPUT 1
WHERE [Id] = @p30;
DELETE FROM [Availabilities]
OUTPUT 1
WHERE [Id] = @p31;
DELETE FROM [Availabilities]
OUTPUT 1
WHERE [Id] = @p32;
DELETE FROM [Availabilities]
OUTPUT 1
WHERE [Id] = @p33;
DELETE FROM [Availabilities]
OUTPUT 1
WHERE [Id] = @p34;
DELETE FROM [Availabilities]
OUTPUT 1
WHERE [Id] = @p35;
DELETE FROM [Availabilities]
OUTPUT 1
WHERE [Id] = @p36;
DELETE FROM [Availabilities]
OUTPUT 1
WHERE [Id] = @p37;
DELETE FROM [Availabilities]
OUTPUT 1
WHERE [Id] = @p38;
DELETE FROM [Availabilities]
OUTPUT 1
WHERE [Id] = @p39;
DELETE FROM [Availabilities]
OUTPUT 1
WHERE [Id] = @p40;
DELETE FROM [Availabilities]
OUTPUT 1
WHERE [Id] = @p41;
[2025-08-02 16:56:01 INF] Executed DbCommand (90ms) [Parameters=[@p0='691', @p1='692', @p2='693', @p3='694', @p4='695', @p5='696', @p6='697', @p7='698', @p8='699', @p9='700', @p10='701', @p11='702', @p12='703', @p13='704', @p14='705', @p15='706', @p16='707', @p17='708'], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [Availabilities]
OUTPUT 1
WHERE [Id] = @p0;
DELETE FROM [Availabilities]
OUTPUT 1
WHERE [Id] = @p1;
DELETE FROM [Availabilities]
OUTPUT 1
WHERE [Id] = @p2;
DELETE FROM [Availabilities]
OUTPUT 1
WHERE [Id] = @p3;
DELETE FROM [Availabilities]
OUTPUT 1
WHERE [Id] = @p4;
DELETE FROM [Availabilities]
OUTPUT 1
WHERE [Id] = @p5;
DELETE FROM [Availabilities]
OUTPUT 1
WHERE [Id] = @p6;
DELETE FROM [Availabilities]
OUTPUT 1
WHERE [Id] = @p7;
DELETE FROM [Availabilities]
OUTPUT 1
WHERE [Id] = @p8;
DELETE FROM [Availabilities]
OUTPUT 1
WHERE [Id] = @p9;
DELETE FROM [Availabilities]
OUTPUT 1
WHERE [Id] = @p10;
DELETE FROM [Availabilities]
OUTPUT 1
WHERE [Id] = @p11;
DELETE FROM [Availabilities]
OUTPUT 1
WHERE [Id] = @p12;
DELETE FROM [Availabilities]
OUTPUT 1
WHERE [Id] = @p13;
DELETE FROM [Availabilities]
OUTPUT 1
WHERE [Id] = @p14;
DELETE FROM [Availabilities]
OUTPUT 1
WHERE [Id] = @p15;
DELETE FROM [Availabilities]
OUTPUT 1
WHERE [Id] = @p16;
DELETE FROM [Availabilities]
OUTPUT 1
WHERE [Id] = @p17;
[2025-08-02 16:56:01 INF] Executed action method TourManagementApi.Controllers.ActivitiesWizardController.DeleteAllAvailabilities (TourManagementApi), returned result Microsoft.AspNetCore.Mvc.RedirectToActionResult in 1344.9757ms.
[2025-08-02 16:56:01 INF] Executing RedirectResult, redirecting to /ActivitiesWizard/Availabilities?activityId=42.
[2025-08-02 16:56:01 INF] Executed action TourManagementApi.Controllers.ActivitiesWizardController.DeleteAllAvailabilities (TourManagementApi) in 1364.0472ms
[2025-08-02 16:56:01 INF] Executed endpoint 'TourManagementApi.Controllers.ActivitiesWizardController.DeleteAllAvailabilities (TourManagementApi)'
[2025-08-02 16:56:01 INF] Request finished HTTP/1.1 POST http://localhost:5050/ActivitiesWizard/DeleteAllAvailabilities?activityId=42 - 302 0 null 1397.8807ms
[2025-08-02 16:56:01 INF] Request starting HTTP/1.1 GET http://localhost:5050/ActivitiesWizard/Availabilities?activityId=42 - null null
[2025-08-02 16:56:01 INF] Executing endpoint 'TourManagementApi.Controllers.ActivitiesWizardController.Availabilities (TourManagementApi)'
[2025-08-02 16:56:01 INF] Route matched with {action = "Availabilities", controller = "ActivitiesWizard"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Availabilities(Int32) on controller TourManagementApi.Controllers.ActivitiesWizardController (TourManagementApi).
[2025-08-02 16:56:01 INF] Executing action method TourManagementApi.Controllers.ActivitiesWizardController.Availabilities (TourManagementApi) - Validation state: "Valid"
[2025-08-02 16:56:01 INF] Executed DbCommand (60ms) [Parameters=[@__activityId_0='42'], CommandType='"Text"', CommandTimeout='30']
SELECT [a1].[Id], [a1].[B2BAgencyId], [a1].[Category], [a1].[ContactInfo_Email], [a1].[ContactInfoIsNull], [a1].[ContactInfo_Name], [a1].[ContactInfo_Phone], [a1].[ContactInfo_Role], [a1].[CountryCode], [a1].[CoverImage], [a1].[CreatedAt], [a1].[Description], [a1].[DestinationCode], [a1].[DestinationName], [a1].[DetailsUrl], [a1].[Duration], [a1].[Exclusions], [a1].[ExclusionsJson], [a1].[GalleryImages], [a1].[GuestFields], [a1].[GuestFieldsJson], [a1].[Highlights], [a1].[ImportantInfo], [a1].[ImportantInfoJson], [a1].[Inclusions], [a1].[InclusionsJson], [a1].[IsActive], [a1].[IsFreeCancellation], [a1].[Itinerary], [a1].[Label], [a1].[Media_Videos], [a1].[PartnerSupplierId], [a1].[PreviewImage], [a1].[Rating], [a1].[Status], [a1].[Title], [a1].[TotalRatingCount], [a1].[TourCompanyId], [a1].[UpdatedAt], [s0].[Id], [s0].[ActivityId], [s0].[AvailableCapacity], [s0].[Date], [s0].[MaximumCapacity], [s0].[OptionId], [s0].[PartnerSupplierId], [s0].[StartTime], [s0].[Id0], [s0].[ActivityId0], [s0].[CanBeBookedAfterStartTime], [s0].[CutOff], [s0].[Duration], [s0].[EndTime], [s0].[FromDate], [s0].[Name], [s0].[StartTime0], [s0].[UntilDate], [s0].[Weekdays], [s0].[Id1], [s0].[AvailabilityId], [s0].[Capacity], [s0].[TicketCategoryId], [s0].[Id00], [s0].[Amount], [s0].[Currency], [s0].[MaxAge], [s0].[MaxSeats], [s0].[MinAge], [s0].[MinSeats], [s0].[Name0], [s0].[OptionId0], [s0].[PriceType], [s0].[Type]
FROM (
    SELECT TOP(1) [a].[Id], [a].[B2BAgencyId], [a].[Category], [a].[ContactInfo_Email], [a].[ContactInfoIsNull], [a].[ContactInfo_Name], [a].[ContactInfo_Phone], [a].[ContactInfo_Role], [a].[CountryCode], [a].[CoverImage], [a].[CreatedAt], [a].[Description], [a].[DestinationCode], [a].[DestinationName], [a].[DetailsUrl], [a].[Duration], [a].[Exclusions], [a].[ExclusionsJson], [a].[GalleryImages], [a].[GuestFields], [a].[GuestFieldsJson], [a].[Highlights], [a].[ImportantInfo], [a].[ImportantInfoJson], [a].[Inclusions], [a].[InclusionsJson], [a].[IsActive], [a].[IsFreeCancellation], [a].[Itinerary], [a].[Label], [a].[Media_Videos], [a].[PartnerSupplierId], [a].[PreviewImage], [a].[Rating], [a].[Status], [a].[Title], [a].[TotalRatingCount], [a].[TourCompanyId], [a].[UpdatedAt]
    FROM [Activities] AS [a]
    WHERE [a].[Id] = @__activityId_0
) AS [a1]
LEFT JOIN (
    SELECT [a0].[Id], [a0].[ActivityId], [a0].[AvailableCapacity], [a0].[Date], [a0].[MaximumCapacity], [a0].[OptionId], [a0].[PartnerSupplierId], [a0].[StartTime], [o].[Id] AS [Id0], [o].[ActivityId] AS [ActivityId0], [o].[CanBeBookedAfterStartTime], [o].[CutOff], [o].[Duration], [o].[EndTime], [o].[FromDate], [o].[Name], [o].[StartTime] AS [StartTime0], [o].[UntilDate], [o].[Weekdays], [s].[Id] AS [Id1], [s].[AvailabilityId], [s].[Capacity], [s].[TicketCategoryId], [s].[Id0] AS [Id00], [s].[Amount], [s].[Currency], [s].[MaxAge], [s].[MaxSeats], [s].[MinAge], [s].[MinSeats], [s].[Name] AS [Name0], [s].[OptionId] AS [OptionId0], [s].[PriceType], [s].[Type]
    FROM [Availabilities] AS [a0]
    INNER JOIN [Options] AS [o] ON [a0].[OptionId] = [o].[Id]
    LEFT JOIN (
        SELECT [t].[Id], [t].[AvailabilityId], [t].[Capacity], [t].[TicketCategoryId], [t0].[Id] AS [Id0], [t0].[Amount], [t0].[Currency], [t0].[MaxAge], [t0].[MaxSeats], [t0].[MinAge], [t0].[MinSeats], [t0].[Name], [t0].[OptionId], [t0].[PriceType], [t0].[Type]
        FROM [TicketCategoryCapacities] AS [t]
        INNER JOIN [TicketCategories] AS [t0] ON [t].[TicketCategoryId] = [t0].[Id]
    ) AS [s] ON [a0].[Id] = [s].[AvailabilityId]
) AS [s0] ON [a1].[Id] = [s0].[ActivityId]
ORDER BY [a1].[Id], [s0].[Id], [s0].[Id0], [s0].[Id1]
[2025-08-02 16:56:01 INF] Executed action method TourManagementApi.Controllers.ActivitiesWizardController.Availabilities (TourManagementApi), returned result Microsoft.AspNetCore.Mvc.ViewResult in 63.3837ms.
[2025-08-02 16:56:01 INF] Executing ViewResult, running view Availabilities.
[2025-08-02 16:56:01 INF] Executed ViewResult - view Availabilities executed in 1.0867ms.
[2025-08-02 16:56:01 INF] Executed action TourManagementApi.Controllers.ActivitiesWizardController.Availabilities (TourManagementApi) in 73.5466ms
[2025-08-02 16:56:01 INF] Executed endpoint 'TourManagementApi.Controllers.ActivitiesWizardController.Availabilities (TourManagementApi)'
[2025-08-02 16:56:01 INF] Request finished HTTP/1.1 GET http://localhost:5050/ActivitiesWizard/Availabilities?activityId=42 - 200 null text/html; charset=utf-8 92.1324ms
[2025-08-02 16:56:02 INF] Request starting HTTP/1.1 GET http://localhost:5050/_vs/browserLink - null null
[2025-08-02 16:56:02 INF] Request finished HTTP/1.1 GET http://localhost:5050/_vs/browserLink - 200 null text/javascript; charset=UTF-8 6.416ms
[2025-08-02 16:56:02 INF] Request starting HTTP/1.1 GET http://localhost:5050/_framework/aspnetcore-browser-refresh.js - null null
[2025-08-02 16:56:02 INF] Request finished HTTP/1.1 GET http://localhost:5050/_framework/aspnetcore-browser-refresh.js - 200 13770 application/javascript; charset=utf-8 0.1709ms
[2025-08-02 16:56:03 INF] Request starting HTTP/1.1 GET http://localhost:5050/ActivitiesWizard/CreateAvailability/42 - null null
[2025-08-02 16:56:03 INF] Executing endpoint 'TourManagementApi.Controllers.ActivitiesWizardController.CreateAvailability (TourManagementApi)'
[2025-08-02 16:56:03 INF] Route matched with {action = "CreateAvailability", controller = "ActivitiesWizard"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateAvailability(Int32) on controller TourManagementApi.Controllers.ActivitiesWizardController (TourManagementApi).
[2025-08-02 16:56:03 INF] Executing action method TourManagementApi.Controllers.ActivitiesWizardController.CreateAvailability (TourManagementApi) - Validation state: "Valid"
[2025-08-02 16:56:03 WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
[2025-08-02 16:56:03 INF] Executed DbCommand (27ms) [Parameters=[@__id_0='42'], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Id], [a0].[B2BAgencyId], [a0].[Category], [a0].[ContactInfo_Email], [a0].[ContactInfoIsNull], [a0].[ContactInfo_Name], [a0].[ContactInfo_Phone], [a0].[ContactInfo_Role], [a0].[CountryCode], [a0].[CoverImage], [a0].[CreatedAt], [a0].[Description], [a0].[DestinationCode], [a0].[DestinationName], [a0].[DetailsUrl], [a0].[Duration], [a0].[Exclusions], [a0].[ExclusionsJson], [a0].[GalleryImages], [a0].[GuestFields], [a0].[GuestFieldsJson], [a0].[Highlights], [a0].[ImportantInfo], [a0].[ImportantInfoJson], [a0].[Inclusions], [a0].[InclusionsJson], [a0].[IsActive], [a0].[IsFreeCancellation], [a0].[Itinerary], [a0].[Label], [a0].[Media_Videos], [a0].[PartnerSupplierId], [a0].[PreviewImage], [a0].[Rating], [a0].[Status], [a0].[Title], [a0].[TotalRatingCount], [a0].[TourCompanyId], [a0].[UpdatedAt], [s].[Id], [s].[ActivityId], [s].[CanBeBookedAfterStartTime], [s].[CutOff], [s].[Duration], [s].[EndTime], [s].[FromDate], [s].[Name], [s].[StartTime], [s].[UntilDate], [s].[Weekdays], [s].[Id0], [s].[Amount], [s].[Currency], [s].[MaxAge], [s].[MaxSeats], [s].[MinAge], [s].[MinSeats], [s].[Name0], [s].[OptionId], [s].[PriceType], [s].[Type]
FROM (
    SELECT TOP(1) [a].[Id], [a].[B2BAgencyId], [a].[Category], [a].[ContactInfo_Email], [a].[ContactInfoIsNull], [a].[ContactInfo_Name], [a].[ContactInfo_Phone], [a].[ContactInfo_Role], [a].[CountryCode], [a].[CoverImage], [a].[CreatedAt], [a].[Description], [a].[DestinationCode], [a].[DestinationName], [a].[DetailsUrl], [a].[Duration], [a].[Exclusions], [a].[ExclusionsJson], [a].[GalleryImages], [a].[GuestFields], [a].[GuestFieldsJson], [a].[Highlights], [a].[ImportantInfo], [a].[ImportantInfoJson], [a].[Inclusions], [a].[InclusionsJson], [a].[IsActive], [a].[IsFreeCancellation], [a].[Itinerary], [a].[Label], [a].[Media_Videos], [a].[PartnerSupplierId], [a].[PreviewImage], [a].[Rating], [a].[Status], [a].[Title], [a].[TotalRatingCount], [a].[TourCompanyId], [a].[UpdatedAt]
    FROM [Activities] AS [a]
    WHERE [a].[Id] = @__id_0
) AS [a0]
LEFT JOIN (
    SELECT [o].[Id], [o].[ActivityId], [o].[CanBeBookedAfterStartTime], [o].[CutOff], [o].[Duration], [o].[EndTime], [o].[FromDate], [o].[Name], [o].[StartTime], [o].[UntilDate], [o].[Weekdays], [t].[Id] AS [Id0], [t].[Amount], [t].[Currency], [t].[MaxAge], [t].[MaxSeats], [t].[MinAge], [t].[MinSeats], [t].[Name] AS [Name0], [t].[OptionId], [t].[PriceType], [t].[Type]
    FROM [Options] AS [o]
    LEFT JOIN [TicketCategories] AS [t] ON [o].[Id] = [t].[OptionId]
) AS [s] ON [a0].[Id] = [s].[ActivityId]
ORDER BY [a0].[Id], [s].[Id]
[2025-08-02 16:56:03 INF] Executed action method TourManagementApi.Controllers.ActivitiesWizardController.CreateAvailability (TourManagementApi), returned result Microsoft.AspNetCore.Mvc.ViewResult in 69.5592ms.
[2025-08-02 16:56:03 INF] Executing ViewResult, running view CreateAvailability.
[2025-08-02 16:56:03 INF] Executed ViewResult - view CreateAvailability executed in 117.6166ms.
[2025-08-02 16:56:03 INF] Executed action TourManagementApi.Controllers.ActivitiesWizardController.CreateAvailability (TourManagementApi) in 198.1998ms
[2025-08-02 16:56:03 INF] Executed endpoint 'TourManagementApi.Controllers.ActivitiesWizardController.CreateAvailability (TourManagementApi)'
[2025-08-02 16:56:03 INF] Request finished HTTP/1.1 GET http://localhost:5050/ActivitiesWizard/CreateAvailability/42 - 200 null text/html; charset=utf-8 227.792ms
[2025-08-02 16:56:03 INF] Request starting HTTP/1.1 GET http://localhost:5050/_vs/browserLink - null null
[2025-08-02 16:56:03 INF] Request finished HTTP/1.1 GET http://localhost:5050/_vs/browserLink - 200 null text/javascript; charset=UTF-8 6.5467ms
[2025-08-02 16:56:03 INF] Request starting HTTP/1.1 GET http://localhost:5050/_framework/aspnetcore-browser-refresh.js - null null
[2025-08-02 16:56:03 INF] Request finished HTTP/1.1 GET http://localhost:5050/_framework/aspnetcore-browser-refresh.js - 200 13770 application/javascript; charset=utf-8 0.158ms
[2025-08-02 16:56:05 INF] Request starting HTTP/1.1 GET http://localhost:5050/ActivitiesWizard/GetTicketCategories?optionId=41 - null null
[2025-08-02 16:56:05 INF] Executing endpoint 'TourManagementApi.Controllers.ActivitiesWizardController.GetTicketCategories (TourManagementApi)'
[2025-08-02 16:56:05 INF] Route matched with {action = "GetTicketCategories", controller = "ActivitiesWizard"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTicketCategories(Int32) on controller TourManagementApi.Controllers.ActivitiesWizardController (TourManagementApi).
[2025-08-02 16:56:05 INF] Executing action method TourManagementApi.Controllers.ActivitiesWizardController.GetTicketCategories (TourManagementApi) - Validation state: "Valid"
[2025-08-02 16:56:05 INF] Executed DbCommand (25ms) [Parameters=[@__optionId_0='41'], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[ActivityId], [o0].[CanBeBookedAfterStartTime], [o0].[CutOff], [o0].[Duration], [o0].[EndTime], [o0].[FromDate], [o0].[Name], [o0].[StartTime], [o0].[UntilDate], [o0].[Weekdays], [t].[Id], [t].[Amount], [t].[Currency], [t].[MaxAge], [t].[MaxSeats], [t].[MinAge], [t].[MinSeats], [t].[Name], [t].[OptionId], [t].[PriceType], [t].[Type]
FROM (
    SELECT TOP(1) [o].[Id], [o].[ActivityId], [o].[CanBeBookedAfterStartTime], [o].[CutOff], [o].[Duration], [o].[EndTime], [o].[FromDate], [o].[Name], [o].[StartTime], [o].[UntilDate], [o].[Weekdays]
    FROM [Options] AS [o]
    WHERE [o].[Id] = @__optionId_0
) AS [o0]
LEFT JOIN [TicketCategories] AS [t] ON [o0].[Id] = [t].[OptionId]
ORDER BY [o0].[Id]
[2025-08-02 16:56:05 INF] Executed action method TourManagementApi.Controllers.ActivitiesWizardController.GetTicketCategories (TourManagementApi), returned result Microsoft.AspNetCore.Mvc.JsonResult in 43.9114ms.
[2025-08-02 16:56:05 INF] Executing JsonResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType3`2[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], TourManagementApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-08-02 16:56:05 INF] Executed action TourManagementApi.Controllers.ActivitiesWizardController.GetTicketCategories (TourManagementApi) in 59.2348ms
[2025-08-02 16:56:05 INF] Executed endpoint 'TourManagementApi.Controllers.ActivitiesWizardController.GetTicketCategories (TourManagementApi)'
[2025-08-02 16:56:05 INF] Request finished HTTP/1.1 GET http://localhost:5050/ActivitiesWizard/GetTicketCategories?optionId=41 - 200 null application/json; charset=utf-8 64.4777ms
[2025-08-02 16:56:57 INF] Request starting HTTP/1.1 POST http://localhost:5050/ActivitiesWizard/CreateAvailability/42 - application/x-www-form-urlencoded 549
[2025-08-02 16:56:57 INF] Executing endpoint 'TourManagementApi.Controllers.ActivitiesWizardController.CreateAvailability (TourManagementApi)'
[2025-08-02 16:56:57 INF] Route matched with {action = "CreateAvailability", controller = "ActivitiesWizard"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateAvailability(TourManagementApi.Models.ViewModels.CreateAvailabilityViewModel) on controller TourManagementApi.Controllers.ActivitiesWizardController (TourManagementApi).
[2025-08-02 16:56:57 INF] Executing action method TourManagementApi.Controllers.ActivitiesWizardController.CreateAvailability (TourManagementApi) - Validation state: "Valid"
[2025-08-02 16:56:57 INF] Executed DbCommand (25ms) [Parameters=[@__model_ActivityId_0='42', @__model_OptionId_1='41', @__model_StartDate_2='08/02/2025' (DbType = Date), @__model_EndDate_3='08/31/2025' (DbType = Date)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Date]
FROM [Availabilities] AS [a]
WHERE [a].[ActivityId] = @__model_ActivityId_0 AND [a].[OptionId] = @__model_OptionId_1 AND [a].[Date] >= @__model_StartDate_2 AND [a].[Date] <= @__model_EndDate_3
[2025-08-02 16:56:57 INF] Executed DbCommand (32ms) [Parameters=[@p0='42', @p1='10', @p2='08/02/2025' (DbType = Date), @p3='10', @p4='41', @p5='12004' (Nullable = false) (Size = 100), @p6='2025-08-02T09:00:00.0000000+03:00' (Nullable = true), @p7='42', @p8='10', @p9='08/03/2025' (DbType = Date), @p10='10', @p11='41', @p12='12004' (Nullable = false) (Size = 100), @p13='2025-08-03T09:00:00.0000000+03:00' (Nullable = true), @p14='42', @p15='10', @p16='08/04/2025' (DbType = Date), @p17='10', @p18='41', @p19='12004' (Nullable = false) (Size = 100), @p20='2025-08-04T09:00:00.0000000+03:00' (Nullable = true), @p21='42', @p22='10', @p23='08/05/2025' (DbType = Date), @p24='10', @p25='41', @p26='12004' (Nullable = false) (Size = 100), @p27='2025-08-05T09:00:00.0000000+03:00' (Nullable = true), @p28='42', @p29='10', @p30='08/06/2025' (DbType = Date), @p31='10', @p32='41', @p33='12004' (Nullable = false) (Size = 100), @p34='2025-08-06T09:00:00.0000000+03:00' (Nullable = true), @p35='42', @p36='10', @p37='08/07/2025' (DbType = Date), @p38='10', @p39='41', @p40='12004' (Nullable = false) (Size = 100), @p41='2025-08-07T09:00:00.0000000+03:00' (Nullable = true), @p42='42', @p43='10', @p44='08/08/2025' (DbType = Date), @p45='10', @p46='41', @p47='12004' (Nullable = false) (Size = 100), @p48='2025-08-08T09:00:00.0000000+03:00' (Nullable = true), @p49='42', @p50='10', @p51='08/09/2025' (DbType = Date), @p52='10', @p53='41', @p54='12004' (Nullable = false) (Size = 100), @p55='2025-08-09T09:00:00.0000000+03:00' (Nullable = true), @p56='42', @p57='10', @p58='08/10/2025' (DbType = Date), @p59='10', @p60='41', @p61='12004' (Nullable = false) (Size = 100), @p62='2025-08-10T09:00:00.0000000+03:00' (Nullable = true), @p63='42', @p64='10', @p65='08/11/2025' (DbType = Date), @p66='10', @p67='41', @p68='12004' (Nullable = false) (Size = 100), @p69='2025-08-11T09:00:00.0000000+03:00' (Nullable = true), @p70='42', @p71='10', @p72='08/12/2025' (DbType = Date), @p73='10', @p74='41', @p75='12004' (Nullable = false) (Size = 100), @p76='2025-08-12T09:00:00.0000000+03:00' (Nullable = true), @p77='42', @p78='10', @p79='08/13/2025' (DbType = Date), @p80='10', @p81='41', @p82='12004' (Nullable = false) (Size = 100), @p83='2025-08-13T09:00:00.0000000+03:00' (Nullable = true), @p84='42', @p85='10', @p86='08/14/2025' (DbType = Date), @p87='10', @p88='41', @p89='12004' (Nullable = false) (Size = 100), @p90='2025-08-14T09:00:00.0000000+03:00' (Nullable = true), @p91='42', @p92='10', @p93='08/15/2025' (DbType = Date), @p94='10', @p95='41', @p96='12004' (Nullable = false) (Size = 100), @p97='2025-08-15T09:00:00.0000000+03:00' (Nullable = true), @p98='42', @p99='10', @p100='08/16/2025' (DbType = Date), @p101='10', @p102='41', @p103='12004' (Nullable = false) (Size = 100), @p104='2025-08-16T09:00:00.0000000+03:00' (Nullable = true), @p105='42', @p106='10', @p107='08/17/2025' (DbType = Date), @p108='10', @p109='41', @p110='12004' (Nullable = false) (Size = 100), @p111='2025-08-17T09:00:00.0000000+03:00' (Nullable = true), @p112='42', @p113='10', @p114='08/18/2025' (DbType = Date), @p115='10', @p116='41', @p117='12004' (Nullable = false) (Size = 100), @p118='2025-08-18T09:00:00.0000000+03:00' (Nullable = true), @p119='42', @p120='10', @p121='08/19/2025' (DbType = Date), @p122='10', @p123='41', @p124='12004' (Nullable = false) (Size = 100), @p125='2025-08-19T09:00:00.0000000+03:00' (Nullable = true), @p126='42', @p127='10', @p128='08/20/2025' (DbType = Date), @p129='10', @p130='41', @p131='12004' (Nullable = false) (Size = 100), @p132='2025-08-20T09:00:00.0000000+03:00' (Nullable = true), @p133='42', @p134='10', @p135='08/21/2025' (DbType = Date), @p136='10', @p137='41', @p138='12004' (Nullable = false) (Size = 100), @p139='2025-08-21T09:00:00.0000000+03:00' (Nullable = true), @p140='42', @p141='10', @p142='08/22/2025' (DbType = Date), @p143='10', @p144='41', @p145='12004' (Nullable = false) (Size = 100), @p146='2025-08-22T09:00:00.0000000+03:00' (Nullable = true), @p147='42', @p148='10', @p149='08/23/2025' (DbType = Date), @p150='10', @p151='41', @p152='12004' (Nullable = false) (Size = 100), @p153='2025-08-23T09:00:00.0000000+03:00' (Nullable = true), @p154='42', @p155='10', @p156='08/24/2025' (DbType = Date), @p157='10', @p158='41', @p159='12004' (Nullable = false) (Size = 100), @p160='2025-08-24T09:00:00.0000000+03:00' (Nullable = true), @p161='42', @p162='10', @p163='08/25/2025' (DbType = Date), @p164='10', @p165='41', @p166='12004' (Nullable = false) (Size = 100), @p167='2025-08-25T09:00:00.0000000+03:00' (Nullable = true), @p168='42', @p169='10', @p170='08/26/2025' (DbType = Date), @p171='10', @p172='41', @p173='12004' (Nullable = false) (Size = 100), @p174='2025-08-26T09:00:00.0000000+03:00' (Nullable = true), @p175='42', @p176='10', @p177='08/27/2025' (DbType = Date), @p178='10', @p179='41', @p180='12004' (Nullable = false) (Size = 100), @p181='2025-08-27T09:00:00.0000000+03:00' (Nullable = true), @p182='42', @p183='10', @p184='08/28/2025' (DbType = Date), @p185='10', @p186='41', @p187='12004' (Nullable = false) (Size = 100), @p188='2025-08-28T09:00:00.0000000+03:00' (Nullable = true), @p189='42', @p190='10', @p191='08/29/2025' (DbType = Date), @p192='10', @p193='41', @p194='12004' (Nullable = false) (Size = 100), @p195='2025-08-29T09:00:00.0000000+03:00' (Nullable = true), @p196='42', @p197='10', @p198='08/30/2025' (DbType = Date), @p199='10', @p200='41', @p201='12004' (Nullable = false) (Size = 100), @p202='2025-08-30T09:00:00.0000000+03:00' (Nullable = true), @p203='42', @p204='10', @p205='08/31/2025' (DbType = Date), @p206='10', @p207='41', @p208='12004' (Nullable = false) (Size = 100), @p209='2025-08-31T09:00:00.0000000+03:00' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [Availabilities] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, 0),
(@p7, @p8, @p9, @p10, @p11, @p12, @p13, 1),
(@p14, @p15, @p16, @p17, @p18, @p19, @p20, 2),
(@p21, @p22, @p23, @p24, @p25, @p26, @p27, 3),
(@p28, @p29, @p30, @p31, @p32, @p33, @p34, 4),
(@p35, @p36, @p37, @p38, @p39, @p40, @p41, 5),
(@p42, @p43, @p44, @p45, @p46, @p47, @p48, 6),
(@p49, @p50, @p51, @p52, @p53, @p54, @p55, 7),
(@p56, @p57, @p58, @p59, @p60, @p61, @p62, 8),
(@p63, @p64, @p65, @p66, @p67, @p68, @p69, 9),
(@p70, @p71, @p72, @p73, @p74, @p75, @p76, 10),
(@p77, @p78, @p79, @p80, @p81, @p82, @p83, 11),
(@p84, @p85, @p86, @p87, @p88, @p89, @p90, 12),
(@p91, @p92, @p93, @p94, @p95, @p96, @p97, 13),
(@p98, @p99, @p100, @p101, @p102, @p103, @p104, 14),
(@p105, @p106, @p107, @p108, @p109, @p110, @p111, 15),
(@p112, @p113, @p114, @p115, @p116, @p117, @p118, 16),
(@p119, @p120, @p121, @p122, @p123, @p124, @p125, 17),
(@p126, @p127, @p128, @p129, @p130, @p131, @p132, 18),
(@p133, @p134, @p135, @p136, @p137, @p138, @p139, 19),
(@p140, @p141, @p142, @p143, @p144, @p145, @p146, 20),
(@p147, @p148, @p149, @p150, @p151, @p152, @p153, 21),
(@p154, @p155, @p156, @p157, @p158, @p159, @p160, 22),
(@p161, @p162, @p163, @p164, @p165, @p166, @p167, 23),
(@p168, @p169, @p170, @p171, @p172, @p173, @p174, 24),
(@p175, @p176, @p177, @p178, @p179, @p180, @p181, 25),
(@p182, @p183, @p184, @p185, @p186, @p187, @p188, 26),
(@p189, @p190, @p191, @p192, @p193, @p194, @p195, 27),
(@p196, @p197, @p198, @p199, @p200, @p201, @p202, 28),
(@p203, @p204, @p205, @p206, @p207, @p208, @p209, 29)) AS i ([ActivityId], [AvailableCapacity], [Date], [MaximumCapacity], [OptionId], [PartnerSupplierId], [StartTime], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([ActivityId], [AvailableCapacity], [Date], [MaximumCapacity], [OptionId], [PartnerSupplierId], [StartTime])
VALUES (i.[ActivityId], i.[AvailableCapacity], i.[Date], i.[MaximumCapacity], i.[OptionId], i.[PartnerSupplierId], i.[StartTime])
OUTPUT INSERTED.[Id], i._Position;
[2025-08-02 16:56:57 INF] Executed DbCommand (27ms) [Parameters=[@p210='709', @p211=NULL (DbType = Int32), @p212='164', @p213='710', @p214=NULL (DbType = Int32), @p215='164', @p216='711', @p217=NULL (DbType = Int32), @p218='164', @p219='712', @p220=NULL (DbType = Int32), @p221='164', @p222='713', @p223=NULL (DbType = Int32), @p224='164', @p225='714', @p226=NULL (DbType = Int32), @p227='164', @p228='715', @p229=NULL (DbType = Int32), @p230='164', @p231='716', @p232=NULL (DbType = Int32), @p233='164', @p234='717', @p235=NULL (DbType = Int32), @p236='164', @p237='718', @p238=NULL (DbType = Int32), @p239='164', @p240='719', @p241=NULL (DbType = Int32), @p242='164', @p243='720', @p244=NULL (DbType = Int32), @p245='164', @p246='721', @p247=NULL (DbType = Int32), @p248='164', @p249='722', @p250=NULL (DbType = Int32), @p251='164', @p252='723', @p253=NULL (DbType = Int32), @p254='164', @p255='724', @p256=NULL (DbType = Int32), @p257='164', @p258='725', @p259=NULL (DbType = Int32), @p260='164', @p261='726', @p262=NULL (DbType = Int32), @p263='164', @p264='727', @p265=NULL (DbType = Int32), @p266='164', @p267='728', @p268=NULL (DbType = Int32), @p269='164', @p270='729', @p271=NULL (DbType = Int32), @p272='164', @p273='730', @p274=NULL (DbType = Int32), @p275='164', @p276='731', @p277=NULL (DbType = Int32), @p278='164', @p279='732', @p280=NULL (DbType = Int32), @p281='164', @p282='733', @p283=NULL (DbType = Int32), @p284='164', @p285='734', @p286=NULL (DbType = Int32), @p287='164', @p288='735', @p289=NULL (DbType = Int32), @p290='164', @p291='736', @p292=NULL (DbType = Int32), @p293='164', @p294='737', @p295=NULL (DbType = Int32), @p296='164', @p297='738', @p298=NULL (DbType = Int32), @p299='164'], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [TicketCategoryCapacities] USING (
VALUES (@p210, @p211, @p212, 0),
(@p213, @p214, @p215, 1),
(@p216, @p217, @p218, 2),
(@p219, @p220, @p221, 3),
(@p222, @p223, @p224, 4),
(@p225, @p226, @p227, 5),
(@p228, @p229, @p230, 6),
(@p231, @p232, @p233, 7),
(@p234, @p235, @p236, 8),
(@p237, @p238, @p239, 9),
(@p240, @p241, @p242, 10),
(@p243, @p244, @p245, 11),
(@p246, @p247, @p248, 12),
(@p249, @p250, @p251, 13),
(@p252, @p253, @p254, 14),
(@p255, @p256, @p257, 15),
(@p258, @p259, @p260, 16),
(@p261, @p262, @p263, 17),
(@p264, @p265, @p266, 18),
(@p267, @p268, @p269, 19),
(@p270, @p271, @p272, 20),
(@p273, @p274, @p275, 21),
(@p276, @p277, @p278, 22),
(@p279, @p280, @p281, 23),
(@p282, @p283, @p284, 24),
(@p285, @p286, @p287, 25),
(@p288, @p289, @p290, 26),
(@p291, @p292, @p293, 27),
(@p294, @p295, @p296, 28),
(@p297, @p298, @p299, 29)) AS i ([AvailabilityId], [Capacity], [TicketCategoryId], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([AvailabilityId], [Capacity], [TicketCategoryId])
VALUES (i.[AvailabilityId], i.[Capacity], i.[TicketCategoryId])
OUTPUT INSERTED.[Id], i._Position;
[2025-08-02 16:56:57 ERR] ExperienceBank availability notify failed (CreateAvailability)
System.FormatException: Input string was not in a correct format.
   at System.DateTimeFormat.IsValidCustomDateOnlyFormat(ReadOnlySpan`1 format, Boolean throwOnError)
   at System.DateOnly.ToString(String format, IFormatProvider provider)
   at TourManagementApi.Controllers.ActivitiesWizardController.CreateAvailability(CreateAvailabilityViewModel model)
[2025-08-02 16:56:57 INF] Executed action method TourManagementApi.Controllers.ActivitiesWizardController.CreateAvailability (TourManagementApi), returned result Microsoft.AspNetCore.Mvc.RedirectToActionResult in 249.26ms.
[2025-08-02 16:56:57 INF] Executing RedirectResult, redirecting to /.
[2025-08-02 16:56:57 INF] Executed action TourManagementApi.Controllers.ActivitiesWizardController.CreateAvailability (TourManagementApi) in 277.1408ms
[2025-08-02 16:56:57 INF] Executed endpoint 'TourManagementApi.Controllers.ActivitiesWizardController.CreateAvailability (TourManagementApi)'
[2025-08-02 16:56:57 INF] Request finished HTTP/1.1 POST http://localhost:5050/ActivitiesWizard/CreateAvailability/42 - 302 0 null 322.9145ms
[2025-08-02 16:56:57 INF] Request starting HTTP/1.1 GET http://localhost:5050/ - null null
[2025-08-02 16:56:57 INF] Executing endpoint 'TourManagementApi.Controllers.ActivitiesWizardController.Index (TourManagementApi)'
[2025-08-02 16:56:57 INF] Route matched with {action = "Index", controller = "ActivitiesWizard"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Index(System.String) on controller TourManagementApi.Controllers.ActivitiesWizardController (TourManagementApi).
[2025-08-02 16:56:57 INF] Executing action method TourManagementApi.Controllers.ActivitiesWizardController.Index (TourManagementApi) - Validation state: "Invalid"
[2025-08-02 16:56:57 INF] Executed DbCommand (41ms) [Parameters=[@__Id_0='96d2940f09674b0f81d86bc821c69ff6' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[Title], [a].[Description], [a].[Category], [t].[CompanyName], [a].[Label], [a].[Status], [t].[Id], [o].[Id], [o].[ActivityId], [o].[CanBeBookedAfterStartTime], [o].[CutOff], [o].[Duration], [o].[EndTime], [o].[FromDate], [o].[Name], [o].[StartTime], [o].[UntilDate], [o].[Weekdays], [a].[CountryCode], [a].[DestinationCode], [a].[DestinationName], [a].[CreatedAt], [a].[UpdatedAt], [a].[Rating], [a].[IsFreeCancellation], (
    SELECT COUNT(*)
    FROM [Reservations] AS [r]
    WHERE [a].[Id] = [r].[ActivityId]), (
    SELECT COUNT(*)
    FROM [Availabilities] AS [a0]
    WHERE [a].[Id] = [a0].[ActivityId])
FROM [Activities] AS [a]
LEFT JOIN [TourCompanies] AS [t] ON [a].[TourCompanyId] = [t].[Id]
LEFT JOIN [Options] AS [o] ON [a].[Id] = [o].[ActivityId]
WHERE [a].[B2BAgencyId] = @__Id_0
ORDER BY [a].[Id], [t].[Id]
[2025-08-02 16:56:57 INF] Executed action method TourManagementApi.Controllers.ActivitiesWizardController.Index (TourManagementApi), returned result Microsoft.AspNetCore.Mvc.ViewResult in 70.1759ms.
[2025-08-02 16:56:57 INF] Executing ViewResult, running view Index.
[2025-08-02 16:56:57 INF] Executed ViewResult - view Index executed in 3.6231ms.
[2025-08-02 16:56:57 INF] Executed action TourManagementApi.Controllers.ActivitiesWizardController.Index (TourManagementApi) in 83.6949ms
[2025-08-02 16:56:57 INF] Executed endpoint 'TourManagementApi.Controllers.ActivitiesWizardController.Index (TourManagementApi)'
[2025-08-02 16:56:57 INF] Request finished HTTP/1.1 GET http://localhost:5050/ - 200 null text/html; charset=utf-8 111.0337ms
[2025-08-02 16:56:57 INF] Request starting HTTP/1.1 GET http://localhost:5050/_vs/browserLink - null null
[2025-08-02 16:56:58 INF] Request finished HTTP/1.1 GET http://localhost:5050/_vs/browserLink - 200 null text/javascript; charset=UTF-8 7.8523ms
[2025-08-02 16:56:58 INF] Request starting HTTP/1.1 GET http://localhost:5050/_framework/aspnetcore-browser-refresh.js - null null
[2025-08-02 16:56:58 INF] Request finished HTTP/1.1 GET http://localhost:5050/_framework/aspnetcore-browser-refresh.js - 200 13770 application/javascript; charset=utf-8 0.1399ms
[2025-08-02 16:57:23 INF] Request starting HTTP/1.1 GET http://localhost:5050/api/rezdyconnect/availability?apiKey=6f686c1986af4830aefb398dc2525bc6&productCode=PHN0ZK&externalProductCode=42&startTime=2025-08-03T21:00:00Z&endTime=2025-08-03T21:00:00Z&from=2025-08-03T21:00:00Z&to=2025-08-03T21:00:00Z&startTimeLocal=2025-08-03%2000:00:00&endTimeLocal=2025-08-03%2000:00:00&fromLocal=2025-08-03%2000:00:00&toLocal=2025-08-03%2000:00:00 - null null
[2025-08-02 16:57:23 INF] Executing endpoint 'TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi)'
[2025-08-02 16:57:23 INF] Route matched with {action = "GetAvailability", controller = "RezdyConnect"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAvailability(System.String, System.String, System.String, System.DateTime, System.DateTime, System.String, System.String) on controller TourManagementApi.Controllers.Api.RezdyConnectController (TourManagementApi).
[2025-08-02 16:57:23 INF] Executing action method TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi) - Validation state: "Valid"
[2025-08-02 16:57:23 INF] Executed action TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi) in 178.9282ms
[2025-08-02 16:57:23 INF] Executed endpoint 'TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi)'
[2025-08-02 16:57:23 ERR] Bir sistem hatası oluştu. Path: /api/rezdyconnect/availability, CorrelationId: e0633fb4-dddd-4b92-bd2b-d23b4d0b94ac
System.InvalidOperationException: The LINQ expression 'DbSet<Availability>()
    .Where(a => a.ActivityId == __activityId_0 && a.StartTime.HasValue && a.StartTime.Value.UtcDateTime >= __fromUtc_1 && a.StartTime.Value.UtcDateTime <= __toUtc_2)' could not be translated. Either rewrite the query in a form that can be translated, or switch to client evaluation explicitly by inserting a call to 'AsEnumerable', 'AsAsyncEnumerable', 'ToList', or 'ToListAsync'. See https://go.microsoft.com/fwlink/?linkid=2101038 for more information.
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutorExpression[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass11_0`1.<ExecuteCore>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteCore[TResult](Expression query, Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.Execute[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.Execute[TResult](Expression expression)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetEnumerator()
   at System.Collections.Generic.List`1..ctor(IEnumerable`1 collection)
   at System.Linq.Enumerable.ToList[TSource](IEnumerable`1 source)
   at TourManagementApi.Services.AvailabilityService.GetSessions(String productCode, String externalProductCode, DateTime fromUtc, DateTime toUtc)
   at TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability(String apiKey, String productCode, String externalProductCode, DateTime from, DateTime to, String fromLocal, String toLocal)
   at lambda_method1737(Closure, Object, Object[])
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.SyncActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.StatusCodePagesMiddleware.Invoke(HttpContext context)
   at TourManagementApi.Middleware.GlobalExceptionMiddleware.Invoke(HttpContext context)
[2025-08-02 16:57:23 INF] Request finished HTTP/1.1 GET http://localhost:5050/api/rezdyconnect/availability?apiKey=6f686c1986af4830aefb398dc2525bc6&productCode=PHN0ZK&externalProductCode=42&startTime=2025-08-03T21:00:00Z&endTime=2025-08-03T21:00:00Z&from=2025-08-03T21:00:00Z&to=2025-08-03T21:00:00Z&startTimeLocal=2025-08-03%2000:00:00&endTimeLocal=2025-08-03%2000:00:00&fromLocal=2025-08-03%2000:00:00&toLocal=2025-08-03%2000:00:00 - 500 null application/json 330.0091ms
[2025-08-02 16:57:26 INF] Request starting HTTP/1.1 GET http://localhost:5050/api/rezdyconnect/availability?apiKey=6f686c1986af4830aefb398dc2525bc6&productCode=PHN0ZK&externalProductCode=42&startTime=2025-08-03T21:00:00Z&endTime=2025-08-03T21:00:00Z&from=2025-08-03T21:00:00Z&to=2025-08-03T21:00:00Z&startTimeLocal=2025-08-03%2000:00:00&endTimeLocal=2025-08-03%2000:00:00&fromLocal=2025-08-03%2000:00:00&toLocal=2025-08-03%2000:00:00 - null null
[2025-08-02 16:57:26 INF] Executing endpoint 'TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi)'
[2025-08-02 16:57:26 INF] Route matched with {action = "GetAvailability", controller = "RezdyConnect"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAvailability(System.String, System.String, System.String, System.DateTime, System.DateTime, System.String, System.String) on controller TourManagementApi.Controllers.Api.RezdyConnectController (TourManagementApi).
[2025-08-02 16:57:26 INF] Executing action method TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi) - Validation state: "Valid"
[2025-08-02 16:57:26 INF] Executed action TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi) in 126.9714ms
[2025-08-02 16:57:26 INF] Executed endpoint 'TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi)'
[2025-08-02 16:57:26 ERR] Bir sistem hatası oluştu. Path: /api/rezdyconnect/availability, CorrelationId: 3ac55775-6197-4b8d-8ff3-97ca11018d83
System.InvalidOperationException: The LINQ expression 'DbSet<Availability>()
    .Where(a => a.ActivityId == __activityId_0 && a.StartTime.HasValue && a.StartTime.Value.UtcDateTime >= __fromUtc_1 && a.StartTime.Value.UtcDateTime <= __toUtc_2)' could not be translated. Either rewrite the query in a form that can be translated, or switch to client evaluation explicitly by inserting a call to 'AsEnumerable', 'AsAsyncEnumerable', 'ToList', or 'ToListAsync'. See https://go.microsoft.com/fwlink/?linkid=2101038 for more information.
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutorExpression[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass11_0`1.<ExecuteCore>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteCore[TResult](Expression query, Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.Execute[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.Execute[TResult](Expression expression)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetEnumerator()
   at System.Collections.Generic.List`1..ctor(IEnumerable`1 collection)
   at System.Linq.Enumerable.ToList[TSource](IEnumerable`1 source)
   at TourManagementApi.Services.AvailabilityService.GetSessions(String productCode, String externalProductCode, DateTime fromUtc, DateTime toUtc)
   at TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability(String apiKey, String productCode, String externalProductCode, DateTime from, DateTime to, String fromLocal, String toLocal)
   at lambda_method1737(Closure, Object, Object[])
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.SyncActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.StatusCodePagesMiddleware.Invoke(HttpContext context)
   at TourManagementApi.Middleware.GlobalExceptionMiddleware.Invoke(HttpContext context)
[2025-08-02 16:57:26 INF] Request finished HTTP/1.1 GET http://localhost:5050/api/rezdyconnect/availability?apiKey=6f686c1986af4830aefb398dc2525bc6&productCode=PHN0ZK&externalProductCode=42&startTime=2025-08-03T21:00:00Z&endTime=2025-08-03T21:00:00Z&from=2025-08-03T21:00:00Z&to=2025-08-03T21:00:00Z&startTimeLocal=2025-08-03%2000:00:00&endTimeLocal=2025-08-03%2000:00:00&fromLocal=2025-08-03%2000:00:00&toLocal=2025-08-03%2000:00:00 - 500 null application/json 236.1503ms
[2025-08-02 16:57:27 INF] Request starting HTTP/1.1 GET http://localhost:5050/api/rezdyconnect/availability?apiKey=6f686c1986af4830aefb398dc2525bc6&productCode=PHN0ZK&externalProductCode=42&startTime=2025-08-03T21:00:00Z&endTime=2025-08-03T21:00:00Z&from=2025-08-03T21:00:00Z&to=2025-08-03T21:00:00Z&startTimeLocal=2025-08-03%2000:00:00&endTimeLocal=2025-08-03%2000:00:00&fromLocal=2025-08-03%2000:00:00&toLocal=2025-08-03%2000:00:00 - null null
[2025-08-02 16:57:27 INF] Executing endpoint 'TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi)'
[2025-08-02 16:57:27 INF] Route matched with {action = "GetAvailability", controller = "RezdyConnect"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAvailability(System.String, System.String, System.String, System.DateTime, System.DateTime, System.String, System.String) on controller TourManagementApi.Controllers.Api.RezdyConnectController (TourManagementApi).
[2025-08-02 16:57:27 INF] Executing action method TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi) - Validation state: "Valid"
[2025-08-02 16:57:27 INF] Executed action TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi) in 121.4115ms
[2025-08-02 16:57:27 INF] Executed endpoint 'TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi)'
[2025-08-02 16:57:27 ERR] Bir sistem hatası oluştu. Path: /api/rezdyconnect/availability, CorrelationId: a6870d35-10b1-4fbd-9a7a-bcbce1abd7cf
System.InvalidOperationException: The LINQ expression 'DbSet<Availability>()
    .Where(a => a.ActivityId == __activityId_0 && a.StartTime.HasValue && a.StartTime.Value.UtcDateTime >= __fromUtc_1 && a.StartTime.Value.UtcDateTime <= __toUtc_2)' could not be translated. Either rewrite the query in a form that can be translated, or switch to client evaluation explicitly by inserting a call to 'AsEnumerable', 'AsAsyncEnumerable', 'ToList', or 'ToListAsync'. See https://go.microsoft.com/fwlink/?linkid=2101038 for more information.
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutorExpression[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass11_0`1.<ExecuteCore>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteCore[TResult](Expression query, Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.Execute[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.Execute[TResult](Expression expression)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetEnumerator()
   at System.Collections.Generic.List`1..ctor(IEnumerable`1 collection)
   at System.Linq.Enumerable.ToList[TSource](IEnumerable`1 source)
   at TourManagementApi.Services.AvailabilityService.GetSessions(String productCode, String externalProductCode, DateTime fromUtc, DateTime toUtc)
   at TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability(String apiKey, String productCode, String externalProductCode, DateTime from, DateTime to, String fromLocal, String toLocal)
   at lambda_method1737(Closure, Object, Object[])
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.SyncActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.StatusCodePagesMiddleware.Invoke(HttpContext context)
   at TourManagementApi.Middleware.GlobalExceptionMiddleware.Invoke(HttpContext context)
[2025-08-02 16:57:27 INF] Request finished HTTP/1.1 GET http://localhost:5050/api/rezdyconnect/availability?apiKey=6f686c1986af4830aefb398dc2525bc6&productCode=PHN0ZK&externalProductCode=42&startTime=2025-08-03T21:00:00Z&endTime=2025-08-03T21:00:00Z&from=2025-08-03T21:00:00Z&to=2025-08-03T21:00:00Z&startTimeLocal=2025-08-03%2000:00:00&endTimeLocal=2025-08-03%2000:00:00&fromLocal=2025-08-03%2000:00:00&toLocal=2025-08-03%2000:00:00 - 500 null application/json 223.2554ms
[2025-08-02 16:57:39 INF] Request starting HTTP/1.1 GET http://localhost:5050/api/rezdyconnect/availability?apiKey=6f686c1986af4830aefb398dc2525bc6&productCode=PHN0ZK&externalProductCode=42&startTime=2025-08-03T21:00:00Z&endTime=2025-08-03T21:00:00Z&from=2025-08-03T21:00:00Z&to=2025-08-03T21:00:00Z&startTimeLocal=2025-08-03%2000:00:00&endTimeLocal=2025-08-03%2000:00:00&fromLocal=2025-08-03%2000:00:00&toLocal=2025-08-03%2000:00:00 - null null
[2025-08-02 16:57:39 INF] Executing endpoint 'TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi)'
[2025-08-02 16:57:39 INF] Route matched with {action = "GetAvailability", controller = "RezdyConnect"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAvailability(System.String, System.String, System.String, System.DateTime, System.DateTime, System.String, System.String) on controller TourManagementApi.Controllers.Api.RezdyConnectController (TourManagementApi).
[2025-08-02 16:57:39 INF] Executing action method TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi) - Validation state: "Valid"
[2025-08-02 16:58:02 INF] Executed action TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi) in 22951.9342ms
[2025-08-02 16:58:02 INF] Executed endpoint 'TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi)'
[2025-08-02 16:58:02 ERR] Bir sistem hatası oluştu. Path: /api/rezdyconnect/availability, CorrelationId: c873eaba-a8f4-40e3-be5b-cb28b32c992f
System.InvalidOperationException: The LINQ expression 'DbSet<Availability>()
    .Where(a => a.ActivityId == __activityId_0 && a.StartTime.HasValue && a.StartTime.Value.UtcDateTime >= __fromUtc_1 && a.StartTime.Value.UtcDateTime <= __toUtc_2)' could not be translated. Either rewrite the query in a form that can be translated, or switch to client evaluation explicitly by inserting a call to 'AsEnumerable', 'AsAsyncEnumerable', 'ToList', or 'ToListAsync'. See https://go.microsoft.com/fwlink/?linkid=2101038 for more information.
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutorExpression[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass11_0`1.<ExecuteCore>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteCore[TResult](Expression query, Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.Execute[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.Execute[TResult](Expression expression)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetEnumerator()
   at System.Collections.Generic.List`1..ctor(IEnumerable`1 collection)
   at System.Linq.Enumerable.ToList[TSource](IEnumerable`1 source)
   at TourManagementApi.Services.AvailabilityService.GetSessions(String productCode, String externalProductCode, DateTime fromUtc, DateTime toUtc)
   at TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability(String apiKey, String productCode, String externalProductCode, DateTime from, DateTime to, String fromLocal, String toLocal)
   at lambda_method1737(Closure, Object, Object[])
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.SyncActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.StatusCodePagesMiddleware.Invoke(HttpContext context)
   at TourManagementApi.Middleware.GlobalExceptionMiddleware.Invoke(HttpContext context)
[2025-08-02 16:58:02 INF] Request finished HTTP/1.1 GET http://localhost:5050/api/rezdyconnect/availability?apiKey=6f686c1986af4830aefb398dc2525bc6&productCode=PHN0ZK&externalProductCode=42&startTime=2025-08-03T21:00:00Z&endTime=2025-08-03T21:00:00Z&from=2025-08-03T21:00:00Z&to=2025-08-03T21:00:00Z&startTimeLocal=2025-08-03%2000:00:00&endTimeLocal=2025-08-03%2000:00:00&fromLocal=2025-08-03%2000:00:00&toLocal=2025-08-03%2000:00:00 - 500 null application/json 23082.7568ms
[2025-08-02 16:58:20 INF] Request starting HTTP/1.1 GET http://localhost:5050/ - null null
[2025-08-02 16:58:20 INF] Executing endpoint 'TourManagementApi.Controllers.ActivitiesWizardController.Index (TourManagementApi)'
[2025-08-02 16:58:20 INF] Route matched with {action = "Index", controller = "ActivitiesWizard"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Index(System.String) on controller TourManagementApi.Controllers.ActivitiesWizardController (TourManagementApi).
[2025-08-02 16:58:20 INF] Executing action method TourManagementApi.Controllers.ActivitiesWizardController.Index (TourManagementApi) - Validation state: "Invalid"
[2025-08-02 16:58:20 INF] Executed DbCommand (28ms) [Parameters=[@__Id_0='96d2940f09674b0f81d86bc821c69ff6' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[Title], [a].[Description], [a].[Category], [t].[CompanyName], [a].[Label], [a].[Status], [t].[Id], [o].[Id], [o].[ActivityId], [o].[CanBeBookedAfterStartTime], [o].[CutOff], [o].[Duration], [o].[EndTime], [o].[FromDate], [o].[Name], [o].[StartTime], [o].[UntilDate], [o].[Weekdays], [a].[CountryCode], [a].[DestinationCode], [a].[DestinationName], [a].[CreatedAt], [a].[UpdatedAt], [a].[Rating], [a].[IsFreeCancellation], (
    SELECT COUNT(*)
    FROM [Reservations] AS [r]
    WHERE [a].[Id] = [r].[ActivityId]), (
    SELECT COUNT(*)
    FROM [Availabilities] AS [a0]
    WHERE [a].[Id] = [a0].[ActivityId])
FROM [Activities] AS [a]
LEFT JOIN [TourCompanies] AS [t] ON [a].[TourCompanyId] = [t].[Id]
LEFT JOIN [Options] AS [o] ON [a].[Id] = [o].[ActivityId]
WHERE [a].[B2BAgencyId] = @__Id_0
ORDER BY [a].[Id], [t].[Id]
[2025-08-02 16:58:20 INF] Executed action method TourManagementApi.Controllers.ActivitiesWizardController.Index (TourManagementApi), returned result Microsoft.AspNetCore.Mvc.ViewResult in 56.61ms.
[2025-08-02 16:58:20 INF] Executing ViewResult, running view Index.
[2025-08-02 16:58:20 INF] Executed ViewResult - view Index executed in 2.8425ms.
[2025-08-02 16:58:20 INF] Executed action TourManagementApi.Controllers.ActivitiesWizardController.Index (TourManagementApi) in 67.5257ms
[2025-08-02 16:58:20 INF] Executed endpoint 'TourManagementApi.Controllers.ActivitiesWizardController.Index (TourManagementApi)'
[2025-08-02 16:58:20 INF] Request finished HTTP/1.1 GET http://localhost:5050/ - 200 null text/html; charset=utf-8 89.3478ms
[2025-08-02 16:58:20 INF] Request starting HTTP/1.1 GET http://localhost:5050/_vs/browserLink - null null
[2025-08-02 16:58:20 INF] Request starting HTTP/1.1 GET http://localhost:5050/_framework/aspnetcore-browser-refresh.js - null null
[2025-08-02 16:58:20 INF] Request finished HTTP/1.1 GET http://localhost:5050/_framework/aspnetcore-browser-refresh.js - 200 13770 application/javascript; charset=utf-8 0.4012ms
[2025-08-02 16:58:20 INF] Request finished HTTP/1.1 GET http://localhost:5050/_vs/browserLink - 200 null text/javascript; charset=UTF-8 5.9771ms
[2025-08-02 16:58:33 INF] Request starting HTTP/1.1 GET http://localhost:5050/api/rezdyconnect/availability?apiKey=6f686c1986af4830aefb398dc2525bc6&productCode=PHN0ZK&externalProductCode=42&startTime=2025-08-03T21:00:00Z&endTime=2025-08-03T21:00:00Z&from=2025-08-03T21:00:00Z&to=2025-08-03T21:00:00Z&startTimeLocal=2025-08-03%2000:00:00&endTimeLocal=2025-08-03%2000:00:00&fromLocal=2025-08-03%2000:00:00&toLocal=2025-08-03%2000:00:00 - null null
[2025-08-02 16:58:33 INF] Executing endpoint 'TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi)'
[2025-08-02 16:58:33 INF] Route matched with {action = "GetAvailability", controller = "RezdyConnect"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAvailability(System.String, System.String, System.String, System.DateTime, System.DateTime, System.String, System.String) on controller TourManagementApi.Controllers.Api.RezdyConnectController (TourManagementApi).
[2025-08-02 16:58:33 INF] Executing action method TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi) - Validation state: "Valid"
[2025-08-02 16:58:33 INF] Executed DbCommand (29ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ActivityId], [a].[AvailableCapacity], [a].[Date], [a].[MaximumCapacity], [a].[OptionId], [a].[PartnerSupplierId], [a].[StartTime], [o].[Id], [o].[ActivityId], [o].[CanBeBookedAfterStartTime], [o].[CutOff], [o].[Duration], [o].[EndTime], [o].[FromDate], [o].[Name], [o].[StartTime], [o].[UntilDate], [o].[Weekdays], [t].[Id], [t].[Amount], [t].[Currency], [t].[MaxAge], [t].[MaxSeats], [t].[MinAge], [t].[MinSeats], [t].[Name], [t].[OptionId], [t].[PriceType], [t].[Type]
FROM [Availabilities] AS [a]
INNER JOIN [Options] AS [o] ON [a].[OptionId] = [o].[Id]
LEFT JOIN [TicketCategories] AS [t] ON [o].[Id] = [t].[OptionId]
ORDER BY [a].[Id], [o].[Id]
[2025-08-02 16:58:33 INF] Executed action method TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 362.6079ms.
[2025-08-02 16:58:33 INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`2[[<>f__AnonymousType1`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], TourManagementApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[TourManagementApi.Models.Api.RezdyConnectModels.AvailabilitySessionResponse, TourManagementApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-08-02 16:58:33 INF] Executed action TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi) in 375.5657ms
[2025-08-02 16:58:33 INF] Executed endpoint 'TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi)'
[2025-08-02 16:58:33 INF] Request finished HTTP/1.1 GET http://localhost:5050/api/rezdyconnect/availability?apiKey=6f686c1986af4830aefb398dc2525bc6&productCode=PHN0ZK&externalProductCode=42&startTime=2025-08-03T21:00:00Z&endTime=2025-08-03T21:00:00Z&from=2025-08-03T21:00:00Z&to=2025-08-03T21:00:00Z&startTimeLocal=2025-08-03%2000:00:00&endTimeLocal=2025-08-03%2000:00:00&fromLocal=2025-08-03%2000:00:00&toLocal=2025-08-03%2000:00:00 - 200 null application/json; charset=utf-8 404.1043ms
[2025-08-02 16:59:18 INF] Request starting HTTP/1.1 GET http://localhost:5050/api/rezdyconnect/availability?apiKey=6f686c1986af4830aefb398dc2525bc6&productCode=PHN0ZK&externalProductCode=42&startTime=2025-08-04T21:00:00Z&endTime=2025-08-06T21:00:00Z&from=2025-08-04T21:00:00Z&to=2025-08-06T21:00:00Z&startTimeLocal=2025-08-05%2000:00:00&endTimeLocal=2025-08-07%2000:00:00&fromLocal=2025-08-05%2000:00:00&toLocal=2025-08-07%2000:00:00 - null null
[2025-08-02 16:59:18 INF] Executing endpoint 'TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi)'
[2025-08-02 16:59:18 INF] Route matched with {action = "GetAvailability", controller = "RezdyConnect"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAvailability(System.String, System.String, System.String, System.DateTime, System.DateTime, System.String, System.String) on controller TourManagementApi.Controllers.Api.RezdyConnectController (TourManagementApi).
[2025-08-02 16:59:18 INF] Executing action method TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi) - Validation state: "Valid"
[2025-08-02 16:59:18 INF] Executed DbCommand (25ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ActivityId], [a].[AvailableCapacity], [a].[Date], [a].[MaximumCapacity], [a].[OptionId], [a].[PartnerSupplierId], [a].[StartTime], [o].[Id], [o].[ActivityId], [o].[CanBeBookedAfterStartTime], [o].[CutOff], [o].[Duration], [o].[EndTime], [o].[FromDate], [o].[Name], [o].[StartTime], [o].[UntilDate], [o].[Weekdays], [t].[Id], [t].[Amount], [t].[Currency], [t].[MaxAge], [t].[MaxSeats], [t].[MinAge], [t].[MinSeats], [t].[Name], [t].[OptionId], [t].[PriceType], [t].[Type]
FROM [Availabilities] AS [a]
INNER JOIN [Options] AS [o] ON [a].[OptionId] = [o].[Id]
LEFT JOIN [TicketCategories] AS [t] ON [o].[Id] = [t].[OptionId]
ORDER BY [a].[Id], [o].[Id]
[2025-08-02 16:59:18 INF] Executed action method TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 369.4022ms.
[2025-08-02 16:59:18 INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`2[[<>f__AnonymousType1`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], TourManagementApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[TourManagementApi.Models.Api.RezdyConnectModels.AvailabilitySessionResponse, TourManagementApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-08-02 16:59:18 INF] Executed action TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi) in 407.0275ms
[2025-08-02 16:59:18 INF] Executed endpoint 'TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi)'
[2025-08-02 16:59:18 INF] Request finished HTTP/1.1 GET http://localhost:5050/api/rezdyconnect/availability?apiKey=6f686c1986af4830aefb398dc2525bc6&productCode=PHN0ZK&externalProductCode=42&startTime=2025-08-04T21:00:00Z&endTime=2025-08-06T21:00:00Z&from=2025-08-04T21:00:00Z&to=2025-08-06T21:00:00Z&startTimeLocal=2025-08-05%2000:00:00&endTimeLocal=2025-08-07%2000:00:00&fromLocal=2025-08-05%2000:00:00&toLocal=2025-08-07%2000:00:00 - 200 null application/json; charset=utf-8 457.7803ms
[2025-08-02 16:59:49 INF] Request starting HTTP/1.1 GET http://localhost:5050/ - null null
[2025-08-02 16:59:49 INF] Executing endpoint 'TourManagementApi.Controllers.ActivitiesWizardController.Index (TourManagementApi)'
[2025-08-02 16:59:49 INF] Route matched with {action = "Index", controller = "ActivitiesWizard"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Index(System.String) on controller TourManagementApi.Controllers.ActivitiesWizardController (TourManagementApi).
[2025-08-02 16:59:49 INF] Executing action method TourManagementApi.Controllers.ActivitiesWizardController.Index (TourManagementApi) - Validation state: "Invalid"
[2025-08-02 16:59:49 INF] Executed DbCommand (28ms) [Parameters=[@__Id_0='96d2940f09674b0f81d86bc821c69ff6' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[Title], [a].[Description], [a].[Category], [t].[CompanyName], [a].[Label], [a].[Status], [t].[Id], [o].[Id], [o].[ActivityId], [o].[CanBeBookedAfterStartTime], [o].[CutOff], [o].[Duration], [o].[EndTime], [o].[FromDate], [o].[Name], [o].[StartTime], [o].[UntilDate], [o].[Weekdays], [a].[CountryCode], [a].[DestinationCode], [a].[DestinationName], [a].[CreatedAt], [a].[UpdatedAt], [a].[Rating], [a].[IsFreeCancellation], (
    SELECT COUNT(*)
    FROM [Reservations] AS [r]
    WHERE [a].[Id] = [r].[ActivityId]), (
    SELECT COUNT(*)
    FROM [Availabilities] AS [a0]
    WHERE [a].[Id] = [a0].[ActivityId])
FROM [Activities] AS [a]
LEFT JOIN [TourCompanies] AS [t] ON [a].[TourCompanyId] = [t].[Id]
LEFT JOIN [Options] AS [o] ON [a].[Id] = [o].[ActivityId]
WHERE [a].[B2BAgencyId] = @__Id_0
ORDER BY [a].[Id], [t].[Id]
[2025-08-02 16:59:49 INF] Executed action method TourManagementApi.Controllers.ActivitiesWizardController.Index (TourManagementApi), returned result Microsoft.AspNetCore.Mvc.ViewResult in 56.3644ms.
[2025-08-02 16:59:49 INF] Executing ViewResult, running view Index.
[2025-08-02 16:59:49 INF] Executed ViewResult - view Index executed in 3.3076ms.
[2025-08-02 16:59:49 INF] Executed action TourManagementApi.Controllers.ActivitiesWizardController.Index (TourManagementApi) in 71.4591ms
[2025-08-02 16:59:49 INF] Executed endpoint 'TourManagementApi.Controllers.ActivitiesWizardController.Index (TourManagementApi)'
[2025-08-02 16:59:49 INF] Request finished HTTP/1.1 GET http://localhost:5050/ - 200 null text/html; charset=utf-8 109.1994ms
[2025-08-02 16:59:50 INF] Request starting HTTP/1.1 GET http://localhost:5050/_vs/browserLink - null null
[2025-08-02 16:59:50 INF] Request starting HTTP/1.1 GET http://localhost:5050/_framework/aspnetcore-browser-refresh.js - null null
[2025-08-02 16:59:50 INF] Request finished HTTP/1.1 GET http://localhost:5050/_framework/aspnetcore-browser-refresh.js - 200 13770 application/javascript; charset=utf-8 0.2255ms
[2025-08-02 16:59:50 INF] Request finished HTTP/1.1 GET http://localhost:5050/_vs/browserLink - 200 null text/javascript; charset=UTF-8 16.2313ms
[2025-08-02 16:59:50 INF] Request starting HTTP/1.1 GET http://localhost:5050/api/rezdyconnect/availability?apiKey=6f686c1986af4830aefb398dc2525bc6&productCode=PHN0ZK&externalProductCode=42&startTime=2025-08-04T21:00:00Z&endTime=2025-08-06T21:00:00Z&from=2025-08-04T21:00:00Z&to=2025-08-06T21:00:00Z&startTimeLocal=2025-08-05%2000:00:00&endTimeLocal=2025-08-07%2000:00:00&fromLocal=2025-08-05%2000:00:00&toLocal=2025-08-07%2000:00:00 - null null
[2025-08-02 16:59:50 INF] Executing endpoint 'TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi)'
[2025-08-02 16:59:50 INF] Route matched with {action = "GetAvailability", controller = "RezdyConnect"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAvailability(System.String, System.String, System.String, System.DateTime, System.DateTime, System.String, System.String) on controller TourManagementApi.Controllers.Api.RezdyConnectController (TourManagementApi).
[2025-08-02 16:59:50 INF] Executing action method TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi) - Validation state: "Valid"
[2025-08-02 16:59:50 INF] Executed action TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi) in 132.5429ms
[2025-08-02 16:59:51 INF] Executed endpoint 'TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi)'
[2025-08-02 16:59:51 ERR] Bir sistem hatası oluştu. Path: /api/rezdyconnect/availability, CorrelationId: 70ca9d3d-ecda-4be6-ad9a-efe4b6976fc1
System.InvalidOperationException: The LINQ expression 'DbSet<Availability>()
    .Where(a => a.ActivityId == __activityId_0 && a.StartTime.HasValue && a.StartTime.Value.UtcDateTime >= __fromUtc_1 && a.StartTime.Value.UtcDateTime <= __toUtc_2)' could not be translated. Either rewrite the query in a form that can be translated, or switch to client evaluation explicitly by inserting a call to 'AsEnumerable', 'AsAsyncEnumerable', 'ToList', or 'ToListAsync'. See https://go.microsoft.com/fwlink/?linkid=2101038 for more information.
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutorExpression[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass11_0`1.<ExecuteCore>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteCore[TResult](Expression query, Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.Execute[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.Execute[TResult](Expression expression)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetEnumerator()
   at System.Collections.Generic.List`1..ctor(IEnumerable`1 collection)
   at System.Linq.Enumerable.ToList[TSource](IEnumerable`1 source)
   at TourManagementApi.Services.AvailabilityService.GetSessions(String productCode, String externalProductCode, DateTime fromUtc, DateTime toUtc)
   at TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability(String apiKey, String productCode, String externalProductCode, DateTime from, DateTime to, String fromLocal, String toLocal)
   at lambda_method1763(Closure, Object, Object[])
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.SyncActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.StatusCodePagesMiddleware.Invoke(HttpContext context)
   at TourManagementApi.Middleware.GlobalExceptionMiddleware.Invoke(HttpContext context)
[2025-08-02 16:59:51 INF] Request finished HTTP/1.1 GET http://localhost:5050/api/rezdyconnect/availability?apiKey=6f686c1986af4830aefb398dc2525bc6&productCode=PHN0ZK&externalProductCode=42&startTime=2025-08-04T21:00:00Z&endTime=2025-08-06T21:00:00Z&from=2025-08-04T21:00:00Z&to=2025-08-06T21:00:00Z&startTimeLocal=2025-08-05%2000:00:00&endTimeLocal=2025-08-07%2000:00:00&fromLocal=2025-08-05%2000:00:00&toLocal=2025-08-07%2000:00:00 - 500 null application/json 225.0817ms
[2025-08-02 16:59:51 INF] Request starting HTTP/1.1 GET http://localhost:5050/api/rezdyconnect/availability?apiKey=6f686c1986af4830aefb398dc2525bc6&productCode=PHN0ZK&externalProductCode=42&startTime=2025-08-04T21:00:00Z&endTime=2025-08-06T21:00:00Z&from=2025-08-04T21:00:00Z&to=2025-08-06T21:00:00Z&startTimeLocal=2025-08-05%2000:00:00&endTimeLocal=2025-08-07%2000:00:00&fromLocal=2025-08-05%2000:00:00&toLocal=2025-08-07%2000:00:00 - null null
[2025-08-02 16:59:52 INF] Executing endpoint 'TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi)'
[2025-08-02 16:59:52 INF] Route matched with {action = "GetAvailability", controller = "RezdyConnect"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAvailability(System.String, System.String, System.String, System.DateTime, System.DateTime, System.String, System.String) on controller TourManagementApi.Controllers.Api.RezdyConnectController (TourManagementApi).
[2025-08-02 16:59:52 INF] Executing action method TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi) - Validation state: "Valid"
[2025-08-02 16:59:52 INF] Executed action TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi) in 108.3181ms
[2025-08-02 16:59:52 INF] Executed endpoint 'TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi)'
[2025-08-02 16:59:52 ERR] Bir sistem hatası oluştu. Path: /api/rezdyconnect/availability, CorrelationId: 8a7c4c65-2f55-4df9-b9e8-352d1a62f189
System.InvalidOperationException: The LINQ expression 'DbSet<Availability>()
    .Where(a => a.ActivityId == __activityId_0 && a.StartTime.HasValue && a.StartTime.Value.UtcDateTime >= __fromUtc_1 && a.StartTime.Value.UtcDateTime <= __toUtc_2)' could not be translated. Either rewrite the query in a form that can be translated, or switch to client evaluation explicitly by inserting a call to 'AsEnumerable', 'AsAsyncEnumerable', 'ToList', or 'ToListAsync'. See https://go.microsoft.com/fwlink/?linkid=2101038 for more information.
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutorExpression[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass11_0`1.<ExecuteCore>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteCore[TResult](Expression query, Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.Execute[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.Execute[TResult](Expression expression)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetEnumerator()
   at System.Collections.Generic.List`1..ctor(IEnumerable`1 collection)
   at System.Linq.Enumerable.ToList[TSource](IEnumerable`1 source)
   at TourManagementApi.Services.AvailabilityService.GetSessions(String productCode, String externalProductCode, DateTime fromUtc, DateTime toUtc)
   at TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability(String apiKey, String productCode, String externalProductCode, DateTime from, DateTime to, String fromLocal, String toLocal)
   at lambda_method1763(Closure, Object, Object[])
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.SyncActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.StatusCodePagesMiddleware.Invoke(HttpContext context)
   at TourManagementApi.Middleware.GlobalExceptionMiddleware.Invoke(HttpContext context)
[2025-08-02 16:59:52 INF] Request finished HTTP/1.1 GET http://localhost:5050/api/rezdyconnect/availability?apiKey=6f686c1986af4830aefb398dc2525bc6&productCode=PHN0ZK&externalProductCode=42&startTime=2025-08-04T21:00:00Z&endTime=2025-08-06T21:00:00Z&from=2025-08-04T21:00:00Z&to=2025-08-06T21:00:00Z&startTimeLocal=2025-08-05%2000:00:00&endTimeLocal=2025-08-07%2000:00:00&fromLocal=2025-08-05%2000:00:00&toLocal=2025-08-07%2000:00:00 - 500 null application/json 197.3228ms
[2025-08-02 16:59:52 INF] Request starting HTTP/1.1 GET http://localhost:5050/api/rezdyconnect/availability?apiKey=6f686c1986af4830aefb398dc2525bc6&productCode=PHN0ZK&externalProductCode=42&startTime=2025-08-04T21:00:00Z&endTime=2025-08-06T21:00:00Z&from=2025-08-04T21:00:00Z&to=2025-08-06T21:00:00Z&startTimeLocal=2025-08-05%2000:00:00&endTimeLocal=2025-08-07%2000:00:00&fromLocal=2025-08-05%2000:00:00&toLocal=2025-08-07%2000:00:00 - null null
[2025-08-02 16:59:52 INF] Executing endpoint 'TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi)'
[2025-08-02 16:59:52 INF] Route matched with {action = "GetAvailability", controller = "RezdyConnect"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAvailability(System.String, System.String, System.String, System.DateTime, System.DateTime, System.String, System.String) on controller TourManagementApi.Controllers.Api.RezdyConnectController (TourManagementApi).
[2025-08-02 16:59:52 INF] Executing action method TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi) - Validation state: "Valid"
[2025-08-02 16:59:52 INF] Executed action TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi) in 108.7064ms
[2025-08-02 16:59:52 INF] Executed endpoint 'TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi)'
[2025-08-02 16:59:52 ERR] Bir sistem hatası oluştu. Path: /api/rezdyconnect/availability, CorrelationId: 949bc889-955b-45ae-836b-5c88e9727db9
System.InvalidOperationException: The LINQ expression 'DbSet<Availability>()
    .Where(a => a.ActivityId == __activityId_0 && a.StartTime.HasValue && a.StartTime.Value.UtcDateTime >= __fromUtc_1 && a.StartTime.Value.UtcDateTime <= __toUtc_2)' could not be translated. Either rewrite the query in a form that can be translated, or switch to client evaluation explicitly by inserting a call to 'AsEnumerable', 'AsAsyncEnumerable', 'ToList', or 'ToListAsync'. See https://go.microsoft.com/fwlink/?linkid=2101038 for more information.
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutorExpression[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass11_0`1.<ExecuteCore>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteCore[TResult](Expression query, Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.Execute[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.Execute[TResult](Expression expression)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetEnumerator()
   at System.Collections.Generic.List`1..ctor(IEnumerable`1 collection)
   at System.Linq.Enumerable.ToList[TSource](IEnumerable`1 source)
   at TourManagementApi.Services.AvailabilityService.GetSessions(String productCode, String externalProductCode, DateTime fromUtc, DateTime toUtc)
   at TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability(String apiKey, String productCode, String externalProductCode, DateTime from, DateTime to, String fromLocal, String toLocal)
   at lambda_method1763(Closure, Object, Object[])
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.SyncActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.StatusCodePagesMiddleware.Invoke(HttpContext context)
   at TourManagementApi.Middleware.GlobalExceptionMiddleware.Invoke(HttpContext context)
[2025-08-02 16:59:52 INF] Request finished HTTP/1.1 GET http://localhost:5050/api/rezdyconnect/availability?apiKey=6f686c1986af4830aefb398dc2525bc6&productCode=PHN0ZK&externalProductCode=42&startTime=2025-08-04T21:00:00Z&endTime=2025-08-06T21:00:00Z&from=2025-08-04T21:00:00Z&to=2025-08-06T21:00:00Z&startTimeLocal=2025-08-05%2000:00:00&endTimeLocal=2025-08-07%2000:00:00&fromLocal=2025-08-05%2000:00:00&toLocal=2025-08-07%2000:00:00 - 500 null application/json 195.9513ms
[2025-08-02 16:59:53 INF] Request starting HTTP/1.1 GET http://localhost:5050/api/rezdyconnect/availability?apiKey=6f686c1986af4830aefb398dc2525bc6&productCode=PHN0ZK&externalProductCode=42&startTime=2025-08-04T21:00:00Z&endTime=2025-08-06T21:00:00Z&from=2025-08-04T21:00:00Z&to=2025-08-06T21:00:00Z&startTimeLocal=2025-08-05%2000:00:00&endTimeLocal=2025-08-07%2000:00:00&fromLocal=2025-08-05%2000:00:00&toLocal=2025-08-07%2000:00:00 - null null
[2025-08-02 16:59:53 INF] Executing endpoint 'TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi)'
[2025-08-02 16:59:53 INF] Route matched with {action = "GetAvailability", controller = "RezdyConnect"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAvailability(System.String, System.String, System.String, System.DateTime, System.DateTime, System.String, System.String) on controller TourManagementApi.Controllers.Api.RezdyConnectController (TourManagementApi).
[2025-08-02 16:59:53 INF] Executing action method TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi) - Validation state: "Valid"
[2025-08-02 16:59:53 INF] Executed action TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi) in 106.2721ms
[2025-08-02 16:59:53 INF] Executed endpoint 'TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi)'
[2025-08-02 16:59:53 ERR] Bir sistem hatası oluştu. Path: /api/rezdyconnect/availability, CorrelationId: d0b3f7af-44f2-4272-8b56-7a4bed9849af
System.InvalidOperationException: The LINQ expression 'DbSet<Availability>()
    .Where(a => a.ActivityId == __activityId_0 && a.StartTime.HasValue && a.StartTime.Value.UtcDateTime >= __fromUtc_1 && a.StartTime.Value.UtcDateTime <= __toUtc_2)' could not be translated. Either rewrite the query in a form that can be translated, or switch to client evaluation explicitly by inserting a call to 'AsEnumerable', 'AsAsyncEnumerable', 'ToList', or 'ToListAsync'. See https://go.microsoft.com/fwlink/?linkid=2101038 for more information.
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutorExpression[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass11_0`1.<ExecuteCore>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteCore[TResult](Expression query, Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.Execute[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.Execute[TResult](Expression expression)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetEnumerator()
   at System.Collections.Generic.List`1..ctor(IEnumerable`1 collection)
   at System.Linq.Enumerable.ToList[TSource](IEnumerable`1 source)
   at TourManagementApi.Services.AvailabilityService.GetSessions(String productCode, String externalProductCode, DateTime fromUtc, DateTime toUtc)
   at TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability(String apiKey, String productCode, String externalProductCode, DateTime from, DateTime to, String fromLocal, String toLocal)
   at lambda_method1763(Closure, Object, Object[])
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.SyncActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.StatusCodePagesMiddleware.Invoke(HttpContext context)
   at TourManagementApi.Middleware.GlobalExceptionMiddleware.Invoke(HttpContext context)
[2025-08-02 16:59:53 INF] Request finished HTTP/1.1 GET http://localhost:5050/api/rezdyconnect/availability?apiKey=6f686c1986af4830aefb398dc2525bc6&productCode=PHN0ZK&externalProductCode=42&startTime=2025-08-04T21:00:00Z&endTime=2025-08-06T21:00:00Z&from=2025-08-04T21:00:00Z&to=2025-08-06T21:00:00Z&startTimeLocal=2025-08-05%2000:00:00&endTimeLocal=2025-08-07%2000:00:00&fromLocal=2025-08-05%2000:00:00&toLocal=2025-08-07%2000:00:00 - 500 null application/json 193.595ms
[2025-08-02 17:00:32 INF] Request starting HTTP/1.1 GET http://localhost:5050/ - null null
[2025-08-02 17:00:32 INF] Executing endpoint 'TourManagementApi.Controllers.ActivitiesWizardController.Index (TourManagementApi)'
[2025-08-02 17:00:32 INF] Route matched with {action = "Index", controller = "ActivitiesWizard"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Index(System.String) on controller TourManagementApi.Controllers.ActivitiesWizardController (TourManagementApi).
[2025-08-02 17:00:32 INF] Executing action method TourManagementApi.Controllers.ActivitiesWizardController.Index (TourManagementApi) - Validation state: "Invalid"
[2025-08-02 17:00:32 INF] Executed DbCommand (28ms) [Parameters=[@__Id_0='96d2940f09674b0f81d86bc821c69ff6' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[Title], [a].[Description], [a].[Category], [t].[CompanyName], [a].[Label], [a].[Status], [t].[Id], [o].[Id], [o].[ActivityId], [o].[CanBeBookedAfterStartTime], [o].[CutOff], [o].[Duration], [o].[EndTime], [o].[FromDate], [o].[Name], [o].[StartTime], [o].[UntilDate], [o].[Weekdays], [a].[CountryCode], [a].[DestinationCode], [a].[DestinationName], [a].[CreatedAt], [a].[UpdatedAt], [a].[Rating], [a].[IsFreeCancellation], (
    SELECT COUNT(*)
    FROM [Reservations] AS [r]
    WHERE [a].[Id] = [r].[ActivityId]), (
    SELECT COUNT(*)
    FROM [Availabilities] AS [a0]
    WHERE [a].[Id] = [a0].[ActivityId])
FROM [Activities] AS [a]
LEFT JOIN [TourCompanies] AS [t] ON [a].[TourCompanyId] = [t].[Id]
LEFT JOIN [Options] AS [o] ON [a].[Id] = [o].[ActivityId]
WHERE [a].[B2BAgencyId] = @__Id_0
ORDER BY [a].[Id], [t].[Id]
[2025-08-02 17:00:32 INF] Executed action method TourManagementApi.Controllers.ActivitiesWizardController.Index (TourManagementApi), returned result Microsoft.AspNetCore.Mvc.ViewResult in 56.4301ms.
[2025-08-02 17:00:32 INF] Executing ViewResult, running view Index.
[2025-08-02 17:00:32 INF] Executed ViewResult - view Index executed in 2.6301ms.
[2025-08-02 17:00:32 INF] Executed action TourManagementApi.Controllers.ActivitiesWizardController.Index (TourManagementApi) in 66.9967ms
[2025-08-02 17:00:32 INF] Executed endpoint 'TourManagementApi.Controllers.ActivitiesWizardController.Index (TourManagementApi)'
[2025-08-02 17:00:32 INF] Request finished HTTP/1.1 GET http://localhost:5050/ - 200 null text/html; charset=utf-8 94.2194ms
[2025-08-02 17:00:32 INF] Request starting HTTP/1.1 GET http://localhost:5050/_vs/browserLink - null null
[2025-08-02 17:00:32 INF] Request finished HTTP/1.1 GET http://localhost:5050/_vs/browserLink - 200 null text/javascript; charset=UTF-8 4.469ms
[2025-08-02 17:00:32 INF] Request starting HTTP/1.1 GET http://localhost:5050/_framework/aspnetcore-browser-refresh.js - null null
[2025-08-02 17:00:32 INF] Request finished HTTP/1.1 GET http://localhost:5050/_framework/aspnetcore-browser-refresh.js - 200 13770 application/javascript; charset=utf-8 0.1057ms
[2025-08-02 17:00:34 INF] Request starting HTTP/1.1 GET http://localhost:5050/api/rezdyconnect/availability?apiKey=6f686c1986af4830aefb398dc2525bc6&productCode=PHN0ZK&externalProductCode=42&startTime=2025-08-04T21:00:00Z&endTime=2025-08-06T21:00:00Z&from=2025-08-04T21:00:00Z&to=2025-08-06T21:00:00Z&startTimeLocal=2025-08-05%2000:00:00&endTimeLocal=2025-08-07%2000:00:00&fromLocal=2025-08-05%2000:00:00&toLocal=2025-08-07%2000:00:00 - null null
[2025-08-02 17:00:34 INF] Executing endpoint 'TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi)'
[2025-08-02 17:00:34 INF] Route matched with {action = "GetAvailability", controller = "RezdyConnect"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAvailability(System.String, System.String, System.String, System.DateTime, System.DateTime, System.String, System.String) on controller TourManagementApi.Controllers.Api.RezdyConnectController (TourManagementApi).
[2025-08-02 17:00:34 INF] Executing action method TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi) - Validation state: "Valid"
[2025-08-02 17:00:34 INF] Executed DbCommand (44ms) [Parameters=[@__activityId_0='42', @__fromDateOnly_1='08/04/2025' (DbType = Date), @__toDateOnly_2='08/06/2025' (DbType = Date)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ActivityId], [a].[AvailableCapacity], [a].[Date], [a].[MaximumCapacity], [a].[OptionId], [a].[PartnerSupplierId], [a].[StartTime], [o].[Id], [o].[ActivityId], [o].[CanBeBookedAfterStartTime], [o].[CutOff], [o].[Duration], [o].[EndTime], [o].[FromDate], [o].[Name], [o].[StartTime], [o].[UntilDate], [o].[Weekdays], [t].[Id], [t].[Amount], [t].[Currency], [t].[MaxAge], [t].[MaxSeats], [t].[MinAge], [t].[MinSeats], [t].[Name], [t].[OptionId], [t].[PriceType], [t].[Type]
FROM [Availabilities] AS [a]
INNER JOIN [Options] AS [o] ON [a].[OptionId] = [o].[Id]
LEFT JOIN [TicketCategories] AS [t] ON [o].[Id] = [t].[OptionId]
WHERE [a].[ActivityId] = @__activityId_0 AND [a].[Date] >= @__fromDateOnly_1 AND [a].[Date] <= @__toDateOnly_2
ORDER BY [a].[Id], [o].[Id]
[2025-08-02 17:00:34 INF] Executed action method TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 47.5584ms.
[2025-08-02 17:00:34 INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`2[[<>f__AnonymousType1`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], TourManagementApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[TourManagementApi.Models.Api.RezdyConnectModels.AvailabilitySessionResponse, TourManagementApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-08-02 17:00:34 INF] Executed action TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi) in 59.7605ms
[2025-08-02 17:00:34 INF] Executed endpoint 'TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi)'
[2025-08-02 17:00:34 INF] Request finished HTTP/1.1 GET http://localhost:5050/api/rezdyconnect/availability?apiKey=6f686c1986af4830aefb398dc2525bc6&productCode=PHN0ZK&externalProductCode=42&startTime=2025-08-04T21:00:00Z&endTime=2025-08-06T21:00:00Z&from=2025-08-04T21:00:00Z&to=2025-08-06T21:00:00Z&startTimeLocal=2025-08-05%2000:00:00&endTimeLocal=2025-08-07%2000:00:00&fromLocal=2025-08-05%2000:00:00&toLocal=2025-08-07%2000:00:00 - 200 null application/json; charset=utf-8 88.3434ms
[2025-08-02 17:02:16 WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
[2025-08-02 17:02:16 ERR] Veritabanı güncellenirken bir hata oluştu.
System.InvalidOperationException: An error was generated for warning 'Microsoft.EntityFrameworkCore.Migrations.PendingModelChangesWarning': The model for context 'ApplicationDbContext' has pending changes. Add a new migration before updating the database. See https://aka.ms/efcore-docs-pending-changes. This exception can be suppressed or logged by passing event ID 'RelationalEventId.PendingModelChangesWarning' to the 'ConfigureWarnings' method in 'DbContext.OnConfiguring' or 'AddDbContext'.
   at Microsoft.EntityFrameworkCore.Diagnostics.EventDefinition`1.Log[TLoggerCategory](IDiagnosticsLogger`1 logger, TParam arg)
   at Microsoft.EntityFrameworkCore.Diagnostics.RelationalLoggerExtensions.PendingModelChangesWarning(IDiagnosticsLogger`1 diagnostics, Type contextType)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.Migrator.ValidateMigrations(Boolean useTransaction, String targetMigration)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.Migrator.Migrate(String targetMigration)
   at Microsoft.EntityFrameworkCore.RelationalDatabaseFacadeExtensions.Migrate(DatabaseFacade databaseFacade)
   at Program.<Main>$(String[] args) in D:\TFS\Lymranet\Tourism\B2B\HotelWidget\TourManagement\Program.cs:line 160
[2025-08-02 17:02:17 INF] User profile is available. Using 'C:\Users\OZKAN\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2025-08-02 17:02:17 INF] Now listening on: http://localhost:5050
[2025-08-02 17:02:17 INF] Application started. Press Ctrl+C to shut down.
[2025-08-02 17:02:17 INF] Hosting environment: Development
[2025-08-02 17:02:17 INF] Content root path: D:\TFS\Lymranet\Tourism\B2B\HotelWidget\TourManagement
[2025-08-02 17:02:18 INF] Request starting HTTP/1.1 GET http://localhost:5050/api/rezdyconnect/availability?apiKey=6f686c1986af4830aefb398dc2525bc6&productCode=PHN0ZK&externalProductCode=42&startTime=2025-08-04T21:00:00Z&endTime=2025-08-06T21:00:00Z&from=2025-08-04T21:00:00Z&to=2025-08-06T21:00:00Z&startTimeLocal=2025-08-05%2000:00:00&endTimeLocal=2025-08-07%2000:00:00&fromLocal=2025-08-05%2000:00:00&toLocal=2025-08-07%2000:00:00 - null null
[2025-08-02 17:02:19 INF] Executing endpoint 'TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi)'
[2025-08-02 17:02:19 INF] Route matched with {action = "GetAvailability", controller = "RezdyConnect"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAvailability(System.String, System.String, System.String, System.DateTime, System.DateTime, System.String, System.String) on controller TourManagementApi.Controllers.Api.RezdyConnectController (TourManagementApi).
[2025-08-02 17:02:19 INF] Executing action method TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi) - Validation state: "Valid"
[2025-08-02 17:02:19 INF] Executed DbCommand (67ms) [Parameters=[@__activityId_0='42', @__p_1='2025-08-04T21:00:00.0000000+00:00' (Nullable = true), @__p_2='2025-08-06T21:00:00.0000000+00:00' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ActivityId], [a].[AvailableCapacity], [a].[Date], [a].[MaximumCapacity], [a].[OptionId], [a].[PartnerSupplierId], [a].[StartTime], [o].[Id], [o].[ActivityId], [o].[CanBeBookedAfterStartTime], [o].[CutOff], [o].[Duration], [o].[EndTime], [o].[FromDate], [o].[Name], [o].[StartTime], [o].[UntilDate], [o].[Weekdays], [t].[Id], [t].[Amount], [t].[Currency], [t].[MaxAge], [t].[MaxSeats], [t].[MinAge], [t].[MinSeats], [t].[Name], [t].[OptionId], [t].[PriceType], [t].[Type]
FROM [Availabilities] AS [a]
INNER JOIN [Options] AS [o] ON [a].[OptionId] = [o].[Id]
LEFT JOIN [TicketCategories] AS [t] ON [o].[Id] = [t].[OptionId]
WHERE [a].[ActivityId] = @__activityId_0 AND [a].[StartTime] >= @__p_1 AND [a].[StartTime] <= @__p_2
ORDER BY [a].[Id], [o].[Id]
[2025-08-02 17:02:19 INF] Executed action method TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 662.1671ms.
[2025-08-02 17:02:19 INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`2[[<>f__AnonymousType1`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], TourManagementApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[TourManagementApi.Models.Api.RezdyConnectModels.AvailabilitySessionResponse, TourManagementApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-08-02 17:02:19 INF] Executed action TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi) in 734.249ms
[2025-08-02 17:02:19 INF] Executed endpoint 'TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi)'
[2025-08-02 17:02:19 INF] Request finished HTTP/1.1 GET http://localhost:5050/api/rezdyconnect/availability?apiKey=6f686c1986af4830aefb398dc2525bc6&productCode=PHN0ZK&externalProductCode=42&startTime=2025-08-04T21:00:00Z&endTime=2025-08-06T21:00:00Z&from=2025-08-04T21:00:00Z&to=2025-08-06T21:00:00Z&startTimeLocal=2025-08-05%2000:00:00&endTimeLocal=2025-08-07%2000:00:00&fromLocal=2025-08-05%2000:00:00&toLocal=2025-08-07%2000:00:00 - 200 null application/json; charset=utf-8 939.8541ms
[2025-08-02 17:02:21 INF] Request starting HTTP/1.1 GET http://localhost:5050/api/rezdyconnect/availability?apiKey=6f686c1986af4830aefb398dc2525bc6&productCode=PHN0ZK&externalProductCode=42&startTime=2025-08-04T21:00:00Z&endTime=2025-08-06T21:00:00Z&from=2025-08-04T21:00:00Z&to=2025-08-06T21:00:00Z&startTimeLocal=2025-08-05%2000:00:00&endTimeLocal=2025-08-07%2000:00:00&fromLocal=2025-08-05%2000:00:00&toLocal=2025-08-07%2000:00:00 - null null
[2025-08-02 17:02:21 INF] Executing endpoint 'TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi)'
[2025-08-02 17:02:21 INF] Route matched with {action = "GetAvailability", controller = "RezdyConnect"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAvailability(System.String, System.String, System.String, System.DateTime, System.DateTime, System.String, System.String) on controller TourManagementApi.Controllers.Api.RezdyConnectController (TourManagementApi).
[2025-08-02 17:02:21 INF] Executing action method TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi) - Validation state: "Valid"
[2025-08-02 17:02:22 INF] Executed DbCommand (27ms) [Parameters=[@__activityId_0='42', @__p_1='2025-08-04T21:00:00.0000000+00:00' (Nullable = true), @__p_2='2025-08-06T21:00:00.0000000+00:00' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ActivityId], [a].[AvailableCapacity], [a].[Date], [a].[MaximumCapacity], [a].[OptionId], [a].[PartnerSupplierId], [a].[StartTime], [o].[Id], [o].[ActivityId], [o].[CanBeBookedAfterStartTime], [o].[CutOff], [o].[Duration], [o].[EndTime], [o].[FromDate], [o].[Name], [o].[StartTime], [o].[UntilDate], [o].[Weekdays], [t].[Id], [t].[Amount], [t].[Currency], [t].[MaxAge], [t].[MaxSeats], [t].[MinAge], [t].[MinSeats], [t].[Name], [t].[OptionId], [t].[PriceType], [t].[Type]
FROM [Availabilities] AS [a]
INNER JOIN [Options] AS [o] ON [a].[OptionId] = [o].[Id]
LEFT JOIN [TicketCategories] AS [t] ON [o].[Id] = [t].[OptionId]
WHERE [a].[ActivityId] = @__activityId_0 AND [a].[StartTime] >= @__p_1 AND [a].[StartTime] <= @__p_2
ORDER BY [a].[Id], [o].[Id]
[2025-08-02 17:02:22 INF] Executed action method TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 57.254ms.
[2025-08-02 17:02:22 INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`2[[<>f__AnonymousType1`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], TourManagementApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[TourManagementApi.Models.Api.RezdyConnectModels.AvailabilitySessionResponse, TourManagementApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-08-02 17:02:22 INF] Executed action TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi) in 69.8805ms
[2025-08-02 17:02:22 INF] Executed endpoint 'TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi)'
[2025-08-02 17:02:22 INF] Request finished HTTP/1.1 GET http://localhost:5050/api/rezdyconnect/availability?apiKey=6f686c1986af4830aefb398dc2525bc6&productCode=PHN0ZK&externalProductCode=42&startTime=2025-08-04T21:00:00Z&endTime=2025-08-06T21:00:00Z&from=2025-08-04T21:00:00Z&to=2025-08-06T21:00:00Z&startTimeLocal=2025-08-05%2000:00:00&endTimeLocal=2025-08-07%2000:00:00&fromLocal=2025-08-05%2000:00:00&toLocal=2025-08-07%2000:00:00 - 200 null application/json; charset=utf-8 95.8619ms
[2025-08-02 17:06:05 INF] Request starting HTTP/1.1 GET http://localhost:5050/ - null null
[2025-08-02 17:06:05 INF] Executing endpoint 'TourManagementApi.Controllers.ActivitiesWizardController.Index (TourManagementApi)'
[2025-08-02 17:06:05 INF] Route matched with {action = "Index", controller = "ActivitiesWizard"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Index(System.String) on controller TourManagementApi.Controllers.ActivitiesWizardController (TourManagementApi).
[2025-08-02 17:06:05 INF] Executing action method TourManagementApi.Controllers.ActivitiesWizardController.Index (TourManagementApi) - Validation state: "Invalid"
[2025-08-02 17:06:05 INF] Accessing expired session, Key:9197a2e7-8108-f16f-1ec9-56dc9812da82
[2025-08-02 17:06:05 INF] Executed DbCommand (29ms) [Parameters=[@__Id_0='96d2940f09674b0f81d86bc821c69ff6' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[Title], [a].[Description], [a].[Category], [t].[CompanyName], [a].[Label], [a].[Status], [t].[Id], [o].[Id], [o].[ActivityId], [o].[CanBeBookedAfterStartTime], [o].[CutOff], [o].[Duration], [o].[EndTime], [o].[FromDate], [o].[Name], [o].[StartTime], [o].[UntilDate], [o].[Weekdays], [a].[CountryCode], [a].[DestinationCode], [a].[DestinationName], [a].[CreatedAt], [a].[UpdatedAt], [a].[Rating], [a].[IsFreeCancellation], (
    SELECT COUNT(*)
    FROM [Reservations] AS [r]
    WHERE [a].[Id] = [r].[ActivityId]), (
    SELECT COUNT(*)
    FROM [Availabilities] AS [a0]
    WHERE [a].[Id] = [a0].[ActivityId])
FROM [Activities] AS [a]
LEFT JOIN [TourCompanies] AS [t] ON [a].[TourCompanyId] = [t].[Id]
LEFT JOIN [Options] AS [o] ON [a].[Id] = [o].[ActivityId]
WHERE [a].[B2BAgencyId] = @__Id_0
ORDER BY [a].[Id], [t].[Id]
[2025-08-02 17:06:05 INF] Executed action method TourManagementApi.Controllers.ActivitiesWizardController.Index (TourManagementApi), returned result Microsoft.AspNetCore.Mvc.ViewResult in 128.6042ms.
[2025-08-02 17:06:07 INF] Executing ViewResult, running view Index.
[2025-08-02 17:06:07 INF] Executed ViewResult - view Index executed in 2149.7006ms.
[2025-08-02 17:06:07 INF] Executed action TourManagementApi.Controllers.ActivitiesWizardController.Index (TourManagementApi) in 2298.1671ms
[2025-08-02 17:06:07 INF] Executed endpoint 'TourManagementApi.Controllers.ActivitiesWizardController.Index (TourManagementApi)'
[2025-08-02 17:06:07 INF] Session started; Key:9197a2e7-8108-f16f-1ec9-56dc9812da82, Id:7ff50943-94d8-4ddc-ac22-d339f613e036
[2025-08-02 17:06:07 INF] Request finished HTTP/1.1 GET http://localhost:5050/ - 200 null text/html; charset=utf-8 2404.9749ms
[2025-08-02 17:06:07 INF] Request starting HTTP/1.1 GET http://localhost:5050/_vs/browserLink - null null
[2025-08-02 17:06:07 INF] Request finished HTTP/1.1 GET http://localhost:5050/_vs/browserLink - 200 null text/javascript; charset=UTF-8 25.8049ms
[2025-08-02 17:06:07 INF] Request starting HTTP/1.1 GET http://localhost:5050/_framework/aspnetcore-browser-refresh.js - null null
[2025-08-02 17:06:07 INF] Request finished HTTP/1.1 GET http://localhost:5050/_framework/aspnetcore-browser-refresh.js - 200 13770 application/javascript; charset=utf-8 1.696ms
[2025-08-02 17:06:12 INF] Request starting HTTP/1.1 GET http://localhost:5050/ActivitiesWizard/Availabilities?activityId=42 - null null
[2025-08-02 17:06:12 INF] Executing endpoint 'TourManagementApi.Controllers.ActivitiesWizardController.Availabilities (TourManagementApi)'
[2025-08-02 17:06:12 INF] Route matched with {action = "Availabilities", controller = "ActivitiesWizard"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Availabilities(Int32) on controller TourManagementApi.Controllers.ActivitiesWizardController (TourManagementApi).
[2025-08-02 17:06:12 INF] Executing action method TourManagementApi.Controllers.ActivitiesWizardController.Availabilities (TourManagementApi) - Validation state: "Valid"
[2025-08-02 17:06:12 WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
[2025-08-02 17:06:12 INF] Executed DbCommand (47ms) [Parameters=[@__activityId_0='42'], CommandType='"Text"', CommandTimeout='30']
SELECT [a1].[Id], [a1].[B2BAgencyId], [a1].[Category], [a1].[ContactInfo_Email], [a1].[ContactInfoIsNull], [a1].[ContactInfo_Name], [a1].[ContactInfo_Phone], [a1].[ContactInfo_Role], [a1].[CountryCode], [a1].[CoverImage], [a1].[CreatedAt], [a1].[Description], [a1].[DestinationCode], [a1].[DestinationName], [a1].[DetailsUrl], [a1].[Duration], [a1].[Exclusions], [a1].[ExclusionsJson], [a1].[GalleryImages], [a1].[GuestFields], [a1].[GuestFieldsJson], [a1].[Highlights], [a1].[ImportantInfo], [a1].[ImportantInfoJson], [a1].[Inclusions], [a1].[InclusionsJson], [a1].[IsActive], [a1].[IsFreeCancellation], [a1].[Itinerary], [a1].[Label], [a1].[Media_Videos], [a1].[PartnerSupplierId], [a1].[PreviewImage], [a1].[Rating], [a1].[Status], [a1].[Title], [a1].[TotalRatingCount], [a1].[TourCompanyId], [a1].[UpdatedAt], [s0].[Id], [s0].[ActivityId], [s0].[AvailableCapacity], [s0].[Date], [s0].[MaximumCapacity], [s0].[OptionId], [s0].[PartnerSupplierId], [s0].[StartTime], [s0].[Id0], [s0].[ActivityId0], [s0].[CanBeBookedAfterStartTime], [s0].[CutOff], [s0].[Duration], [s0].[EndTime], [s0].[FromDate], [s0].[Name], [s0].[StartTime0], [s0].[UntilDate], [s0].[Weekdays], [s0].[Id1], [s0].[AvailabilityId], [s0].[Capacity], [s0].[TicketCategoryId], [s0].[Id00], [s0].[Amount], [s0].[Currency], [s0].[MaxAge], [s0].[MaxSeats], [s0].[MinAge], [s0].[MinSeats], [s0].[Name0], [s0].[OptionId0], [s0].[PriceType], [s0].[Type]
FROM (
    SELECT TOP(1) [a].[Id], [a].[B2BAgencyId], [a].[Category], [a].[ContactInfo_Email], [a].[ContactInfoIsNull], [a].[ContactInfo_Name], [a].[ContactInfo_Phone], [a].[ContactInfo_Role], [a].[CountryCode], [a].[CoverImage], [a].[CreatedAt], [a].[Description], [a].[DestinationCode], [a].[DestinationName], [a].[DetailsUrl], [a].[Duration], [a].[Exclusions], [a].[ExclusionsJson], [a].[GalleryImages], [a].[GuestFields], [a].[GuestFieldsJson], [a].[Highlights], [a].[ImportantInfo], [a].[ImportantInfoJson], [a].[Inclusions], [a].[InclusionsJson], [a].[IsActive], [a].[IsFreeCancellation], [a].[Itinerary], [a].[Label], [a].[Media_Videos], [a].[PartnerSupplierId], [a].[PreviewImage], [a].[Rating], [a].[Status], [a].[Title], [a].[TotalRatingCount], [a].[TourCompanyId], [a].[UpdatedAt]
    FROM [Activities] AS [a]
    WHERE [a].[Id] = @__activityId_0
) AS [a1]
LEFT JOIN (
    SELECT [a0].[Id], [a0].[ActivityId], [a0].[AvailableCapacity], [a0].[Date], [a0].[MaximumCapacity], [a0].[OptionId], [a0].[PartnerSupplierId], [a0].[StartTime], [o].[Id] AS [Id0], [o].[ActivityId] AS [ActivityId0], [o].[CanBeBookedAfterStartTime], [o].[CutOff], [o].[Duration], [o].[EndTime], [o].[FromDate], [o].[Name], [o].[StartTime] AS [StartTime0], [o].[UntilDate], [o].[Weekdays], [s].[Id] AS [Id1], [s].[AvailabilityId], [s].[Capacity], [s].[TicketCategoryId], [s].[Id0] AS [Id00], [s].[Amount], [s].[Currency], [s].[MaxAge], [s].[MaxSeats], [s].[MinAge], [s].[MinSeats], [s].[Name] AS [Name0], [s].[OptionId] AS [OptionId0], [s].[PriceType], [s].[Type]
    FROM [Availabilities] AS [a0]
    INNER JOIN [Options] AS [o] ON [a0].[OptionId] = [o].[Id]
    LEFT JOIN (
        SELECT [t].[Id], [t].[AvailabilityId], [t].[Capacity], [t].[TicketCategoryId], [t0].[Id] AS [Id0], [t0].[Amount], [t0].[Currency], [t0].[MaxAge], [t0].[MaxSeats], [t0].[MinAge], [t0].[MinSeats], [t0].[Name], [t0].[OptionId], [t0].[PriceType], [t0].[Type]
        FROM [TicketCategoryCapacities] AS [t]
        INNER JOIN [TicketCategories] AS [t0] ON [t].[TicketCategoryId] = [t0].[Id]
    ) AS [s] ON [a0].[Id] = [s].[AvailabilityId]
) AS [s0] ON [a1].[Id] = [s0].[ActivityId]
ORDER BY [a1].[Id], [s0].[Id], [s0].[Id0], [s0].[Id1]
[2025-08-02 17:06:12 INF] Executed action method TourManagementApi.Controllers.ActivitiesWizardController.Availabilities (TourManagementApi), returned result Microsoft.AspNetCore.Mvc.ViewResult in 372.807ms.
[2025-08-02 17:06:12 INF] Executing ViewResult, running view Availabilities.
[2025-08-02 17:06:12 INF] Executed ViewResult - view Availabilities executed in 185.3195ms.
[2025-08-02 17:06:12 INF] Executed action TourManagementApi.Controllers.ActivitiesWizardController.Availabilities (TourManagementApi) in 569.827ms
[2025-08-02 17:06:12 INF] Executed endpoint 'TourManagementApi.Controllers.ActivitiesWizardController.Availabilities (TourManagementApi)'
[2025-08-02 17:06:12 INF] Request finished HTTP/1.1 GET http://localhost:5050/ActivitiesWizard/Availabilities?activityId=42 - 200 null text/html; charset=utf-8 602.4294ms
[2025-08-02 17:06:12 INF] Request starting HTTP/1.1 GET http://localhost:5050/_vs/browserLink - null null
[2025-08-02 17:06:12 INF] Request starting HTTP/1.1 GET http://localhost:5050/_framework/aspnetcore-browser-refresh.js - null null
[2025-08-02 17:06:12 INF] Request finished HTTP/1.1 GET http://localhost:5050/_framework/aspnetcore-browser-refresh.js - 200 13770 application/javascript; charset=utf-8 0.3455ms
[2025-08-02 17:06:12 INF] Request finished HTTP/1.1 GET http://localhost:5050/_vs/browserLink - 200 null text/javascript; charset=UTF-8 21.3909ms
[2025-08-02 17:06:13 INF] Request starting HTTP/1.1 GET http://localhost:5050/ - null null
[2025-08-02 17:06:13 INF] Executing endpoint 'TourManagementApi.Controllers.ActivitiesWizardController.Index (TourManagementApi)'
[2025-08-02 17:06:13 INF] Route matched with {action = "Index", controller = "ActivitiesWizard"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Index(System.String) on controller TourManagementApi.Controllers.ActivitiesWizardController (TourManagementApi).
[2025-08-02 17:06:13 INF] Executing action method TourManagementApi.Controllers.ActivitiesWizardController.Index (TourManagementApi) - Validation state: "Invalid"
[2025-08-02 17:06:13 INF] Executed DbCommand (28ms) [Parameters=[@__Id_0='96d2940f09674b0f81d86bc821c69ff6' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[Title], [a].[Description], [a].[Category], [t].[CompanyName], [a].[Label], [a].[Status], [t].[Id], [o].[Id], [o].[ActivityId], [o].[CanBeBookedAfterStartTime], [o].[CutOff], [o].[Duration], [o].[EndTime], [o].[FromDate], [o].[Name], [o].[StartTime], [o].[UntilDate], [o].[Weekdays], [a].[CountryCode], [a].[DestinationCode], [a].[DestinationName], [a].[CreatedAt], [a].[UpdatedAt], [a].[Rating], [a].[IsFreeCancellation], (
    SELECT COUNT(*)
    FROM [Reservations] AS [r]
    WHERE [a].[Id] = [r].[ActivityId]), (
    SELECT COUNT(*)
    FROM [Availabilities] AS [a0]
    WHERE [a].[Id] = [a0].[ActivityId])
FROM [Activities] AS [a]
LEFT JOIN [TourCompanies] AS [t] ON [a].[TourCompanyId] = [t].[Id]
LEFT JOIN [Options] AS [o] ON [a].[Id] = [o].[ActivityId]
WHERE [a].[B2BAgencyId] = @__Id_0
ORDER BY [a].[Id], [t].[Id]
[2025-08-02 17:06:13 INF] Executed action method TourManagementApi.Controllers.ActivitiesWizardController.Index (TourManagementApi), returned result Microsoft.AspNetCore.Mvc.ViewResult in 62.4717ms.
[2025-08-02 17:06:13 INF] Executing ViewResult, running view Index.
[2025-08-02 17:06:13 INF] Executed ViewResult - view Index executed in 2.3099ms.
[2025-08-02 17:06:13 INF] Executed action TourManagementApi.Controllers.ActivitiesWizardController.Index (TourManagementApi) in 73.1274ms
[2025-08-02 17:06:13 INF] Executed endpoint 'TourManagementApi.Controllers.ActivitiesWizardController.Index (TourManagementApi)'
[2025-08-02 17:06:13 INF] Request finished HTTP/1.1 GET http://localhost:5050/ - 200 null text/html; charset=utf-8 95.0324ms
[2025-08-02 17:06:13 INF] Request starting HTTP/1.1 GET http://localhost:5050/_framework/aspnetcore-browser-refresh.js - null null
[2025-08-02 17:06:13 INF] Request finished HTTP/1.1 GET http://localhost:5050/_framework/aspnetcore-browser-refresh.js - 200 13770 application/javascript; charset=utf-8 0.191ms
[2025-08-02 17:06:18 INF] Request starting HTTP/1.1 GET http://localhost:5050/Options?activityId=42 - null null
[2025-08-02 17:06:18 INF] Executing endpoint 'TourManagementApi.Controllers.OptionsController.Index (TourManagementApi)'
[2025-08-02 17:06:18 INF] Route matched with {action = "Index", controller = "Options"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index(System.Nullable`1[System.Int32]) on controller TourManagementApi.Controllers.OptionsController (TourManagementApi).
[2025-08-02 17:06:18 INF] Executing action method TourManagementApi.Controllers.OptionsController.Index (TourManagementApi) - Validation state: "Valid"
[2025-08-02 17:06:18 INF] Executed DbCommand (27ms) [Parameters=[@__activityId_0='42' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[B2BAgencyId], [a].[Category], [a].[ContactInfo_Email], [a].[ContactInfoIsNull], [a].[ContactInfo_Name], [a].[ContactInfo_Phone], [a].[ContactInfo_Role], [a].[CountryCode], [a].[CoverImage], [a].[CreatedAt], [a].[Description], [a].[DestinationCode], [a].[DestinationName], [a].[DetailsUrl], [a].[Duration], [a].[Exclusions], [a].[ExclusionsJson], [a].[GalleryImages], [a].[GuestFields], [a].[GuestFieldsJson], [a].[Highlights], [a].[ImportantInfo], [a].[ImportantInfoJson], [a].[Inclusions], [a].[InclusionsJson], [a].[IsActive], [a].[IsFreeCancellation], [a].[Itinerary], [a].[Label], [a].[Media_Videos], [a].[PartnerSupplierId], [a].[PreviewImage], [a].[Rating], [a].[Status], [a].[Title], [a].[TotalRatingCount], [a].[TourCompanyId], [a].[UpdatedAt]
FROM [Activities] AS [a]
WHERE [a].[Id] = @__activityId_0
[2025-08-02 17:06:19 INF] Executed DbCommand (25ms) [Parameters=[@__activityId_0='42' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[ActivityId], [o].[CanBeBookedAfterStartTime], [o].[CutOff], [o].[Duration], [o].[EndTime], [o].[FromDate], [o].[Name], [o].[StartTime], [o].[UntilDate], [o].[Weekdays]
FROM [Options] AS [o]
WHERE [o].[ActivityId] = @__activityId_0
[2025-08-02 17:06:19 INF] Executed action method TourManagementApi.Controllers.OptionsController.Index (TourManagementApi), returned result Microsoft.AspNetCore.Mvc.ViewResult in 179.0005ms.
[2025-08-02 17:06:19 INF] Executing ViewResult, running view Index.
[2025-08-02 17:06:19 INF] Executed ViewResult - view Index executed in 229.0209ms.
[2025-08-02 17:06:19 INF] Executed action TourManagementApi.Controllers.OptionsController.Index (TourManagementApi) in 434.1051ms
[2025-08-02 17:06:19 INF] Executed endpoint 'TourManagementApi.Controllers.OptionsController.Index (TourManagementApi)'
[2025-08-02 17:06:19 INF] Request finished HTTP/1.1 GET http://localhost:5050/Options?activityId=42 - 200 null text/html; charset=utf-8 456.3078ms
[2025-08-02 17:06:19 INF] Request starting HTTP/1.1 GET http://localhost:5050/_vs/browserLink - null null
[2025-08-02 17:06:19 INF] Request starting HTTP/1.1 GET http://localhost:5050/_framework/aspnetcore-browser-refresh.js - null null
[2025-08-02 17:06:19 INF] Request finished HTTP/1.1 GET http://localhost:5050/_framework/aspnetcore-browser-refresh.js - 200 13770 application/javascript; charset=utf-8 0.2113ms
[2025-08-02 17:06:19 INF] Request finished HTTP/1.1 GET http://localhost:5050/_vs/browserLink - 200 null text/javascript; charset=UTF-8 10.8303ms
[2025-08-02 17:06:21 INF] Request starting HTTP/1.1 GET http://localhost:5050/Options/Edit/41 - null null
[2025-08-02 17:06:21 INF] Executing endpoint 'TourManagementApi.Controllers.OptionsController.Edit (TourManagementApi)'
[2025-08-02 17:06:21 INF] Route matched with {action = "Edit", controller = "Options"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Edit(System.Nullable`1[System.Int32]) on controller TourManagementApi.Controllers.OptionsController (TourManagementApi).
[2025-08-02 17:06:21 INF] Executing action method TourManagementApi.Controllers.OptionsController.Edit (TourManagementApi) - Validation state: "Valid"
[2025-08-02 17:06:21 WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
[2025-08-02 17:06:21 INF] Executed DbCommand (26ms) [Parameters=[@__id_0='41' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT [o1].[Id], [o1].[ActivityId], [o1].[CanBeBookedAfterStartTime], [o1].[CutOff], [o1].[Duration], [o1].[EndTime], [o1].[FromDate], [o1].[Name], [o1].[StartTime], [o1].[UntilDate], [o1].[Weekdays], [o0].[Id], [o0].[FromTime], [o0].[OptionId], [o0].[ToTime], [t].[Id], [t].[Amount], [t].[Currency], [t].[MaxAge], [t].[MaxSeats], [t].[MinAge], [t].[MinSeats], [t].[Name], [t].[OptionId], [t].[PriceType], [t].[Type]
FROM (
    SELECT TOP(1) [o].[Id], [o].[ActivityId], [o].[CanBeBookedAfterStartTime], [o].[CutOff], [o].[Duration], [o].[EndTime], [o].[FromDate], [o].[Name], [o].[StartTime], [o].[UntilDate], [o].[Weekdays]
    FROM [Options] AS [o]
    WHERE [o].[Id] = @__id_0
) AS [o1]
LEFT JOIN [OpeningHours] AS [o0] ON [o1].[Id] = [o0].[OptionId]
LEFT JOIN [TicketCategories] AS [t] ON [o1].[Id] = [t].[OptionId]
ORDER BY [o1].[Id], [o0].[Id]
[2025-08-02 17:06:21 INF] Executed action method TourManagementApi.Controllers.OptionsController.Edit (TourManagementApi), returned result Microsoft.AspNetCore.Mvc.ViewResult in 57.4292ms.
[2025-08-02 17:06:21 INF] Executing ViewResult, running view Edit.
[2025-08-02 17:06:21 INF] Executed ViewResult - view Edit executed in 188.0776ms.
[2025-08-02 17:06:21 INF] Executed action TourManagementApi.Controllers.OptionsController.Edit (TourManagementApi) in 254.2723ms
[2025-08-02 17:06:21 INF] Executed endpoint 'TourManagementApi.Controllers.OptionsController.Edit (TourManagementApi)'
[2025-08-02 17:06:21 INF] Request finished HTTP/1.1 GET http://localhost:5050/Options/Edit/41 - 200 null text/html; charset=utf-8 276.7778ms
[2025-08-02 17:06:21 INF] Request starting HTTP/1.1 GET http://localhost:5050/_framework/aspnetcore-browser-refresh.js - null null
[2025-08-02 17:06:21 INF] Request finished HTTP/1.1 GET http://localhost:5050/_framework/aspnetcore-browser-refresh.js - 200 13770 application/javascript; charset=utf-8 0.4907ms
[2025-08-02 17:06:21 INF] Request starting HTTP/1.1 GET http://localhost:5050/_vs/browserLink - null null
[2025-08-02 17:06:21 INF] Request finished HTTP/1.1 GET http://localhost:5050/_vs/browserLink - 200 null text/javascript; charset=UTF-8 10.4528ms
[2025-08-02 17:06:25 INF] Request starting HTTP/1.1 GET http://localhost:5050/_framework/aspnetcore-browser-refresh.js - null null
[2025-08-02 17:06:25 INF] Request finished HTTP/1.1 GET http://localhost:5050/_framework/aspnetcore-browser-refresh.js - 200 13770 application/javascript; charset=utf-8 0.281ms
[2025-08-02 17:06:27 INF] Request starting HTTP/1.1 GET http://localhost:5050/Options/Edit/42 - null null
[2025-08-02 17:06:27 INF] Executing endpoint 'TourManagementApi.Controllers.OptionsController.Edit (TourManagementApi)'
[2025-08-02 17:06:27 INF] Route matched with {action = "Edit", controller = "Options"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Edit(System.Nullable`1[System.Int32]) on controller TourManagementApi.Controllers.OptionsController (TourManagementApi).
[2025-08-02 17:06:27 INF] Executing action method TourManagementApi.Controllers.OptionsController.Edit (TourManagementApi) - Validation state: "Valid"
[2025-08-02 17:06:27 INF] Executed DbCommand (26ms) [Parameters=[@__id_0='42' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT [o1].[Id], [o1].[ActivityId], [o1].[CanBeBookedAfterStartTime], [o1].[CutOff], [o1].[Duration], [o1].[EndTime], [o1].[FromDate], [o1].[Name], [o1].[StartTime], [o1].[UntilDate], [o1].[Weekdays], [o0].[Id], [o0].[FromTime], [o0].[OptionId], [o0].[ToTime], [t].[Id], [t].[Amount], [t].[Currency], [t].[MaxAge], [t].[MaxSeats], [t].[MinAge], [t].[MinSeats], [t].[Name], [t].[OptionId], [t].[PriceType], [t].[Type]
FROM (
    SELECT TOP(1) [o].[Id], [o].[ActivityId], [o].[CanBeBookedAfterStartTime], [o].[CutOff], [o].[Duration], [o].[EndTime], [o].[FromDate], [o].[Name], [o].[StartTime], [o].[UntilDate], [o].[Weekdays]
    FROM [Options] AS [o]
    WHERE [o].[Id] = @__id_0
) AS [o1]
LEFT JOIN [OpeningHours] AS [o0] ON [o1].[Id] = [o0].[OptionId]
LEFT JOIN [TicketCategories] AS [t] ON [o1].[Id] = [t].[OptionId]
ORDER BY [o1].[Id], [o0].[Id]
[2025-08-02 17:06:27 INF] Executed action method TourManagementApi.Controllers.OptionsController.Edit (TourManagementApi), returned result Microsoft.AspNetCore.Mvc.ViewResult in 28.8639ms.
[2025-08-02 17:06:27 INF] Executing ViewResult, running view Edit.
[2025-08-02 17:06:27 INF] Executed ViewResult - view Edit executed in 3.0885ms.
[2025-08-02 17:06:27 INF] Executed action TourManagementApi.Controllers.OptionsController.Edit (TourManagementApi) in 40.6897ms
[2025-08-02 17:06:27 INF] Executed endpoint 'TourManagementApi.Controllers.OptionsController.Edit (TourManagementApi)'
[2025-08-02 17:06:27 INF] Request finished HTTP/1.1 GET http://localhost:5050/Options/Edit/42 - 200 null text/html; charset=utf-8 61.0215ms
[2025-08-02 17:06:27 INF] Request starting HTTP/1.1 GET http://localhost:5050/_vs/browserLink - null null
[2025-08-02 17:06:27 INF] Request starting HTTP/1.1 GET http://localhost:5050/_framework/aspnetcore-browser-refresh.js - null null
[2025-08-02 17:06:27 INF] Request finished HTTP/1.1 GET http://localhost:5050/_framework/aspnetcore-browser-refresh.js - 200 13770 application/javascript; charset=utf-8 0.1634ms
[2025-08-02 17:06:27 INF] Request finished HTTP/1.1 GET http://localhost:5050/_vs/browserLink - 200 null text/javascript; charset=UTF-8 12.1662ms
[2025-08-02 17:06:32 INF] Request starting HTTP/1.1 GET http://localhost:5050/_framework/aspnetcore-browser-refresh.js - null null
[2025-08-02 17:06:32 INF] Request finished HTTP/1.1 GET http://localhost:5050/_framework/aspnetcore-browser-refresh.js - 200 13770 application/javascript; charset=utf-8 0.5336ms
[2025-08-02 17:06:59 INF] Request starting HTTP/1.1 GET http://localhost:5050/api/rezdyconnect/availability?apiKey=6f686c1986af4830aefb398dc2525bc6&productCode=PYSYJM&externalProductCode=42&startTime=2025-07-31T21:36:09Z&endTime=2025-08-31T20:59:59Z&from=2025-07-31T21:36:09Z&to=2025-08-31T20:59:59Z&startTimeLocal=2025-08-01%2000:36:09&endTimeLocal=2025-08-31%2023:59:59&fromLocal=2025-08-01%2000:36:09&toLocal=2025-08-31%2023:59:59 - null null
[2025-08-02 17:06:59 INF] Executing endpoint 'TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi)'
[2025-08-02 17:06:59 INF] Route matched with {action = "GetAvailability", controller = "RezdyConnect"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAvailability(System.String, System.String, System.String, System.DateTime, System.DateTime, System.String, System.String) on controller TourManagementApi.Controllers.Api.RezdyConnectController (TourManagementApi).
[2025-08-02 17:06:59 INF] Executing action method TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi) - Validation state: "Valid"
[2025-08-02 17:06:59 INF] Executed DbCommand (27ms) [Parameters=[@__activityId_0='42', @__p_1='2025-07-31T21:36:09.0000000+00:00' (Nullable = true), @__p_2='2025-08-31T20:59:59.0000000+00:00' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ActivityId], [a].[AvailableCapacity], [a].[Date], [a].[MaximumCapacity], [a].[OptionId], [a].[PartnerSupplierId], [a].[StartTime], [o].[Id], [o].[ActivityId], [o].[CanBeBookedAfterStartTime], [o].[CutOff], [o].[Duration], [o].[EndTime], [o].[FromDate], [o].[Name], [o].[StartTime], [o].[UntilDate], [o].[Weekdays], [t].[Id], [t].[Amount], [t].[Currency], [t].[MaxAge], [t].[MaxSeats], [t].[MinAge], [t].[MinSeats], [t].[Name], [t].[OptionId], [t].[PriceType], [t].[Type]
FROM [Availabilities] AS [a]
INNER JOIN [Options] AS [o] ON [a].[OptionId] = [o].[Id]
LEFT JOIN [TicketCategories] AS [t] ON [o].[Id] = [t].[OptionId]
WHERE [a].[ActivityId] = @__activityId_0 AND [a].[StartTime] >= @__p_1 AND [a].[StartTime] <= @__p_2
ORDER BY [a].[Id], [o].[Id]
[2025-08-02 17:06:59 INF] Executed action method TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 30.7693ms.
[2025-08-02 17:06:59 INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`2[[<>f__AnonymousType1`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], TourManagementApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[TourManagementApi.Models.Api.RezdyConnectModels.AvailabilitySessionResponse, TourManagementApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-08-02 17:06:59 INF] Executed action TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi) in 42.0415ms
[2025-08-02 17:06:59 INF] Executed endpoint 'TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi)'
[2025-08-02 17:06:59 INF] Request finished HTTP/1.1 GET http://localhost:5050/api/rezdyconnect/availability?apiKey=6f686c1986af4830aefb398dc2525bc6&productCode=PYSYJM&externalProductCode=42&startTime=2025-07-31T21:36:09Z&endTime=2025-08-31T20:59:59Z&from=2025-07-31T21:36:09Z&to=2025-08-31T20:59:59Z&startTimeLocal=2025-08-01%2000:36:09&endTimeLocal=2025-08-31%2023:59:59&fromLocal=2025-08-01%2000:36:09&toLocal=2025-08-31%2023:59:59 - 200 null application/json; charset=utf-8 75.1533ms
[2025-08-02 17:06:59 INF] Request starting HTTP/1.1 GET http://localhost:5050/api/rezdyconnect/availability?apiKey=6f686c1986af4830aefb398dc2525bc6&productCode=PYSYJM&externalProductCode=42&startTime=2025-07-31T21:36:09Z&endTime=2025-08-31T20:59:59Z&from=2025-07-31T21:36:09Z&to=2025-08-31T20:59:59Z&startTimeLocal=2025-08-01%2000:36:09&endTimeLocal=2025-08-31%2023:59:59&fromLocal=2025-08-01%2000:36:09&toLocal=2025-08-31%2023:59:59 - null null
[2025-08-02 17:06:59 INF] Executing endpoint 'TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi)'
[2025-08-02 17:06:59 INF] Route matched with {action = "GetAvailability", controller = "RezdyConnect"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAvailability(System.String, System.String, System.String, System.DateTime, System.DateTime, System.String, System.String) on controller TourManagementApi.Controllers.Api.RezdyConnectController (TourManagementApi).
[2025-08-02 17:06:59 INF] Executing action method TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi) - Validation state: "Valid"
[2025-08-02 17:07:00 INF] Executed DbCommand (27ms) [Parameters=[@__activityId_0='42', @__p_1='2025-07-31T21:36:09.0000000+00:00' (Nullable = true), @__p_2='2025-08-31T20:59:59.0000000+00:00' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ActivityId], [a].[AvailableCapacity], [a].[Date], [a].[MaximumCapacity], [a].[OptionId], [a].[PartnerSupplierId], [a].[StartTime], [o].[Id], [o].[ActivityId], [o].[CanBeBookedAfterStartTime], [o].[CutOff], [o].[Duration], [o].[EndTime], [o].[FromDate], [o].[Name], [o].[StartTime], [o].[UntilDate], [o].[Weekdays], [t].[Id], [t].[Amount], [t].[Currency], [t].[MaxAge], [t].[MaxSeats], [t].[MinAge], [t].[MinSeats], [t].[Name], [t].[OptionId], [t].[PriceType], [t].[Type]
FROM [Availabilities] AS [a]
INNER JOIN [Options] AS [o] ON [a].[OptionId] = [o].[Id]
LEFT JOIN [TicketCategories] AS [t] ON [o].[Id] = [t].[OptionId]
WHERE [a].[ActivityId] = @__activityId_0 AND [a].[StartTime] >= @__p_1 AND [a].[StartTime] <= @__p_2
ORDER BY [a].[Id], [o].[Id]
[2025-08-02 17:07:00 INF] Executed action method TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 30.8936ms.
[2025-08-02 17:07:00 INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`2[[<>f__AnonymousType1`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], TourManagementApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[TourManagementApi.Models.Api.RezdyConnectModels.AvailabilitySessionResponse, TourManagementApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-08-02 17:07:00 INF] Executed action TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi) in 43.2984ms
[2025-08-02 17:07:00 INF] Executed endpoint 'TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi)'
[2025-08-02 17:07:00 INF] Request finished HTTP/1.1 GET http://localhost:5050/api/rezdyconnect/availability?apiKey=6f686c1986af4830aefb398dc2525bc6&productCode=PYSYJM&externalProductCode=42&startTime=2025-07-31T21:36:09Z&endTime=2025-08-31T20:59:59Z&from=2025-07-31T21:36:09Z&to=2025-08-31T20:59:59Z&startTimeLocal=2025-08-01%2000:36:09&endTimeLocal=2025-08-31%2023:59:59&fromLocal=2025-08-01%2000:36:09&toLocal=2025-08-31%2023:59:59 - 200 null application/json; charset=utf-8 61.6956ms
[2025-08-02 17:10:17 INF] Request starting HTTP/1.1 GET http://localhost:5050/api/rezdyconnect/availability?apiKey=6f686c1986af4830aefb398dc2525bc6&productCode=PHN0ZK&externalProductCode=42&startTime=2025-08-04T21:00:00Z&endTime=2025-08-06T21:00:00Z&from=2025-08-04T21:00:00Z&to=2025-08-06T21:00:00Z&startTimeLocal=2025-08-05%2000:00:00&endTimeLocal=2025-08-07%2000:00:00&fromLocal=2025-08-05%2000:00:00&toLocal=2025-08-07%2000:00:00 - null null
[2025-08-02 17:10:18 INF] Executing endpoint 'TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi)'
[2025-08-02 17:10:18 INF] Route matched with {action = "GetAvailability", controller = "RezdyConnect"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAvailability(System.String, System.String, System.String, System.DateTime, System.DateTime, System.String, System.String) on controller TourManagementApi.Controllers.Api.RezdyConnectController (TourManagementApi).
[2025-08-02 17:10:18 INF] Executing action method TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi) - Validation state: "Valid"
[2025-08-02 17:10:18 INF] Executed DbCommand (26ms) [Parameters=[@__activityId_0='42', @__p_1='2025-08-04T21:00:00.0000000+00:00' (Nullable = true), @__p_2='2025-08-06T21:00:00.0000000+00:00' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ActivityId], [a].[AvailableCapacity], [a].[Date], [a].[MaximumCapacity], [a].[OptionId], [a].[PartnerSupplierId], [a].[StartTime], [o].[Id], [o].[ActivityId], [o].[CanBeBookedAfterStartTime], [o].[CutOff], [o].[Duration], [o].[EndTime], [o].[FromDate], [o].[Name], [o].[StartTime], [o].[UntilDate], [o].[Weekdays], [t].[Id], [t].[Amount], [t].[Currency], [t].[MaxAge], [t].[MaxSeats], [t].[MinAge], [t].[MinSeats], [t].[Name], [t].[OptionId], [t].[PriceType], [t].[Type]
FROM [Availabilities] AS [a]
INNER JOIN [Options] AS [o] ON [a].[OptionId] = [o].[Id]
LEFT JOIN [TicketCategories] AS [t] ON [o].[Id] = [t].[OptionId]
WHERE [a].[ActivityId] = @__activityId_0 AND [a].[StartTime] >= @__p_1 AND [a].[StartTime] <= @__p_2
ORDER BY [a].[Id], [o].[Id]
[2025-08-02 17:10:18 INF] Executed action method TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 27.5257ms.
[2025-08-02 17:10:18 INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`2[[<>f__AnonymousType1`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], TourManagementApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[TourManagementApi.Models.Api.RezdyConnectModels.AvailabilitySessionResponse, TourManagementApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-08-02 17:10:18 INF] Executed action TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi) in 40.1238ms
[2025-08-02 17:10:18 INF] Executed endpoint 'TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi)'
[2025-08-02 17:10:18 INF] Request finished HTTP/1.1 GET http://localhost:5050/api/rezdyconnect/availability?apiKey=6f686c1986af4830aefb398dc2525bc6&productCode=PHN0ZK&externalProductCode=42&startTime=2025-08-04T21:00:00Z&endTime=2025-08-06T21:00:00Z&from=2025-08-04T21:00:00Z&to=2025-08-06T21:00:00Z&startTimeLocal=2025-08-05%2000:00:00&endTimeLocal=2025-08-07%2000:00:00&fromLocal=2025-08-05%2000:00:00&toLocal=2025-08-07%2000:00:00 - 200 null application/json; charset=utf-8 67.6994ms
[2025-08-02 17:10:19 INF] Request starting HTTP/1.1 GET http://localhost:5050/api/rezdyconnect/availability?apiKey=6f686c1986af4830aefb398dc2525bc6&productCode=PHN0ZK&externalProductCode=42&startTime=2025-08-04T21:00:00Z&endTime=2025-08-06T21:00:00Z&from=2025-08-04T21:00:00Z&to=2025-08-06T21:00:00Z&startTimeLocal=2025-08-05%2000:00:00&endTimeLocal=2025-08-07%2000:00:00&fromLocal=2025-08-05%2000:00:00&toLocal=2025-08-07%2000:00:00 - null null
[2025-08-02 17:10:19 INF] Executing endpoint 'TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi)'
[2025-08-02 17:10:19 INF] Route matched with {action = "GetAvailability", controller = "RezdyConnect"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAvailability(System.String, System.String, System.String, System.DateTime, System.DateTime, System.String, System.String) on controller TourManagementApi.Controllers.Api.RezdyConnectController (TourManagementApi).
[2025-08-02 17:10:19 INF] Executing action method TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi) - Validation state: "Valid"
[2025-08-02 17:10:19 INF] Executed DbCommand (26ms) [Parameters=[@__activityId_0='42', @__p_1='2025-08-04T21:00:00.0000000+00:00' (Nullable = true), @__p_2='2025-08-06T21:00:00.0000000+00:00' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ActivityId], [a].[AvailableCapacity], [a].[Date], [a].[MaximumCapacity], [a].[OptionId], [a].[PartnerSupplierId], [a].[StartTime], [o].[Id], [o].[ActivityId], [o].[CanBeBookedAfterStartTime], [o].[CutOff], [o].[Duration], [o].[EndTime], [o].[FromDate], [o].[Name], [o].[StartTime], [o].[UntilDate], [o].[Weekdays], [t].[Id], [t].[Amount], [t].[Currency], [t].[MaxAge], [t].[MaxSeats], [t].[MinAge], [t].[MinSeats], [t].[Name], [t].[OptionId], [t].[PriceType], [t].[Type]
FROM [Availabilities] AS [a]
INNER JOIN [Options] AS [o] ON [a].[OptionId] = [o].[Id]
LEFT JOIN [TicketCategories] AS [t] ON [o].[Id] = [t].[OptionId]
WHERE [a].[ActivityId] = @__activityId_0 AND [a].[StartTime] >= @__p_1 AND [a].[StartTime] <= @__p_2
ORDER BY [a].[Id], [o].[Id]
[2025-08-02 17:10:19 INF] Executed action method TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 29.5224ms.
[2025-08-02 17:10:19 INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`2[[<>f__AnonymousType1`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], TourManagementApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[TourManagementApi.Models.Api.RezdyConnectModels.AvailabilitySessionResponse, TourManagementApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-08-02 17:10:19 INF] Executed action TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi) in 40.032ms
[2025-08-02 17:10:19 INF] Executed endpoint 'TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi)'
[2025-08-02 17:10:19 INF] Request finished HTTP/1.1 GET http://localhost:5050/api/rezdyconnect/availability?apiKey=6f686c1986af4830aefb398dc2525bc6&productCode=PHN0ZK&externalProductCode=42&startTime=2025-08-04T21:00:00Z&endTime=2025-08-06T21:00:00Z&from=2025-08-04T21:00:00Z&to=2025-08-06T21:00:00Z&startTimeLocal=2025-08-05%2000:00:00&endTimeLocal=2025-08-07%2000:00:00&fromLocal=2025-08-05%2000:00:00&toLocal=2025-08-07%2000:00:00 - 200 null application/json; charset=utf-8 59.0501ms
[2025-08-02 17:10:48 INF] Request starting HTTP/1.1 GET http://localhost:5050/api/rezdyconnect/availability?apiKey=6f686c1986af4830aefb398dc2525bc6&productCode=PHN0ZK&externalProductCode=42&startTime=2025-08-04T21:00:00Z&endTime=2025-08-06T21:00:00Z&from=2025-08-04T21:00:00Z&to=2025-08-06T21:00:00Z&startTimeLocal=2025-08-05%2000:00:00&endTimeLocal=2025-08-07%2000:00:00&fromLocal=2025-08-05%2000:00:00&toLocal=2025-08-07%2000:00:00 - null null
[2025-08-02 17:10:48 INF] Executing endpoint 'TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi)'
[2025-08-02 17:10:48 INF] Route matched with {action = "GetAvailability", controller = "RezdyConnect"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAvailability(System.String, System.String, System.String, System.DateTime, System.DateTime, System.String, System.String) on controller TourManagementApi.Controllers.Api.RezdyConnectController (TourManagementApi).
[2025-08-02 17:10:48 INF] Executing action method TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi) - Validation state: "Valid"
[2025-08-02 17:10:48 INF] Executed DbCommand (26ms) [Parameters=[@__activityId_0='42', @__p_1='2025-08-04T21:00:00.0000000+00:00' (Nullable = true), @__p_2='2025-08-06T21:00:00.0000000+00:00' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ActivityId], [a].[AvailableCapacity], [a].[Date], [a].[MaximumCapacity], [a].[OptionId], [a].[PartnerSupplierId], [a].[StartTime], [o].[Id], [o].[ActivityId], [o].[CanBeBookedAfterStartTime], [o].[CutOff], [o].[Duration], [o].[EndTime], [o].[FromDate], [o].[Name], [o].[StartTime], [o].[UntilDate], [o].[Weekdays], [t].[Id], [t].[Amount], [t].[Currency], [t].[MaxAge], [t].[MaxSeats], [t].[MinAge], [t].[MinSeats], [t].[Name], [t].[OptionId], [t].[PriceType], [t].[Type]
FROM [Availabilities] AS [a]
INNER JOIN [Options] AS [o] ON [a].[OptionId] = [o].[Id]
LEFT JOIN [TicketCategories] AS [t] ON [o].[Id] = [t].[OptionId]
WHERE [a].[ActivityId] = @__activityId_0 AND [a].[StartTime] >= @__p_1 AND [a].[StartTime] <= @__p_2
ORDER BY [a].[Id], [o].[Id]
[2025-08-02 17:10:48 INF] Executed action method TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 26.9829ms.
[2025-08-02 17:10:48 INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`2[[<>f__AnonymousType1`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], TourManagementApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[TourManagementApi.Models.Api.RezdyConnectModels.AvailabilitySessionResponse, TourManagementApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-08-02 17:10:48 INF] Executed action TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi) in 45.8632ms
[2025-08-02 17:10:48 INF] Executed endpoint 'TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi)'
[2025-08-02 17:10:48 INF] Request finished HTTP/1.1 GET http://localhost:5050/api/rezdyconnect/availability?apiKey=6f686c1986af4830aefb398dc2525bc6&productCode=PHN0ZK&externalProductCode=42&startTime=2025-08-04T21:00:00Z&endTime=2025-08-06T21:00:00Z&from=2025-08-04T21:00:00Z&to=2025-08-06T21:00:00Z&startTimeLocal=2025-08-05%2000:00:00&endTimeLocal=2025-08-07%2000:00:00&fromLocal=2025-08-05%2000:00:00&toLocal=2025-08-07%2000:00:00 - 200 null application/json; charset=utf-8 75.3302ms
[2025-08-02 17:10:50 INF] Request starting HTTP/1.1 GET http://localhost:5050/api/rezdyconnect/availability?apiKey=6f686c1986af4830aefb398dc2525bc6&productCode=PHN0ZK&externalProductCode=42&startTime=2025-08-04T21:00:00Z&endTime=2025-08-06T21:00:00Z&from=2025-08-04T21:00:00Z&to=2025-08-06T21:00:00Z&startTimeLocal=2025-08-05%2000:00:00&endTimeLocal=2025-08-07%2000:00:00&fromLocal=2025-08-05%2000:00:00&toLocal=2025-08-07%2000:00:00 - null null
[2025-08-02 17:10:50 INF] Executing endpoint 'TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi)'
[2025-08-02 17:10:50 INF] Route matched with {action = "GetAvailability", controller = "RezdyConnect"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAvailability(System.String, System.String, System.String, System.DateTime, System.DateTime, System.String, System.String) on controller TourManagementApi.Controllers.Api.RezdyConnectController (TourManagementApi).
[2025-08-02 17:10:50 INF] Executing action method TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi) - Validation state: "Valid"
[2025-08-02 17:10:50 INF] Executed DbCommand (25ms) [Parameters=[@__activityId_0='42', @__p_1='2025-08-04T21:00:00.0000000+00:00' (Nullable = true), @__p_2='2025-08-06T21:00:00.0000000+00:00' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ActivityId], [a].[AvailableCapacity], [a].[Date], [a].[MaximumCapacity], [a].[OptionId], [a].[PartnerSupplierId], [a].[StartTime], [o].[Id], [o].[ActivityId], [o].[CanBeBookedAfterStartTime], [o].[CutOff], [o].[Duration], [o].[EndTime], [o].[FromDate], [o].[Name], [o].[StartTime], [o].[UntilDate], [o].[Weekdays], [t].[Id], [t].[Amount], [t].[Currency], [t].[MaxAge], [t].[MaxSeats], [t].[MinAge], [t].[MinSeats], [t].[Name], [t].[OptionId], [t].[PriceType], [t].[Type]
FROM [Availabilities] AS [a]
INNER JOIN [Options] AS [o] ON [a].[OptionId] = [o].[Id]
LEFT JOIN [TicketCategories] AS [t] ON [o].[Id] = [t].[OptionId]
WHERE [a].[ActivityId] = @__activityId_0 AND [a].[StartTime] >= @__p_1 AND [a].[StartTime] <= @__p_2
ORDER BY [a].[Id], [o].[Id]
[2025-08-02 17:10:50 INF] Executed action method TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 27.0585ms.
[2025-08-02 17:10:50 INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`2[[<>f__AnonymousType1`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], TourManagementApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[TourManagementApi.Models.Api.RezdyConnectModels.AvailabilitySessionResponse, TourManagementApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-08-02 17:10:50 INF] Executed action TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi) in 34.2641ms
[2025-08-02 17:10:50 INF] Executed endpoint 'TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi)'
[2025-08-02 17:10:50 INF] Request finished HTTP/1.1 GET http://localhost:5050/api/rezdyconnect/availability?apiKey=6f686c1986af4830aefb398dc2525bc6&productCode=PHN0ZK&externalProductCode=42&startTime=2025-08-04T21:00:00Z&endTime=2025-08-06T21:00:00Z&from=2025-08-04T21:00:00Z&to=2025-08-06T21:00:00Z&startTimeLocal=2025-08-05%2000:00:00&endTimeLocal=2025-08-07%2000:00:00&fromLocal=2025-08-05%2000:00:00&toLocal=2025-08-07%2000:00:00 - 200 null application/json; charset=utf-8 49.7973ms
[2025-08-02 17:10:51 INF] Request starting HTTP/1.1 GET http://localhost:5050/api/rezdyconnect/availability?apiKey=6f686c1986af4830aefb398dc2525bc6&productCode=PHN0ZK&externalProductCode=42&startTime=2025-08-04T21:00:00Z&endTime=2025-08-06T21:00:00Z&from=2025-08-04T21:00:00Z&to=2025-08-06T21:00:00Z&startTimeLocal=2025-08-05%2000:00:00&endTimeLocal=2025-08-07%2000:00:00&fromLocal=2025-08-05%2000:00:00&toLocal=2025-08-07%2000:00:00 - null null
[2025-08-02 17:10:51 INF] Executing endpoint 'TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi)'
[2025-08-02 17:10:51 INF] Route matched with {action = "GetAvailability", controller = "RezdyConnect"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAvailability(System.String, System.String, System.String, System.DateTime, System.DateTime, System.String, System.String) on controller TourManagementApi.Controllers.Api.RezdyConnectController (TourManagementApi).
[2025-08-02 17:10:51 INF] Executing action method TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi) - Validation state: "Valid"
[2025-08-02 17:10:51 INF] Executed DbCommand (26ms) [Parameters=[@__activityId_0='42', @__p_1='2025-08-04T21:00:00.0000000+00:00' (Nullable = true), @__p_2='2025-08-06T21:00:00.0000000+00:00' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ActivityId], [a].[AvailableCapacity], [a].[Date], [a].[MaximumCapacity], [a].[OptionId], [a].[PartnerSupplierId], [a].[StartTime], [o].[Id], [o].[ActivityId], [o].[CanBeBookedAfterStartTime], [o].[CutOff], [o].[Duration], [o].[EndTime], [o].[FromDate], [o].[Name], [o].[StartTime], [o].[UntilDate], [o].[Weekdays], [t].[Id], [t].[Amount], [t].[Currency], [t].[MaxAge], [t].[MaxSeats], [t].[MinAge], [t].[MinSeats], [t].[Name], [t].[OptionId], [t].[PriceType], [t].[Type]
FROM [Availabilities] AS [a]
INNER JOIN [Options] AS [o] ON [a].[OptionId] = [o].[Id]
LEFT JOIN [TicketCategories] AS [t] ON [o].[Id] = [t].[OptionId]
WHERE [a].[ActivityId] = @__activityId_0 AND [a].[StartTime] >= @__p_1 AND [a].[StartTime] <= @__p_2
ORDER BY [a].[Id], [o].[Id]
[2025-08-02 17:10:51 INF] Executed action method TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 27.3951ms.
[2025-08-02 17:10:51 INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`2[[<>f__AnonymousType1`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], TourManagementApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[TourManagementApi.Models.Api.RezdyConnectModels.AvailabilitySessionResponse, TourManagementApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-08-02 17:10:51 INF] Executed action TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi) in 34.91ms
[2025-08-02 17:10:51 INF] Executed endpoint 'TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi)'
[2025-08-02 17:10:51 INF] Request finished HTTP/1.1 GET http://localhost:5050/api/rezdyconnect/availability?apiKey=6f686c1986af4830aefb398dc2525bc6&productCode=PHN0ZK&externalProductCode=42&startTime=2025-08-04T21:00:00Z&endTime=2025-08-06T21:00:00Z&from=2025-08-04T21:00:00Z&to=2025-08-06T21:00:00Z&startTimeLocal=2025-08-05%2000:00:00&endTimeLocal=2025-08-07%2000:00:00&fromLocal=2025-08-05%2000:00:00&toLocal=2025-08-07%2000:00:00 - 200 null application/json; charset=utf-8 54.1807ms
[2025-08-02 17:11:08 INF] Request starting HTTP/1.1 GET http://localhost:5050/api/rezdyconnect/availability?apiKey=6f686c1986af4830aefb398dc2525bc6&productCode=PHN0ZK&externalProductCode=42&startTime=2025-08-04T21:00:00Z&endTime=2025-08-06T21:00:00Z&from=2025-08-04T21:00:00Z&to=2025-08-06T21:00:00Z&startTimeLocal=2025-08-05%2000:00:00&endTimeLocal=2025-08-07%2000:00:00&fromLocal=2025-08-05%2000:00:00&toLocal=2025-08-07%2000:00:00 - null null
[2025-08-02 17:11:08 INF] Executing endpoint 'TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi)'
[2025-08-02 17:11:08 INF] Route matched with {action = "GetAvailability", controller = "RezdyConnect"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAvailability(System.String, System.String, System.String, System.DateTime, System.DateTime, System.String, System.String) on controller TourManagementApi.Controllers.Api.RezdyConnectController (TourManagementApi).
[2025-08-02 17:11:08 INF] Executing action method TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi) - Validation state: "Valid"
[2025-08-02 17:11:12 INF] Executed DbCommand (26ms) [Parameters=[@__activityId_0='42', @__p_1='2025-08-04T21:00:00.0000000+00:00' (Nullable = true), @__p_2='2025-08-06T21:00:00.0000000+00:00' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ActivityId], [a].[AvailableCapacity], [a].[Date], [a].[MaximumCapacity], [a].[OptionId], [a].[PartnerSupplierId], [a].[StartTime], [o].[Id], [o].[ActivityId], [o].[CanBeBookedAfterStartTime], [o].[CutOff], [o].[Duration], [o].[EndTime], [o].[FromDate], [o].[Name], [o].[StartTime], [o].[UntilDate], [o].[Weekdays], [t].[Id], [t].[Amount], [t].[Currency], [t].[MaxAge], [t].[MaxSeats], [t].[MinAge], [t].[MinSeats], [t].[Name], [t].[OptionId], [t].[PriceType], [t].[Type]
FROM [Availabilities] AS [a]
INNER JOIN [Options] AS [o] ON [a].[OptionId] = [o].[Id]
LEFT JOIN [TicketCategories] AS [t] ON [o].[Id] = [t].[OptionId]
WHERE [a].[ActivityId] = @__activityId_0 AND [a].[StartTime] >= @__p_1 AND [a].[StartTime] <= @__p_2
ORDER BY [a].[Id], [o].[Id]
[2025-08-02 17:11:16 INF] Executed action method TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 8187.0723ms.
[2025-08-02 17:11:16 INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`2[[<>f__AnonymousType1`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], TourManagementApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[TourManagementApi.Models.Api.RezdyConnectModels.AvailabilitySessionResponse, TourManagementApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-08-02 17:11:16 INF] Executed action TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi) in 8204.0667ms
[2025-08-02 17:11:16 INF] Executed endpoint 'TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi)'
[2025-08-02 17:11:16 INF] Request finished HTTP/1.1 GET http://localhost:5050/api/rezdyconnect/availability?apiKey=6f686c1986af4830aefb398dc2525bc6&productCode=PHN0ZK&externalProductCode=42&startTime=2025-08-04T21:00:00Z&endTime=2025-08-06T21:00:00Z&from=2025-08-04T21:00:00Z&to=2025-08-06T21:00:00Z&startTimeLocal=2025-08-05%2000:00:00&endTimeLocal=2025-08-07%2000:00:00&fromLocal=2025-08-05%2000:00:00&toLocal=2025-08-07%2000:00:00 - 200 null application/json; charset=utf-8 8238.3288ms
[2025-08-02 17:11:55 INF] Request starting HTTP/1.1 GET http://localhost:5050/Options?activityId=42 - null null
[2025-08-02 17:11:55 INF] Executing endpoint 'TourManagementApi.Controllers.OptionsController.Index (TourManagementApi)'
[2025-08-02 17:11:55 INF] Route matched with {action = "Index", controller = "Options"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index(System.Nullable`1[System.Int32]) on controller TourManagementApi.Controllers.OptionsController (TourManagementApi).
[2025-08-02 17:11:55 INF] Executing action method TourManagementApi.Controllers.OptionsController.Index (TourManagementApi) - Validation state: "Valid"
[2025-08-02 17:11:55 INF] Executed DbCommand (26ms) [Parameters=[@__activityId_0='42' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[B2BAgencyId], [a].[Category], [a].[ContactInfo_Email], [a].[ContactInfoIsNull], [a].[ContactInfo_Name], [a].[ContactInfo_Phone], [a].[ContactInfo_Role], [a].[CountryCode], [a].[CoverImage], [a].[CreatedAt], [a].[Description], [a].[DestinationCode], [a].[DestinationName], [a].[DetailsUrl], [a].[Duration], [a].[Exclusions], [a].[ExclusionsJson], [a].[GalleryImages], [a].[GuestFields], [a].[GuestFieldsJson], [a].[Highlights], [a].[ImportantInfo], [a].[ImportantInfoJson], [a].[Inclusions], [a].[InclusionsJson], [a].[IsActive], [a].[IsFreeCancellation], [a].[Itinerary], [a].[Label], [a].[Media_Videos], [a].[PartnerSupplierId], [a].[PreviewImage], [a].[Rating], [a].[Status], [a].[Title], [a].[TotalRatingCount], [a].[TourCompanyId], [a].[UpdatedAt]
FROM [Activities] AS [a]
WHERE [a].[Id] = @__activityId_0
[2025-08-02 17:11:55 INF] Executed DbCommand (25ms) [Parameters=[@__activityId_0='42' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[ActivityId], [o].[CanBeBookedAfterStartTime], [o].[CutOff], [o].[Duration], [o].[EndTime], [o].[FromDate], [o].[Name], [o].[StartTime], [o].[UntilDate], [o].[Weekdays]
FROM [Options] AS [o]
WHERE [o].[ActivityId] = @__activityId_0
[2025-08-02 17:11:55 INF] Executed action method TourManagementApi.Controllers.OptionsController.Index (TourManagementApi), returned result Microsoft.AspNetCore.Mvc.ViewResult in 53.43ms.
[2025-08-02 17:11:55 INF] Executing ViewResult, running view Index.
[2025-08-02 17:11:55 INF] Executed ViewResult - view Index executed in 2.7106ms.
[2025-08-02 17:11:55 INF] Executed action TourManagementApi.Controllers.OptionsController.Index (TourManagementApi) in 64.1602ms
[2025-08-02 17:11:55 INF] Executed endpoint 'TourManagementApi.Controllers.OptionsController.Index (TourManagementApi)'
[2025-08-02 17:11:55 INF] Request finished HTTP/1.1 GET http://localhost:5050/Options?activityId=42 - 200 null text/html; charset=utf-8 92.956ms
[2025-08-02 17:11:55 INF] Request starting HTTP/1.1 GET http://localhost:5050/_vs/browserLink - null null
[2025-08-02 17:11:55 INF] Request starting HTTP/1.1 GET http://localhost:5050/_framework/aspnetcore-browser-refresh.js - null null
[2025-08-02 17:11:55 INF] Request finished HTTP/1.1 GET http://localhost:5050/_framework/aspnetcore-browser-refresh.js - 200 13770 application/javascript; charset=utf-8 0.1805ms
[2025-08-02 17:11:55 INF] Request finished HTTP/1.1 GET http://localhost:5050/_vs/browserLink - 200 null text/javascript; charset=UTF-8 5.1652ms
[2025-08-02 17:11:57 INF] Request starting HTTP/1.1 GET http://localhost:5050/api/rezdyconnect/availability?apiKey=6f686c1986af4830aefb398dc2525bc6&productCode=PHN0ZK&externalProductCode=42&startTime=2025-08-04T21:00:00Z&endTime=2025-08-06T21:00:00Z&from=2025-08-04T21:00:00Z&to=2025-08-06T21:00:00Z&startTimeLocal=2025-08-05%2000:00:00&endTimeLocal=2025-08-07%2000:00:00&fromLocal=2025-08-05%2000:00:00&toLocal=2025-08-07%2000:00:00 - null null
[2025-08-02 17:11:57 INF] Executing endpoint 'TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi)'
[2025-08-02 17:11:57 INF] Route matched with {action = "GetAvailability", controller = "RezdyConnect"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAvailability(System.String, System.String, System.String, System.DateTime, System.DateTime, System.String, System.String) on controller TourManagementApi.Controllers.Api.RezdyConnectController (TourManagementApi).
[2025-08-02 17:11:57 INF] Executing action method TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi) - Validation state: "Valid"
[2025-08-02 17:12:03 INF] Executed DbCommand (26ms) [Parameters=[@__activityId_0='42', @__p_1='2025-08-04T21:00:00.0000000+00:00' (Nullable = true), @__p_2='2025-08-06T21:00:00.0000000+00:00' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ActivityId], [a].[AvailableCapacity], [a].[Date], [a].[MaximumCapacity], [a].[OptionId], [a].[PartnerSupplierId], [a].[StartTime], [o].[Id], [o].[ActivityId], [o].[CanBeBookedAfterStartTime], [o].[CutOff], [o].[Duration], [o].[EndTime], [o].[FromDate], [o].[Name], [o].[StartTime], [o].[UntilDate], [o].[Weekdays], [t].[Id], [t].[Amount], [t].[Currency], [t].[MaxAge], [t].[MaxSeats], [t].[MinAge], [t].[MinSeats], [t].[Name], [t].[OptionId], [t].[PriceType], [t].[Type]
FROM [Availabilities] AS [a]
INNER JOIN [Options] AS [o] ON [a].[OptionId] = [o].[Id]
LEFT JOIN [TicketCategories] AS [t] ON [o].[Id] = [t].[OptionId]
WHERE [a].[ActivityId] = @__activityId_0 AND [a].[StartTime] >= @__p_1 AND [a].[StartTime] <= @__p_2
ORDER BY [a].[Id], [o].[Id]
[2025-08-02 17:12:03 INF] Executed action method TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 5385.7131ms.
[2025-08-02 17:12:03 INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`2[[<>f__AnonymousType1`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], TourManagementApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[TourManagementApi.Models.Api.RezdyConnectModels.AvailabilitySessionResponse, TourManagementApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-08-02 17:12:03 INF] Executed action TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi) in 5399.2427ms
[2025-08-02 17:12:03 INF] Executed endpoint 'TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi)'
[2025-08-02 17:12:03 INF] Request finished HTTP/1.1 GET http://localhost:5050/api/rezdyconnect/availability?apiKey=6f686c1986af4830aefb398dc2525bc6&productCode=PHN0ZK&externalProductCode=42&startTime=2025-08-04T21:00:00Z&endTime=2025-08-06T21:00:00Z&from=2025-08-04T21:00:00Z&to=2025-08-06T21:00:00Z&startTimeLocal=2025-08-05%2000:00:00&endTimeLocal=2025-08-07%2000:00:00&fromLocal=2025-08-05%2000:00:00&toLocal=2025-08-07%2000:00:00 - 200 null application/json; charset=utf-8 5429.1495ms
[2025-08-02 17:13:43 INF] Request starting HTTP/1.1 GET http://localhost:5050/Options?activityId=42 - null null
[2025-08-02 17:13:43 INF] Executing endpoint 'TourManagementApi.Controllers.OptionsController.Index (TourManagementApi)'
[2025-08-02 17:13:43 INF] Route matched with {action = "Index", controller = "Options"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index(System.Nullable`1[System.Int32]) on controller TourManagementApi.Controllers.OptionsController (TourManagementApi).
[2025-08-02 17:13:43 INF] Executing action method TourManagementApi.Controllers.OptionsController.Index (TourManagementApi) - Validation state: "Valid"
[2025-08-02 17:13:43 INF] Executed DbCommand (25ms) [Parameters=[@__activityId_0='42' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[B2BAgencyId], [a].[Category], [a].[ContactInfo_Email], [a].[ContactInfoIsNull], [a].[ContactInfo_Name], [a].[ContactInfo_Phone], [a].[ContactInfo_Role], [a].[CountryCode], [a].[CoverImage], [a].[CreatedAt], [a].[Description], [a].[DestinationCode], [a].[DestinationName], [a].[DetailsUrl], [a].[Duration], [a].[Exclusions], [a].[ExclusionsJson], [a].[GalleryImages], [a].[GuestFields], [a].[GuestFieldsJson], [a].[Highlights], [a].[ImportantInfo], [a].[ImportantInfoJson], [a].[Inclusions], [a].[InclusionsJson], [a].[IsActive], [a].[IsFreeCancellation], [a].[Itinerary], [a].[Label], [a].[Media_Videos], [a].[PartnerSupplierId], [a].[PreviewImage], [a].[Rating], [a].[Status], [a].[Title], [a].[TotalRatingCount], [a].[TourCompanyId], [a].[UpdatedAt]
FROM [Activities] AS [a]
WHERE [a].[Id] = @__activityId_0
[2025-08-02 17:13:43 INF] Executed DbCommand (24ms) [Parameters=[@__activityId_0='42' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[ActivityId], [o].[CanBeBookedAfterStartTime], [o].[CutOff], [o].[Duration], [o].[EndTime], [o].[FromDate], [o].[Name], [o].[StartTime], [o].[UntilDate], [o].[Weekdays]
FROM [Options] AS [o]
WHERE [o].[ActivityId] = @__activityId_0
[2025-08-02 17:13:43 INF] Executed action method TourManagementApi.Controllers.OptionsController.Index (TourManagementApi), returned result Microsoft.AspNetCore.Mvc.ViewResult in 52.8723ms.
[2025-08-02 17:13:43 INF] Executing ViewResult, running view Index.
[2025-08-02 17:13:43 INF] Executed ViewResult - view Index executed in 2.2062ms.
[2025-08-02 17:13:43 INF] Executed action TourManagementApi.Controllers.OptionsController.Index (TourManagementApi) in 67.3484ms
[2025-08-02 17:13:43 INF] Executed endpoint 'TourManagementApi.Controllers.OptionsController.Index (TourManagementApi)'
[2025-08-02 17:13:43 INF] Request finished HTTP/1.1 GET http://localhost:5050/Options?activityId=42 - 200 null text/html; charset=utf-8 105.8578ms
[2025-08-02 17:13:43 INF] Request starting HTTP/1.1 GET http://localhost:5050/_vs/browserLink - null null
[2025-08-02 17:13:43 INF] Request finished HTTP/1.1 GET http://localhost:5050/_vs/browserLink - 200 null text/javascript; charset=UTF-8 4.4149ms
[2025-08-02 17:13:43 INF] Request starting HTTP/1.1 GET http://localhost:5050/_framework/aspnetcore-browser-refresh.js - null null
[2025-08-02 17:13:43 INF] Request finished HTTP/1.1 GET http://localhost:5050/_framework/aspnetcore-browser-refresh.js - 200 13770 application/javascript; charset=utf-8 0.2213ms
[2025-08-02 17:13:59 INF] Request starting HTTP/1.1 GET http://localhost:5050/api/rezdyconnect/availability?apiKey=6f686c1986af4830aefb398dc2525bc6&productCode=PHN0ZK&externalProductCode=42&startTime=2025-08-04T21:00:00Z&endTime=2025-08-06T21:00:00Z&from=2025-08-04T21:00:00Z&to=2025-08-06T21:00:00Z&startTimeLocal=2025-08-05%2000:00:00&endTimeLocal=2025-08-07%2000:00:00&fromLocal=2025-08-05%2000:00:00&toLocal=2025-08-07%2000:00:00 - null null
[2025-08-02 17:13:59 INF] Executing endpoint 'TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi)'
[2025-08-02 17:13:59 INF] Route matched with {action = "GetAvailability", controller = "RezdyConnect"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAvailability(System.String, System.String, System.String, System.DateTime, System.DateTime, System.String, System.String) on controller TourManagementApi.Controllers.Api.RezdyConnectController (TourManagementApi).
[2025-08-02 17:13:59 INF] Executing action method TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi) - Validation state: "Valid"
[2025-08-02 17:13:59 INF] Executed DbCommand (26ms) [Parameters=[@__activityId_0='42', @__p_1='2025-08-04T21:00:00.0000000+00:00' (Nullable = true), @__p_2='2025-08-06T21:00:00.0000000+00:00' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ActivityId], [a].[AvailableCapacity], [a].[Date], [a].[MaximumCapacity], [a].[OptionId], [a].[PartnerSupplierId], [a].[StartTime], [o].[Id], [o].[ActivityId], [o].[CanBeBookedAfterStartTime], [o].[CutOff], [o].[Duration], [o].[EndTime], [o].[FromDate], [o].[Name], [o].[StartTime], [o].[UntilDate], [o].[Weekdays], [t].[Id], [t].[Amount], [t].[Currency], [t].[MaxAge], [t].[MaxSeats], [t].[MinAge], [t].[MinSeats], [t].[Name], [t].[OptionId], [t].[PriceType], [t].[Type]
FROM [Availabilities] AS [a]
INNER JOIN [Options] AS [o] ON [a].[OptionId] = [o].[Id]
LEFT JOIN [TicketCategories] AS [t] ON [o].[Id] = [t].[OptionId]
WHERE [a].[ActivityId] = @__activityId_0 AND [a].[StartTime] >= @__p_1 AND [a].[StartTime] <= @__p_2
ORDER BY [a].[Id], [o].[Id]
[2025-08-02 17:13:59 INF] Executed action method TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 27.9998ms.
[2025-08-02 17:13:59 INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`2[[<>f__AnonymousType1`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], TourManagementApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[TourManagementApi.Models.Api.RezdyConnectModels.AvailabilitySessionResponse, TourManagementApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-08-02 17:13:59 INF] Executed action TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi) in 38.2805ms
[2025-08-02 17:13:59 INF] Executed endpoint 'TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi)'
[2025-08-02 17:13:59 INF] Request finished HTTP/1.1 GET http://localhost:5050/api/rezdyconnect/availability?apiKey=6f686c1986af4830aefb398dc2525bc6&productCode=PHN0ZK&externalProductCode=42&startTime=2025-08-04T21:00:00Z&endTime=2025-08-06T21:00:00Z&from=2025-08-04T21:00:00Z&to=2025-08-06T21:00:00Z&startTimeLocal=2025-08-05%2000:00:00&endTimeLocal=2025-08-07%2000:00:00&fromLocal=2025-08-05%2000:00:00&toLocal=2025-08-07%2000:00:00 - 200 null application/json; charset=utf-8 70.1076ms
[2025-08-02 17:14:01 INF] Request starting HTTP/1.1 GET http://localhost:5050/api/rezdyconnect/availability?apiKey=6f686c1986af4830aefb398dc2525bc6&productCode=PHN0ZK&externalProductCode=42&startTime=2025-08-04T21:00:00Z&endTime=2025-08-06T21:00:00Z&from=2025-08-04T21:00:00Z&to=2025-08-06T21:00:00Z&startTimeLocal=2025-08-05%2000:00:00&endTimeLocal=2025-08-07%2000:00:00&fromLocal=2025-08-05%2000:00:00&toLocal=2025-08-07%2000:00:00 - null null
[2025-08-02 17:14:01 INF] Executing endpoint 'TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi)'
[2025-08-02 17:14:01 INF] Route matched with {action = "GetAvailability", controller = "RezdyConnect"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAvailability(System.String, System.String, System.String, System.DateTime, System.DateTime, System.String, System.String) on controller TourManagementApi.Controllers.Api.RezdyConnectController (TourManagementApi).
[2025-08-02 17:14:01 INF] Executing action method TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi) - Validation state: "Valid"
[2025-08-02 17:14:02 INF] Executed DbCommand (26ms) [Parameters=[@__activityId_0='42', @__p_1='2025-08-04T21:00:00.0000000+00:00' (Nullable = true), @__p_2='2025-08-06T21:00:00.0000000+00:00' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ActivityId], [a].[AvailableCapacity], [a].[Date], [a].[MaximumCapacity], [a].[OptionId], [a].[PartnerSupplierId], [a].[StartTime], [o].[Id], [o].[ActivityId], [o].[CanBeBookedAfterStartTime], [o].[CutOff], [o].[Duration], [o].[EndTime], [o].[FromDate], [o].[Name], [o].[StartTime], [o].[UntilDate], [o].[Weekdays], [t].[Id], [t].[Amount], [t].[Currency], [t].[MaxAge], [t].[MaxSeats], [t].[MinAge], [t].[MinSeats], [t].[Name], [t].[OptionId], [t].[PriceType], [t].[Type]
FROM [Availabilities] AS [a]
INNER JOIN [Options] AS [o] ON [a].[OptionId] = [o].[Id]
LEFT JOIN [TicketCategories] AS [t] ON [o].[Id] = [t].[OptionId]
WHERE [a].[ActivityId] = @__activityId_0 AND [a].[StartTime] >= @__p_1 AND [a].[StartTime] <= @__p_2
ORDER BY [a].[Id], [o].[Id]
[2025-08-02 17:14:02 INF] Executed action method TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 27.5472ms.
[2025-08-02 17:14:02 INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`2[[<>f__AnonymousType1`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], TourManagementApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[TourManagementApi.Models.Api.RezdyConnectModels.AvailabilitySessionResponse, TourManagementApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-08-02 17:14:02 INF] Executed action TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi) in 43.8488ms
[2025-08-02 17:14:02 INF] Executed endpoint 'TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi)'
[2025-08-02 17:14:02 INF] Request finished HTTP/1.1 GET http://localhost:5050/api/rezdyconnect/availability?apiKey=6f686c1986af4830aefb398dc2525bc6&productCode=PHN0ZK&externalProductCode=42&startTime=2025-08-04T21:00:00Z&endTime=2025-08-06T21:00:00Z&from=2025-08-04T21:00:00Z&to=2025-08-06T21:00:00Z&startTimeLocal=2025-08-05%2000:00:00&endTimeLocal=2025-08-07%2000:00:00&fromLocal=2025-08-05%2000:00:00&toLocal=2025-08-07%2000:00:00 - 200 null application/json; charset=utf-8 65.7592ms
[2025-08-02 17:14:02 INF] Request starting HTTP/1.1 GET http://localhost:5050/api/rezdyconnect/availability?apiKey=6f686c1986af4830aefb398dc2525bc6&productCode=PHN0ZK&externalProductCode=42&startTime=2025-08-04T21:00:00Z&endTime=2025-08-06T21:00:00Z&from=2025-08-04T21:00:00Z&to=2025-08-06T21:00:00Z&startTimeLocal=2025-08-05%2000:00:00&endTimeLocal=2025-08-07%2000:00:00&fromLocal=2025-08-05%2000:00:00&toLocal=2025-08-07%2000:00:00 - null null
[2025-08-02 17:14:02 INF] Executing endpoint 'TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi)'
[2025-08-02 17:14:02 INF] Route matched with {action = "GetAvailability", controller = "RezdyConnect"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAvailability(System.String, System.String, System.String, System.DateTime, System.DateTime, System.String, System.String) on controller TourManagementApi.Controllers.Api.RezdyConnectController (TourManagementApi).
[2025-08-02 17:14:02 INF] Executing action method TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi) - Validation state: "Valid"
[2025-08-02 17:14:02 INF] Executed DbCommand (26ms) [Parameters=[@__activityId_0='42', @__p_1='2025-08-04T21:00:00.0000000+00:00' (Nullable = true), @__p_2='2025-08-06T21:00:00.0000000+00:00' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ActivityId], [a].[AvailableCapacity], [a].[Date], [a].[MaximumCapacity], [a].[OptionId], [a].[PartnerSupplierId], [a].[StartTime], [o].[Id], [o].[ActivityId], [o].[CanBeBookedAfterStartTime], [o].[CutOff], [o].[Duration], [o].[EndTime], [o].[FromDate], [o].[Name], [o].[StartTime], [o].[UntilDate], [o].[Weekdays], [t].[Id], [t].[Amount], [t].[Currency], [t].[MaxAge], [t].[MaxSeats], [t].[MinAge], [t].[MinSeats], [t].[Name], [t].[OptionId], [t].[PriceType], [t].[Type]
FROM [Availabilities] AS [a]
INNER JOIN [Options] AS [o] ON [a].[OptionId] = [o].[Id]
LEFT JOIN [TicketCategories] AS [t] ON [o].[Id] = [t].[OptionId]
WHERE [a].[ActivityId] = @__activityId_0 AND [a].[StartTime] >= @__p_1 AND [a].[StartTime] <= @__p_2
ORDER BY [a].[Id], [o].[Id]
[2025-08-02 17:14:02 INF] Executed action method TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 27.2216ms.
[2025-08-02 17:14:02 INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`2[[<>f__AnonymousType1`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], TourManagementApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[TourManagementApi.Models.Api.RezdyConnectModels.AvailabilitySessionResponse, TourManagementApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-08-02 17:14:02 INF] Executed action TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi) in 33.9529ms
[2025-08-02 17:14:02 INF] Executed endpoint 'TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi)'
[2025-08-02 17:14:02 INF] Request finished HTTP/1.1 GET http://localhost:5050/api/rezdyconnect/availability?apiKey=6f686c1986af4830aefb398dc2525bc6&productCode=PHN0ZK&externalProductCode=42&startTime=2025-08-04T21:00:00Z&endTime=2025-08-06T21:00:00Z&from=2025-08-04T21:00:00Z&to=2025-08-06T21:00:00Z&startTimeLocal=2025-08-05%2000:00:00&endTimeLocal=2025-08-07%2000:00:00&fromLocal=2025-08-05%2000:00:00&toLocal=2025-08-07%2000:00:00 - 200 null application/json; charset=utf-8 53.1298ms
[2025-08-02 17:14:02 INF] Request starting HTTP/1.1 GET http://localhost:5050/api/rezdyconnect/availability?apiKey=6f686c1986af4830aefb398dc2525bc6&productCode=PHN0ZK&externalProductCode=42&startTime=2025-08-04T21:00:00Z&endTime=2025-08-06T21:00:00Z&from=2025-08-04T21:00:00Z&to=2025-08-06T21:00:00Z&startTimeLocal=2025-08-05%2000:00:00&endTimeLocal=2025-08-07%2000:00:00&fromLocal=2025-08-05%2000:00:00&toLocal=2025-08-07%2000:00:00 - null null
[2025-08-02 17:14:02 INF] Executing endpoint 'TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi)'
[2025-08-02 17:14:02 INF] Route matched with {action = "GetAvailability", controller = "RezdyConnect"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAvailability(System.String, System.String, System.String, System.DateTime, System.DateTime, System.String, System.String) on controller TourManagementApi.Controllers.Api.RezdyConnectController (TourManagementApi).
[2025-08-02 17:14:02 INF] Executing action method TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi) - Validation state: "Valid"
[2025-08-02 17:14:02 INF] Executed DbCommand (25ms) [Parameters=[@__activityId_0='42', @__p_1='2025-08-04T21:00:00.0000000+00:00' (Nullable = true), @__p_2='2025-08-06T21:00:00.0000000+00:00' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ActivityId], [a].[AvailableCapacity], [a].[Date], [a].[MaximumCapacity], [a].[OptionId], [a].[PartnerSupplierId], [a].[StartTime], [o].[Id], [o].[ActivityId], [o].[CanBeBookedAfterStartTime], [o].[CutOff], [o].[Duration], [o].[EndTime], [o].[FromDate], [o].[Name], [o].[StartTime], [o].[UntilDate], [o].[Weekdays], [t].[Id], [t].[Amount], [t].[Currency], [t].[MaxAge], [t].[MaxSeats], [t].[MinAge], [t].[MinSeats], [t].[Name], [t].[OptionId], [t].[PriceType], [t].[Type]
FROM [Availabilities] AS [a]
INNER JOIN [Options] AS [o] ON [a].[OptionId] = [o].[Id]
LEFT JOIN [TicketCategories] AS [t] ON [o].[Id] = [t].[OptionId]
WHERE [a].[ActivityId] = @__activityId_0 AND [a].[StartTime] >= @__p_1 AND [a].[StartTime] <= @__p_2
ORDER BY [a].[Id], [o].[Id]
[2025-08-02 17:14:02 INF] Executed action method TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 26.5212ms.
[2025-08-02 17:14:02 INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`2[[<>f__AnonymousType1`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], TourManagementApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[TourManagementApi.Models.Api.RezdyConnectModels.AvailabilitySessionResponse, TourManagementApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-08-02 17:14:02 INF] Executed action TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi) in 33.5075ms
[2025-08-02 17:14:02 INF] Executed endpoint 'TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi)'
[2025-08-02 17:14:02 INF] Request finished HTTP/1.1 GET http://localhost:5050/api/rezdyconnect/availability?apiKey=6f686c1986af4830aefb398dc2525bc6&productCode=PHN0ZK&externalProductCode=42&startTime=2025-08-04T21:00:00Z&endTime=2025-08-06T21:00:00Z&from=2025-08-04T21:00:00Z&to=2025-08-06T21:00:00Z&startTimeLocal=2025-08-05%2000:00:00&endTimeLocal=2025-08-07%2000:00:00&fromLocal=2025-08-05%2000:00:00&toLocal=2025-08-07%2000:00:00 - 200 null application/json; charset=utf-8 48.7146ms
[2025-08-02 18:06:27 WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
[2025-08-02 18:06:27 ERR] Veritabanı güncellenirken bir hata oluştu.
System.InvalidOperationException: An error was generated for warning 'Microsoft.EntityFrameworkCore.Migrations.PendingModelChangesWarning': The model for context 'ApplicationDbContext' has pending changes. Add a new migration before updating the database. See https://aka.ms/efcore-docs-pending-changes. This exception can be suppressed or logged by passing event ID 'RelationalEventId.PendingModelChangesWarning' to the 'ConfigureWarnings' method in 'DbContext.OnConfiguring' or 'AddDbContext'.
   at Microsoft.EntityFrameworkCore.Diagnostics.EventDefinition`1.Log[TLoggerCategory](IDiagnosticsLogger`1 logger, TParam arg)
   at Microsoft.EntityFrameworkCore.Diagnostics.RelationalLoggerExtensions.PendingModelChangesWarning(IDiagnosticsLogger`1 diagnostics, Type contextType)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.Migrator.ValidateMigrations(Boolean useTransaction, String targetMigration)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.Migrator.Migrate(String targetMigration)
   at Microsoft.EntityFrameworkCore.RelationalDatabaseFacadeExtensions.Migrate(DatabaseFacade databaseFacade)
   at Program.<Main>$(String[] args) in D:\TFS\Lymranet\Tourism\B2B\HotelWidget\TourManagement\Program.cs:line 160
[2025-08-02 18:06:27 INF] User profile is available. Using 'C:\Users\OZKAN\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2025-08-02 18:06:27 INF] Now listening on: http://localhost:5050
[2025-08-02 18:06:27 INF] Application started. Press Ctrl+C to shut down.
[2025-08-02 18:06:27 INF] Hosting environment: Development
[2025-08-02 18:06:27 INF] Content root path: D:\TFS\Lymranet\Tourism\B2B\HotelWidget\TourManagement
[2025-08-02 18:06:58 INF] Request starting HTTP/1.1 GET http://localhost:5050/api/rezdyconnect/products?apiKey=6f686c1986af4830aefb398dc2525bc6&externalProductCode=8&productCode=PSMJP4&offset=0&limit=100 - null null
[2025-08-02 18:06:58 INF] Executing endpoint 'TourManagementApi.Controllers.Api.RezdyConnectController.GetProducts (TourManagementApi)'
[2025-08-02 18:06:58 INF] Route matched with {action = "GetProducts", controller = "RezdyConnect"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetProducts(System.String, Int32, Int32, System.Collections.Generic.List`1[System.String], System.Collections.Generic.List`1[System.String]) on controller TourManagementApi.Controllers.Api.RezdyConnectController (TourManagementApi).
[2025-08-02 18:06:58 WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
[2025-08-02 18:06:58 INF] Executed DbCommand (105ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[B2BAgencyId], [a].[Category], [a].[ContactInfo_Email], [a].[ContactInfoIsNull], [a].[ContactInfo_Name], [a].[ContactInfo_Phone], [a].[ContactInfo_Role], [a].[CountryCode], [a].[CoverImage], [a].[CreatedAt], [a].[Description], [a].[DestinationCode], [a].[DestinationName], [a].[DetailsUrl], [a].[Duration], [a].[Exclusions], [a].[ExclusionsJson], [a].[GalleryImages], [a].[GuestFields], [a].[GuestFieldsJson], [a].[Highlights], [a].[ImportantInfo], [a].[ImportantInfoJson], [a].[Inclusions], [a].[InclusionsJson], [a].[IsActive], [a].[IsFreeCancellation], [a].[Itinerary], [a].[Label], [a].[Media_Videos], [a].[PartnerSupplierId], [a].[PreviewImage], [a].[Rating], [a].[Status], [a].[Title], [a].[TotalRatingCount], [a].[TourCompanyId], [a].[UpdatedAt], [a0].[Id], [a0].[ActivityId], [a0].[LanguageCode], [a1].[Id], [a1].[ActivityId], [a1].[Currency], [a1].[Description], [a1].[PriceAmount], [a1].[Title], [a1].[Type], [p].[ActivityPricingActivityId], [p].[Id], [p].[Amount], [p].[Currency], [p].[Description], [p].[DiscountType], [p].[DiscountValue], [p].[MaxAge], [p].[MaxParticipants], [p].[MinAge], [p].[MinParticipants], [p].[PriceType], [p].[Type], [m].[ActivityId], [m].[Id], [m].[Address], [m].[Latitude], [m].[Longitude], [m].[Name], [s].[Id], [s].[ActivityId], [s].[CanBeBookedAfterStartTime], [s].[CutOff], [s].[Duration], [s].[EndTime], [s].[FromDate], [s].[Name], [s].[StartTime], [s].[UntilDate], [s].[Weekdays], [s].[Id0], [s].[Amount], [s].[Currency], [s].[MaxAge], [s].[MaxSeats], [s].[MinAge], [s].[MinSeats], [s].[Name0], [s].[OptionId], [s].[PriceType], [s].[Type]
FROM [Activities] AS [a]
LEFT JOIN [ActivityLanguages] AS [a0] ON [a].[Id] = [a0].[ActivityId]
LEFT JOIN [Addons] AS [a1] ON [a].[Id] = [a1].[ActivityId]
LEFT JOIN [PriceCategory] AS [p] ON [a].[Id] = [p].[ActivityPricingActivityId]
LEFT JOIN [MeetingPoint] AS [m] ON [a].[Id] = [m].[ActivityId]
LEFT JOIN (
    SELECT [o].[Id], [o].[ActivityId], [o].[CanBeBookedAfterStartTime], [o].[CutOff], [o].[Duration], [o].[EndTime], [o].[FromDate], [o].[Name], [o].[StartTime], [o].[UntilDate], [o].[Weekdays], [t].[Id] AS [Id0], [t].[Amount], [t].[Currency], [t].[MaxAge], [t].[MaxSeats], [t].[MinAge], [t].[MinSeats], [t].[Name] AS [Name0], [t].[OptionId], [t].[PriceType], [t].[Type]
    FROM [Options] AS [o]
    LEFT JOIN [TicketCategories] AS [t] ON [o].[Id] = [t].[OptionId]
) AS [s] ON [a].[Id] = [s].[ActivityId]
ORDER BY [a].[Id], [a0].[Id], [a1].[Id], [p].[ActivityPricingActivityId], [p].[Id], [m].[ActivityId], [m].[Id], [s].[Id]
[2025-08-02 18:06:59 INF] Executed action TourManagementApi.Controllers.Api.RezdyConnectController.GetProducts (TourManagementApi) in 1483.7457ms
[2025-08-02 18:06:59 INF] Executed endpoint 'TourManagementApi.Controllers.Api.RezdyConnectController.GetProducts (TourManagementApi)'
[2025-08-02 18:06:59 ERR] Bir sistem hatası oluştu. Path: /api/rezdyconnect/products, CorrelationId: be6ab771-5b09-4d02-a1ec-1ea697ff45cc
System.InvalidOperationException: Sequence contains no elements
   at System.Linq.ThrowHelper.ThrowNoElementsException()
   at System.Linq.Enumerable.Min[TSource](IEnumerable`1 source, Func`2 selector)
   at TourManagementApi.Services.ActivityExtensions.ToRezdyDto(Activity activity, String apiKey, String baseApiUrl, String baseImageUrl) in D:\TFS\Lymranet\Tourism\B2B\HotelWidget\TourManagement\Services\ProductService.cs:line 101
   at TourManagementApi.Services.ProductService.<>c__DisplayClass4_0.<GetAll>b__6(Activity a) in D:\TFS\Lymranet\Tourism\B2B\HotelWidget\TourManagement\Services\ProductService.cs:line 40
   at System.Linq.Enumerable.SelectListIterator`2.Fill(ReadOnlySpan`1 source, Span`1 destination, Func`2 func)
   at System.Linq.Enumerable.SelectListIterator`2.ToList()
   at TourManagementApi.Services.ProductService.GetAll() in D:\TFS\Lymranet\Tourism\B2B\HotelWidget\TourManagement\Services\ProductService.cs:line 40
   at TourManagementApi.Controllers.Api.RezdyConnectController.GetProducts(String apiKey, Int32 offset, Int32 limit, List`1 productCodes, List`1 externalProductCodes) in D:\TFS\Lymranet\Tourism\B2B\HotelWidget\TourManagement\Controllers\Api\RezdyConnectController.cs:line 79
   at lambda_method24(Closure, Object, Object[])
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.SyncActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeNextActionFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.StatusCodePagesMiddleware.Invoke(HttpContext context)
   at TourManagementApi.Middleware.GlobalExceptionMiddleware.Invoke(HttpContext context) in D:\TFS\Lymranet\Tourism\B2B\HotelWidget\TourManagement\Middleware\GlobalExceptionMiddleware.cs:line 32
[2025-08-02 18:06:59 INF] Request finished HTTP/1.1 GET http://localhost:5050/api/rezdyconnect/products?apiKey=6f686c1986af4830aefb398dc2525bc6&externalProductCode=8&productCode=PSMJP4&offset=0&limit=100 - 500 null application/json 1629.6179ms
[2025-08-02 18:07:08 WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
[2025-08-02 18:07:08 ERR] Veritabanı güncellenirken bir hata oluştu.
System.InvalidOperationException: An error was generated for warning 'Microsoft.EntityFrameworkCore.Migrations.PendingModelChangesWarning': The model for context 'ApplicationDbContext' has pending changes. Add a new migration before updating the database. See https://aka.ms/efcore-docs-pending-changes. This exception can be suppressed or logged by passing event ID 'RelationalEventId.PendingModelChangesWarning' to the 'ConfigureWarnings' method in 'DbContext.OnConfiguring' or 'AddDbContext'.
   at Microsoft.EntityFrameworkCore.Diagnostics.EventDefinition`1.Log[TLoggerCategory](IDiagnosticsLogger`1 logger, TParam arg)
   at Microsoft.EntityFrameworkCore.Diagnostics.RelationalLoggerExtensions.PendingModelChangesWarning(IDiagnosticsLogger`1 diagnostics, Type contextType)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.Migrator.ValidateMigrations(Boolean useTransaction, String targetMigration)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.Migrator.Migrate(String targetMigration)
   at Microsoft.EntityFrameworkCore.RelationalDatabaseFacadeExtensions.Migrate(DatabaseFacade databaseFacade)
   at Program.<Main>$(String[] args) in D:\TFS\Lymranet\Tourism\B2B\HotelWidget\TourManagement\Program.cs:line 160
[2025-08-02 18:07:09 INF] User profile is available. Using 'C:\Users\OZKAN\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2025-08-02 18:07:09 INF] Now listening on: http://localhost:5050
[2025-08-02 18:07:09 INF] Application started. Press Ctrl+C to shut down.
[2025-08-02 18:07:09 INF] Hosting environment: Development
[2025-08-02 18:07:09 INF] Content root path: D:\TFS\Lymranet\Tourism\B2B\HotelWidget\TourManagement
[2025-08-02 18:07:24 INF] Request starting HTTP/1.1 GET http://localhost:5050/api/rezdyconnect/products?apiKey=6f686c1986af4830aefb398dc2525bc6&externalProductCode=8&productCode=PSMJP4&offset=0&limit=100 - null null
[2025-08-02 18:07:24 INF] Executing endpoint 'TourManagementApi.Controllers.Api.RezdyConnectController.GetProducts (TourManagementApi)'
[2025-08-02 18:07:24 INF] Route matched with {action = "GetProducts", controller = "RezdyConnect"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetProducts(System.String, Int32, Int32, System.Collections.Generic.List`1[System.String], System.Collections.Generic.List`1[System.String]) on controller TourManagementApi.Controllers.Api.RezdyConnectController (TourManagementApi).
[2025-08-02 18:07:24 INF] Executing action method TourManagementApi.Controllers.Api.RezdyConnectController.GetProducts (TourManagementApi) - Validation state: "Valid"
[2025-08-02 18:07:24 WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
[2025-08-02 18:07:25 INF] Executed DbCommand (90ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[B2BAgencyId], [a].[Category], [a].[ContactInfo_Email], [a].[ContactInfoIsNull], [a].[ContactInfo_Name], [a].[ContactInfo_Phone], [a].[ContactInfo_Role], [a].[CountryCode], [a].[CoverImage], [a].[CreatedAt], [a].[Description], [a].[DestinationCode], [a].[DestinationName], [a].[DetailsUrl], [a].[Duration], [a].[Exclusions], [a].[ExclusionsJson], [a].[GalleryImages], [a].[GuestFields], [a].[GuestFieldsJson], [a].[Highlights], [a].[ImportantInfo], [a].[ImportantInfoJson], [a].[Inclusions], [a].[InclusionsJson], [a].[IsActive], [a].[IsFreeCancellation], [a].[Itinerary], [a].[Label], [a].[Media_Videos], [a].[PartnerSupplierId], [a].[PreviewImage], [a].[Rating], [a].[Status], [a].[Title], [a].[TotalRatingCount], [a].[TourCompanyId], [a].[UpdatedAt], [a0].[Id], [a0].[ActivityId], [a0].[LanguageCode], [a1].[Id], [a1].[ActivityId], [a1].[Currency], [a1].[Description], [a1].[PriceAmount], [a1].[Title], [a1].[Type], [p].[ActivityPricingActivityId], [p].[Id], [p].[Amount], [p].[Currency], [p].[Description], [p].[DiscountType], [p].[DiscountValue], [p].[MaxAge], [p].[MaxParticipants], [p].[MinAge], [p].[MinParticipants], [p].[PriceType], [p].[Type], [m].[ActivityId], [m].[Id], [m].[Address], [m].[Latitude], [m].[Longitude], [m].[Name], [s].[Id], [s].[ActivityId], [s].[CanBeBookedAfterStartTime], [s].[CutOff], [s].[Duration], [s].[EndTime], [s].[FromDate], [s].[Name], [s].[StartTime], [s].[UntilDate], [s].[Weekdays], [s].[Id0], [s].[Amount], [s].[Currency], [s].[MaxAge], [s].[MaxSeats], [s].[MinAge], [s].[MinSeats], [s].[Name0], [s].[OptionId], [s].[PriceType], [s].[Type]
FROM [Activities] AS [a]
LEFT JOIN [ActivityLanguages] AS [a0] ON [a].[Id] = [a0].[ActivityId]
LEFT JOIN [Addons] AS [a1] ON [a].[Id] = [a1].[ActivityId]
LEFT JOIN [PriceCategory] AS [p] ON [a].[Id] = [p].[ActivityPricingActivityId]
LEFT JOIN [MeetingPoint] AS [m] ON [a].[Id] = [m].[ActivityId]
LEFT JOIN (
    SELECT [o].[Id], [o].[ActivityId], [o].[CanBeBookedAfterStartTime], [o].[CutOff], [o].[Duration], [o].[EndTime], [o].[FromDate], [o].[Name], [o].[StartTime], [o].[UntilDate], [o].[Weekdays], [t].[Id] AS [Id0], [t].[Amount], [t].[Currency], [t].[MaxAge], [t].[MaxSeats], [t].[MinAge], [t].[MinSeats], [t].[Name] AS [Name0], [t].[OptionId], [t].[PriceType], [t].[Type]
    FROM [Options] AS [o]
    LEFT JOIN [TicketCategories] AS [t] ON [o].[Id] = [t].[OptionId]
) AS [s] ON [a].[Id] = [s].[ActivityId]
ORDER BY [a].[Id], [a0].[Id], [a1].[Id], [p].[ActivityPricingActivityId], [p].[Id], [m].[ActivityId], [m].[Id], [s].[Id]
[2025-08-02 18:09:55 INF] Executed action TourManagementApi.Controllers.Api.RezdyConnectController.GetProducts (TourManagementApi) in 151231.1553ms
[2025-08-02 18:09:55 INF] Executed endpoint 'TourManagementApi.Controllers.Api.RezdyConnectController.GetProducts (TourManagementApi)'
[2025-08-02 18:09:55 ERR] Bir sistem hatası oluştu. Path: /api/rezdyconnect/products, CorrelationId: 61b39d97-574d-4a70-a5fc-615b5a7bacdc
System.InvalidOperationException: Sequence contains no elements
   at System.Linq.ThrowHelper.ThrowNoElementsException()
   at System.Linq.Enumerable.Min[TSource](IEnumerable`1 source, Func`2 selector)
   at TourManagementApi.Services.ActivityExtensions.ToRezdyDto(Activity activity, String apiKey, String baseApiUrl, String baseImageUrl)
   at TourManagementApi.Services.ProductService.<>c__DisplayClass4_0.<GetAll>b__6(Activity a)
   at System.Linq.Enumerable.SelectListIterator`2.Fill(ReadOnlySpan`1 source, Span`1 destination, Func`2 func)
   at System.Linq.Enumerable.SelectListIterator`2.ToList()
   at TourManagementApi.Services.ProductService.GetAll()
   at TourManagementApi.Controllers.Api.RezdyConnectController.GetProducts(String apiKey, Int32 offset, Int32 limit, List`1 productCodes, List`1 externalProductCodes)
   at lambda_method24(Closure, Object, Object[])
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.SyncActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.StatusCodePagesMiddleware.Invoke(HttpContext context)
   at TourManagementApi.Middleware.GlobalExceptionMiddleware.Invoke(HttpContext context)
[2025-08-02 18:09:55 INF] Request finished HTTP/1.1 GET http://localhost:5050/api/rezdyconnect/products?apiKey=6f686c1986af4830aefb398dc2525bc6&externalProductCode=8&productCode=PSMJP4&offset=0&limit=100 - 500 null application/json 151477.4479ms
[2025-08-02 18:10:02 INF] Request starting HTTP/1.1 GET http://localhost:5050/api/rezdyconnect/products?apiKey=6f686c1986af4830aefb398dc2525bc6&externalProductCode=42&productCode=PSMJP4&offset=0&limit=100 - null null
[2025-08-02 18:10:02 INF] Executing endpoint 'TourManagementApi.Controllers.Api.RezdyConnectController.GetProducts (TourManagementApi)'
[2025-08-02 18:10:02 INF] Route matched with {action = "GetProducts", controller = "RezdyConnect"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetProducts(System.String, Int32, Int32, System.Collections.Generic.List`1[System.String], System.Collections.Generic.List`1[System.String]) on controller TourManagementApi.Controllers.Api.RezdyConnectController (TourManagementApi).
[2025-08-02 18:10:02 INF] Executing action method TourManagementApi.Controllers.Api.RezdyConnectController.GetProducts (TourManagementApi) - Validation state: "Valid"
[2025-08-02 18:10:02 INF] Executed DbCommand (51ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[B2BAgencyId], [a].[Category], [a].[ContactInfo_Email], [a].[ContactInfoIsNull], [a].[ContactInfo_Name], [a].[ContactInfo_Phone], [a].[ContactInfo_Role], [a].[CountryCode], [a].[CoverImage], [a].[CreatedAt], [a].[Description], [a].[DestinationCode], [a].[DestinationName], [a].[DetailsUrl], [a].[Duration], [a].[Exclusions], [a].[ExclusionsJson], [a].[GalleryImages], [a].[GuestFields], [a].[GuestFieldsJson], [a].[Highlights], [a].[ImportantInfo], [a].[ImportantInfoJson], [a].[Inclusions], [a].[InclusionsJson], [a].[IsActive], [a].[IsFreeCancellation], [a].[Itinerary], [a].[Label], [a].[Media_Videos], [a].[PartnerSupplierId], [a].[PreviewImage], [a].[Rating], [a].[Status], [a].[Title], [a].[TotalRatingCount], [a].[TourCompanyId], [a].[UpdatedAt], [a0].[Id], [a0].[ActivityId], [a0].[LanguageCode], [a1].[Id], [a1].[ActivityId], [a1].[Currency], [a1].[Description], [a1].[PriceAmount], [a1].[Title], [a1].[Type], [p].[ActivityPricingActivityId], [p].[Id], [p].[Amount], [p].[Currency], [p].[Description], [p].[DiscountType], [p].[DiscountValue], [p].[MaxAge], [p].[MaxParticipants], [p].[MinAge], [p].[MinParticipants], [p].[PriceType], [p].[Type], [m].[ActivityId], [m].[Id], [m].[Address], [m].[Latitude], [m].[Longitude], [m].[Name], [s].[Id], [s].[ActivityId], [s].[CanBeBookedAfterStartTime], [s].[CutOff], [s].[Duration], [s].[EndTime], [s].[FromDate], [s].[Name], [s].[StartTime], [s].[UntilDate], [s].[Weekdays], [s].[Id0], [s].[Amount], [s].[Currency], [s].[MaxAge], [s].[MaxSeats], [s].[MinAge], [s].[MinSeats], [s].[Name0], [s].[OptionId], [s].[PriceType], [s].[Type]
FROM [Activities] AS [a]
LEFT JOIN [ActivityLanguages] AS [a0] ON [a].[Id] = [a0].[ActivityId]
LEFT JOIN [Addons] AS [a1] ON [a].[Id] = [a1].[ActivityId]
LEFT JOIN [PriceCategory] AS [p] ON [a].[Id] = [p].[ActivityPricingActivityId]
LEFT JOIN [MeetingPoint] AS [m] ON [a].[Id] = [m].[ActivityId]
LEFT JOIN (
    SELECT [o].[Id], [o].[ActivityId], [o].[CanBeBookedAfterStartTime], [o].[CutOff], [o].[Duration], [o].[EndTime], [o].[FromDate], [o].[Name], [o].[StartTime], [o].[UntilDate], [o].[Weekdays], [t].[Id] AS [Id0], [t].[Amount], [t].[Currency], [t].[MaxAge], [t].[MaxSeats], [t].[MinAge], [t].[MinSeats], [t].[Name] AS [Name0], [t].[OptionId], [t].[PriceType], [t].[Type]
    FROM [Options] AS [o]
    LEFT JOIN [TicketCategories] AS [t] ON [o].[Id] = [t].[OptionId]
) AS [s] ON [a].[Id] = [s].[ActivityId]
ORDER BY [a].[Id], [a0].[Id], [a1].[Id], [p].[ActivityPricingActivityId], [p].[Id], [m].[ActivityId], [m].[Id], [s].[Id]
[2025-08-02 18:10:03 INF] Executed action TourManagementApi.Controllers.Api.RezdyConnectController.GetProducts (TourManagementApi) in 1016.1674ms
[2025-08-02 18:10:03 INF] Executed endpoint 'TourManagementApi.Controllers.Api.RezdyConnectController.GetProducts (TourManagementApi)'
[2025-08-02 18:10:03 ERR] Bir sistem hatası oluştu. Path: /api/rezdyconnect/products, CorrelationId: f03799b8-29d8-4752-a4ed-1d78a8bb244c
System.InvalidOperationException: Sequence contains no elements
   at System.Linq.ThrowHelper.ThrowNoElementsException()
   at System.Linq.Enumerable.Min[TSource](IEnumerable`1 source, Func`2 selector)
   at TourManagementApi.Services.ActivityExtensions.ToRezdyDto(Activity activity, String apiKey, String baseApiUrl, String baseImageUrl)
   at TourManagementApi.Services.ProductService.<>c__DisplayClass4_0.<GetAll>b__6(Activity a)
   at System.Linq.Enumerable.SelectListIterator`2.Fill(ReadOnlySpan`1 source, Span`1 destination, Func`2 func)
   at System.Linq.Enumerable.SelectListIterator`2.ToList()
   at TourManagementApi.Services.ProductService.GetAll()
   at TourManagementApi.Controllers.Api.RezdyConnectController.GetProducts(String apiKey, Int32 offset, Int32 limit, List`1 productCodes, List`1 externalProductCodes)
   at lambda_method951(Closure, Object, Object[])
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.SyncActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.StatusCodePagesMiddleware.Invoke(HttpContext context)
   at TourManagementApi.Middleware.GlobalExceptionMiddleware.Invoke(HttpContext context)
[2025-08-02 18:10:03 INF] Request finished HTTP/1.1 GET http://localhost:5050/api/rezdyconnect/products?apiKey=6f686c1986af4830aefb398dc2525bc6&externalProductCode=42&productCode=PSMJP4&offset=0&limit=100 - 500 null application/json 1145.7683ms
[2025-08-02 18:10:29 INF] Request starting HTTP/1.1 GET http://localhost:5050/Options?activityId=42 - null null
[2025-08-02 18:10:29 INF] Executing endpoint 'TourManagementApi.Controllers.OptionsController.Index (TourManagementApi)'
[2025-08-02 18:10:29 INF] Route matched with {action = "Index", controller = "Options"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index(System.Nullable`1[System.Int32]) on controller TourManagementApi.Controllers.OptionsController (TourManagementApi).
[2025-08-02 18:10:29 INF] Executing action method TourManagementApi.Controllers.OptionsController.Index (TourManagementApi) - Validation state: "Valid"
[2025-08-02 18:10:29 INF] Executed DbCommand (49ms) [Parameters=[@__activityId_0='42' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[B2BAgencyId], [a].[Category], [a].[ContactInfo_Email], [a].[ContactInfoIsNull], [a].[ContactInfo_Name], [a].[ContactInfo_Phone], [a].[ContactInfo_Role], [a].[CountryCode], [a].[CoverImage], [a].[CreatedAt], [a].[Description], [a].[DestinationCode], [a].[DestinationName], [a].[DetailsUrl], [a].[Duration], [a].[Exclusions], [a].[ExclusionsJson], [a].[GalleryImages], [a].[GuestFields], [a].[GuestFieldsJson], [a].[Highlights], [a].[ImportantInfo], [a].[ImportantInfoJson], [a].[Inclusions], [a].[InclusionsJson], [a].[IsActive], [a].[IsFreeCancellation], [a].[Itinerary], [a].[Label], [a].[Media_Videos], [a].[PartnerSupplierId], [a].[PreviewImage], [a].[Rating], [a].[Status], [a].[Title], [a].[TotalRatingCount], [a].[TourCompanyId], [a].[UpdatedAt]
FROM [Activities] AS [a]
WHERE [a].[Id] = @__activityId_0
[2025-08-02 18:10:29 INF] Executed DbCommand (25ms) [Parameters=[@__activityId_0='42' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[ActivityId], [o].[CanBeBookedAfterStartTime], [o].[CutOff], [o].[Duration], [o].[EndTime], [o].[FromDate], [o].[Name], [o].[StartTime], [o].[UntilDate], [o].[Weekdays]
FROM [Options] AS [o]
WHERE [o].[ActivityId] = @__activityId_0
[2025-08-02 18:10:29 INF] Executed action method TourManagementApi.Controllers.OptionsController.Index (TourManagementApi), returned result Microsoft.AspNetCore.Mvc.ViewResult in 258.8877ms.
[2025-08-02 18:10:31 INF] Request starting HTTP/1.1 GET http://localhost:5050/Options?activityId=42 - null null
[2025-08-02 18:10:31 INF] Executing endpoint 'TourManagementApi.Controllers.OptionsController.Index (TourManagementApi)'
[2025-08-02 18:10:31 INF] Route matched with {action = "Index", controller = "Options"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index(System.Nullable`1[System.Int32]) on controller TourManagementApi.Controllers.OptionsController (TourManagementApi).
[2025-08-02 18:10:31 INF] Executing action method TourManagementApi.Controllers.OptionsController.Index (TourManagementApi) - Validation state: "Valid"
[2025-08-02 18:10:31 INF] Executed DbCommand (26ms) [Parameters=[@__activityId_0='42' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[B2BAgencyId], [a].[Category], [a].[ContactInfo_Email], [a].[ContactInfoIsNull], [a].[ContactInfo_Name], [a].[ContactInfo_Phone], [a].[ContactInfo_Role], [a].[CountryCode], [a].[CoverImage], [a].[CreatedAt], [a].[Description], [a].[DestinationCode], [a].[DestinationName], [a].[DetailsUrl], [a].[Duration], [a].[Exclusions], [a].[ExclusionsJson], [a].[GalleryImages], [a].[GuestFields], [a].[GuestFieldsJson], [a].[Highlights], [a].[ImportantInfo], [a].[ImportantInfoJson], [a].[Inclusions], [a].[InclusionsJson], [a].[IsActive], [a].[IsFreeCancellation], [a].[Itinerary], [a].[Label], [a].[Media_Videos], [a].[PartnerSupplierId], [a].[PreviewImage], [a].[Rating], [a].[Status], [a].[Title], [a].[TotalRatingCount], [a].[TourCompanyId], [a].[UpdatedAt]
FROM [Activities] AS [a]
WHERE [a].[Id] = @__activityId_0
[2025-08-02 18:10:31 INF] Executed DbCommand (25ms) [Parameters=[@__activityId_0='42' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[ActivityId], [o].[CanBeBookedAfterStartTime], [o].[CutOff], [o].[Duration], [o].[EndTime], [o].[FromDate], [o].[Name], [o].[StartTime], [o].[UntilDate], [o].[Weekdays]
FROM [Options] AS [o]
WHERE [o].[ActivityId] = @__activityId_0
[2025-08-02 18:10:31 INF] Executed action method TourManagementApi.Controllers.OptionsController.Index (TourManagementApi), returned result Microsoft.AspNetCore.Mvc.ViewResult in 53.3506ms.
[2025-08-02 18:10:31 INF] Executing ViewResult, running view Index.
[2025-08-02 18:10:31 INF] Executing ViewResult, running view Index.
[2025-08-02 18:10:32 INF] Executed ViewResult - view Index executed in 2616.501ms.
[2025-08-02 18:10:32 INF] Executed ViewResult - view Index executed in 647.392ms.
[2025-08-02 18:10:32 INF] Executed action TourManagementApi.Controllers.OptionsController.Index (TourManagementApi) in 710.9197ms
[2025-08-02 18:10:32 INF] Executed action TourManagementApi.Controllers.OptionsController.Index (TourManagementApi) in 2890.3513ms
[2025-08-02 18:10:32 INF] Executed endpoint 'TourManagementApi.Controllers.OptionsController.Index (TourManagementApi)'
[2025-08-02 18:10:32 INF] Executed endpoint 'TourManagementApi.Controllers.OptionsController.Index (TourManagementApi)'
[2025-08-02 18:10:32 ERR] An unhandled exception has occurred while executing the request.
System.IO.IOException: The process cannot access the file 'D:\TFS\Lymranet\Tourism\B2B\HotelWidget\TourManagement\Logs\responses-2025-08-02.log' because it is being used by another process.
   at Microsoft.Win32.SafeHandles.SafeFileHandle.CreateFile(String fullPath, FileMode mode, FileAccess access, FileShare share, FileOptions options)
   at Microsoft.Win32.SafeHandles.SafeFileHandle.Open(String fullPath, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.File.OpenHandle(String path, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize)
   at System.IO.File.WriteToFileAsync(String path, FileMode mode, String contents, Encoding encoding, CancellationToken cancellationToken)
   at TourManagementApi.Middleware.RequestResponseLoggingMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
[2025-08-02 18:10:32 INF] Request finished HTTP/1.1 GET http://localhost:5050/Options?activityId=42 - 200 null text/html; charset=utf-8 3260.1271ms
[2025-08-02 18:10:32 ERR] An exception was thrown attempting to display the error page.
System.ObjectDisposedException: Cannot access a closed Stream.
Object name: 'MemoryStream'.
   at System.IO.Stream.ValidateCopyToArguments(Stream destination, Int32 bufferSize)
   at System.IO.MemoryStream.CopyToAsync(Stream destination, Int32 bufferSize, CancellationToken cancellationToken)
   at System.IO.Stream.CopyToAsync(Stream destination)
   at Microsoft.Extensions.RazorViews.BaseView.ExecuteAsync(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
[2025-08-02 18:10:32 ERR] An unhandled exception has occurred while executing the request.
System.IO.IOException: The process cannot access the file 'D:\TFS\Lymranet\Tourism\B2B\HotelWidget\TourManagement\Logs\responses-2025-08-02.log' because it is being used by another process.
   at Microsoft.Win32.SafeHandles.SafeFileHandle.CreateFile(String fullPath, FileMode mode, FileAccess access, FileShare share, FileOptions options)
   at Microsoft.Win32.SafeHandles.SafeFileHandle.Open(String fullPath, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.File.OpenHandle(String path, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize)
   at System.IO.File.WriteToFileAsync(String path, FileMode mode, String contents, Encoding encoding, CancellationToken cancellationToken)
   at TourManagementApi.Middleware.RequestResponseLoggingMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
[2025-08-02 18:10:32 ERR] An exception was thrown attempting to display the error page.
System.ObjectDisposedException: Cannot access a closed Stream.
Object name: 'MemoryStream'.
   at System.IO.Stream.ValidateCopyToArguments(Stream destination, Int32 bufferSize)
   at System.IO.MemoryStream.CopyToAsync(Stream destination, Int32 bufferSize, CancellationToken cancellationToken)
   at System.IO.Stream.CopyToAsync(Stream destination)
   at Microsoft.Extensions.RazorViews.BaseView.ExecuteAsync(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
[2025-08-02 18:10:32 ERR] Connection id "0HNEHQP4N7TQS", Request id "0HNEHQP4N7TQS:00000001": An unhandled exception was thrown by the application.
System.IO.IOException: The process cannot access the file 'D:\TFS\Lymranet\Tourism\B2B\HotelWidget\TourManagement\Logs\responses-2025-08-02.log' because it is being used by another process.
   at Microsoft.Win32.SafeHandles.SafeFileHandle.CreateFile(String fullPath, FileMode mode, FileAccess access, FileShare share, FileOptions options)
   at Microsoft.Win32.SafeHandles.SafeFileHandle.Open(String fullPath, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.File.OpenHandle(String path, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize)
   at System.IO.File.WriteToFileAsync(String path, FileMode mode, String contents, Encoding encoding, CancellationToken cancellationToken)
   at TourManagementApi.Middleware.RequestResponseLoggingMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
   at Microsoft.WebTools.BrowserLink.Net.BrowserLinkMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Watch.BrowserRefresh.BrowserRefreshMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ProcessRequests[TContext](IHttpApplication`1 application)
[2025-08-02 18:10:32 INF] Request finished HTTP/1.1 GET http://localhost:5050/Options?activityId=42 - 500 0 null 1623.8161ms
[2025-08-02 18:11:01 INF] Request starting HTTP/1.1 GET http://localhost:5050/api/rezdyconnect/products?apiKey=6f686c1986af4830aefb398dc2525bc6&externalProductCode=42&productCode=PSMJP4&offset=0&limit=100 - null null
[2025-08-02 18:11:01 INF] Executing endpoint 'TourManagementApi.Controllers.Api.RezdyConnectController.GetProducts (TourManagementApi)'
[2025-08-02 18:11:01 INF] Route matched with {action = "GetProducts", controller = "RezdyConnect"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetProducts(System.String, Int32, Int32, System.Collections.Generic.List`1[System.String], System.Collections.Generic.List`1[System.String]) on controller TourManagementApi.Controllers.Api.RezdyConnectController (TourManagementApi).
[2025-08-02 18:11:01 INF] Executing action method TourManagementApi.Controllers.Api.RezdyConnectController.GetProducts (TourManagementApi) - Validation state: "Valid"
[2025-08-02 18:11:01 INF] Executed DbCommand (36ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[B2BAgencyId], [a].[Category], [a].[ContactInfo_Email], [a].[ContactInfoIsNull], [a].[ContactInfo_Name], [a].[ContactInfo_Phone], [a].[ContactInfo_Role], [a].[CountryCode], [a].[CoverImage], [a].[CreatedAt], [a].[Description], [a].[DestinationCode], [a].[DestinationName], [a].[DetailsUrl], [a].[Duration], [a].[Exclusions], [a].[ExclusionsJson], [a].[GalleryImages], [a].[GuestFields], [a].[GuestFieldsJson], [a].[Highlights], [a].[ImportantInfo], [a].[ImportantInfoJson], [a].[Inclusions], [a].[InclusionsJson], [a].[IsActive], [a].[IsFreeCancellation], [a].[Itinerary], [a].[Label], [a].[Media_Videos], [a].[PartnerSupplierId], [a].[PreviewImage], [a].[Rating], [a].[Status], [a].[Title], [a].[TotalRatingCount], [a].[TourCompanyId], [a].[UpdatedAt], [a0].[Id], [a0].[ActivityId], [a0].[LanguageCode], [a1].[Id], [a1].[ActivityId], [a1].[Currency], [a1].[Description], [a1].[PriceAmount], [a1].[Title], [a1].[Type], [p].[ActivityPricingActivityId], [p].[Id], [p].[Amount], [p].[Currency], [p].[Description], [p].[DiscountType], [p].[DiscountValue], [p].[MaxAge], [p].[MaxParticipants], [p].[MinAge], [p].[MinParticipants], [p].[PriceType], [p].[Type], [m].[ActivityId], [m].[Id], [m].[Address], [m].[Latitude], [m].[Longitude], [m].[Name], [s].[Id], [s].[ActivityId], [s].[CanBeBookedAfterStartTime], [s].[CutOff], [s].[Duration], [s].[EndTime], [s].[FromDate], [s].[Name], [s].[StartTime], [s].[UntilDate], [s].[Weekdays], [s].[Id0], [s].[Amount], [s].[Currency], [s].[MaxAge], [s].[MaxSeats], [s].[MinAge], [s].[MinSeats], [s].[Name0], [s].[OptionId], [s].[PriceType], [s].[Type]
FROM [Activities] AS [a]
LEFT JOIN [ActivityLanguages] AS [a0] ON [a].[Id] = [a0].[ActivityId]
LEFT JOIN [Addons] AS [a1] ON [a].[Id] = [a1].[ActivityId]
LEFT JOIN [PriceCategory] AS [p] ON [a].[Id] = [p].[ActivityPricingActivityId]
LEFT JOIN [MeetingPoint] AS [m] ON [a].[Id] = [m].[ActivityId]
LEFT JOIN (
    SELECT [o].[Id], [o].[ActivityId], [o].[CanBeBookedAfterStartTime], [o].[CutOff], [o].[Duration], [o].[EndTime], [o].[FromDate], [o].[Name], [o].[StartTime], [o].[UntilDate], [o].[Weekdays], [t].[Id] AS [Id0], [t].[Amount], [t].[Currency], [t].[MaxAge], [t].[MaxSeats], [t].[MinAge], [t].[MinSeats], [t].[Name] AS [Name0], [t].[OptionId], [t].[PriceType], [t].[Type]
    FROM [Options] AS [o]
    LEFT JOIN [TicketCategories] AS [t] ON [o].[Id] = [t].[OptionId]
) AS [s] ON [a].[Id] = [s].[ActivityId]
ORDER BY [a].[Id], [a0].[Id], [a1].[Id], [p].[ActivityPricingActivityId], [p].[Id], [m].[ActivityId], [m].[Id], [s].[Id]
[2025-08-02 18:11:02 INF] Executed action TourManagementApi.Controllers.Api.RezdyConnectController.GetProducts (TourManagementApi) in 1032.5863ms
[2025-08-02 18:11:02 INF] Executed endpoint 'TourManagementApi.Controllers.Api.RezdyConnectController.GetProducts (TourManagementApi)'
[2025-08-02 18:11:02 ERR] Bir sistem hatası oluştu. Path: /api/rezdyconnect/products, CorrelationId: b039505e-b522-4478-8da8-52cd166e0b96
System.InvalidOperationException: Sequence contains no elements
   at System.Linq.ThrowHelper.ThrowNoElementsException()
   at System.Linq.Enumerable.Min[TSource](IEnumerable`1 source, Func`2 selector)
   at TourManagementApi.Services.ActivityExtensions.ToRezdyDto(Activity activity, String apiKey, String baseApiUrl, String baseImageUrl)
   at TourManagementApi.Services.ProductService.<>c__DisplayClass4_0.<GetAll>b__6(Activity a)
   at System.Linq.Enumerable.SelectListIterator`2.Fill(ReadOnlySpan`1 source, Span`1 destination, Func`2 func)
   at System.Linq.Enumerable.SelectListIterator`2.ToList()
   at TourManagementApi.Services.ProductService.GetAll()
   at TourManagementApi.Controllers.Api.RezdyConnectController.GetProducts(String apiKey, Int32 offset, Int32 limit, List`1 productCodes, List`1 externalProductCodes)
   at lambda_method1123(Closure, Object, Object[])
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.SyncActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.StatusCodePagesMiddleware.Invoke(HttpContext context)
   at TourManagementApi.Middleware.GlobalExceptionMiddleware.Invoke(HttpContext context)
[2025-08-02 18:11:02 INF] Request finished HTTP/1.1 GET http://localhost:5050/api/rezdyconnect/products?apiKey=6f686c1986af4830aefb398dc2525bc6&externalProductCode=42&productCode=PSMJP4&offset=0&limit=100 - 500 null application/json 1215.4053ms
[2025-08-02 18:11:08 INF] Request starting HTTP/1.1 GET http://localhost:5050/api/rezdyconnect/products?apiKey=6f686c1986af4830aefb398dc2525bc6&externalProductCode=42&productCode=PSMJP4&offset=0&limit=100 - null null
[2025-08-02 18:11:08 INF] Executing endpoint 'TourManagementApi.Controllers.Api.RezdyConnectController.GetProducts (TourManagementApi)'
[2025-08-02 18:11:08 INF] Route matched with {action = "GetProducts", controller = "RezdyConnect"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetProducts(System.String, Int32, Int32, System.Collections.Generic.List`1[System.String], System.Collections.Generic.List`1[System.String]) on controller TourManagementApi.Controllers.Api.RezdyConnectController (TourManagementApi).
[2025-08-02 18:11:08 INF] Executing action method TourManagementApi.Controllers.Api.RezdyConnectController.GetProducts (TourManagementApi) - Validation state: "Valid"
[2025-08-02 18:11:08 INF] Executed DbCommand (36ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[B2BAgencyId], [a].[Category], [a].[ContactInfo_Email], [a].[ContactInfoIsNull], [a].[ContactInfo_Name], [a].[ContactInfo_Phone], [a].[ContactInfo_Role], [a].[CountryCode], [a].[CoverImage], [a].[CreatedAt], [a].[Description], [a].[DestinationCode], [a].[DestinationName], [a].[DetailsUrl], [a].[Duration], [a].[Exclusions], [a].[ExclusionsJson], [a].[GalleryImages], [a].[GuestFields], [a].[GuestFieldsJson], [a].[Highlights], [a].[ImportantInfo], [a].[ImportantInfoJson], [a].[Inclusions], [a].[InclusionsJson], [a].[IsActive], [a].[IsFreeCancellation], [a].[Itinerary], [a].[Label], [a].[Media_Videos], [a].[PartnerSupplierId], [a].[PreviewImage], [a].[Rating], [a].[Status], [a].[Title], [a].[TotalRatingCount], [a].[TourCompanyId], [a].[UpdatedAt], [a0].[Id], [a0].[ActivityId], [a0].[LanguageCode], [a1].[Id], [a1].[ActivityId], [a1].[Currency], [a1].[Description], [a1].[PriceAmount], [a1].[Title], [a1].[Type], [p].[ActivityPricingActivityId], [p].[Id], [p].[Amount], [p].[Currency], [p].[Description], [p].[DiscountType], [p].[DiscountValue], [p].[MaxAge], [p].[MaxParticipants], [p].[MinAge], [p].[MinParticipants], [p].[PriceType], [p].[Type], [m].[ActivityId], [m].[Id], [m].[Address], [m].[Latitude], [m].[Longitude], [m].[Name], [s].[Id], [s].[ActivityId], [s].[CanBeBookedAfterStartTime], [s].[CutOff], [s].[Duration], [s].[EndTime], [s].[FromDate], [s].[Name], [s].[StartTime], [s].[UntilDate], [s].[Weekdays], [s].[Id0], [s].[Amount], [s].[Currency], [s].[MaxAge], [s].[MaxSeats], [s].[MinAge], [s].[MinSeats], [s].[Name0], [s].[OptionId], [s].[PriceType], [s].[Type]
FROM [Activities] AS [a]
LEFT JOIN [ActivityLanguages] AS [a0] ON [a].[Id] = [a0].[ActivityId]
LEFT JOIN [Addons] AS [a1] ON [a].[Id] = [a1].[ActivityId]
LEFT JOIN [PriceCategory] AS [p] ON [a].[Id] = [p].[ActivityPricingActivityId]
LEFT JOIN [MeetingPoint] AS [m] ON [a].[Id] = [m].[ActivityId]
LEFT JOIN (
    SELECT [o].[Id], [o].[ActivityId], [o].[CanBeBookedAfterStartTime], [o].[CutOff], [o].[Duration], [o].[EndTime], [o].[FromDate], [o].[Name], [o].[StartTime], [o].[UntilDate], [o].[Weekdays], [t].[Id] AS [Id0], [t].[Amount], [t].[Currency], [t].[MaxAge], [t].[MaxSeats], [t].[MinAge], [t].[MinSeats], [t].[Name] AS [Name0], [t].[OptionId], [t].[PriceType], [t].[Type]
    FROM [Options] AS [o]
    LEFT JOIN [TicketCategories] AS [t] ON [o].[Id] = [t].[OptionId]
) AS [s] ON [a].[Id] = [s].[ActivityId]
ORDER BY [a].[Id], [a0].[Id], [a1].[Id], [p].[ActivityPricingActivityId], [p].[Id], [m].[ActivityId], [m].[Id], [s].[Id]
[2025-08-02 18:21:31 WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
[2025-08-02 18:21:31 ERR] Veritabanı güncellenirken bir hata oluştu.
System.InvalidOperationException: An error was generated for warning 'Microsoft.EntityFrameworkCore.Migrations.PendingModelChangesWarning': The model for context 'ApplicationDbContext' has pending changes. Add a new migration before updating the database. See https://aka.ms/efcore-docs-pending-changes. This exception can be suppressed or logged by passing event ID 'RelationalEventId.PendingModelChangesWarning' to the 'ConfigureWarnings' method in 'DbContext.OnConfiguring' or 'AddDbContext'.
   at Microsoft.EntityFrameworkCore.Diagnostics.EventDefinition`1.Log[TLoggerCategory](IDiagnosticsLogger`1 logger, TParam arg)
   at Microsoft.EntityFrameworkCore.Diagnostics.RelationalLoggerExtensions.PendingModelChangesWarning(IDiagnosticsLogger`1 diagnostics, Type contextType)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.Migrator.ValidateMigrations(Boolean useTransaction, String targetMigration)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.Migrator.Migrate(String targetMigration)
   at Microsoft.EntityFrameworkCore.RelationalDatabaseFacadeExtensions.Migrate(DatabaseFacade databaseFacade)
   at Program.<Main>$(String[] args) in D:\TFS\Lymranet\Tourism\B2B\HotelWidget\TourManagement\Program.cs:line 160
[2025-08-02 18:21:32 INF] User profile is available. Using 'C:\Users\OZKAN\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2025-08-02 18:21:32 INF] Now listening on: http://localhost:5050
[2025-08-02 18:21:32 INF] Application started. Press Ctrl+C to shut down.
[2025-08-02 18:21:32 INF] Hosting environment: Development
[2025-08-02 18:21:32 INF] Content root path: D:\TFS\Lymranet\Tourism\B2B\HotelWidget\TourManagement
[2025-08-02 18:21:53 INF] Request starting HTTP/1.1 GET http://localhost:5050/api/rezdyconnect/products?apiKey=6f686c1986af4830aefb398dc2525bc6&externalProductCode=42&productCode=PSMJP4&offset=0&limit=100 - null null
[2025-08-02 18:21:53 INF] Executing endpoint 'TourManagementApi.Controllers.Api.RezdyConnectController.GetProducts (TourManagementApi)'
[2025-08-02 18:21:53 INF] Route matched with {action = "GetProducts", controller = "RezdyConnect"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetProducts(System.String, Int32, Int32, System.Collections.Generic.List`1[System.String], System.Collections.Generic.List`1[System.String]) on controller TourManagementApi.Controllers.Api.RezdyConnectController (TourManagementApi).
[2025-08-02 18:21:53 INF] Executing action method TourManagementApi.Controllers.Api.RezdyConnectController.GetProducts (TourManagementApi) - Validation state: "Valid"
[2025-08-02 18:21:53 WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
[2025-08-02 18:21:53 INF] Executed DbCommand (76ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[B2BAgencyId], [a].[Category], [a].[ContactInfo_Email], [a].[ContactInfoIsNull], [a].[ContactInfo_Name], [a].[ContactInfo_Phone], [a].[ContactInfo_Role], [a].[CountryCode], [a].[CoverImage], [a].[CreatedAt], [a].[Description], [a].[DestinationCode], [a].[DestinationName], [a].[DetailsUrl], [a].[Duration], [a].[Exclusions], [a].[ExclusionsJson], [a].[GalleryImages], [a].[GuestFields], [a].[GuestFieldsJson], [a].[Highlights], [a].[ImportantInfo], [a].[ImportantInfoJson], [a].[Inclusions], [a].[InclusionsJson], [a].[IsActive], [a].[IsFreeCancellation], [a].[Itinerary], [a].[Label], [a].[Media_Videos], [a].[PartnerSupplierId], [a].[PreviewImage], [a].[Rating], [a].[Status], [a].[Title], [a].[TotalRatingCount], [a].[TourCompanyId], [a].[UpdatedAt], [a0].[Id], [a0].[ActivityId], [a0].[LanguageCode], [a1].[Id], [a1].[ActivityId], [a1].[Currency], [a1].[Description], [a1].[PriceAmount], [a1].[Title], [a1].[Type], [p].[ActivityPricingActivityId], [p].[Id], [p].[Amount], [p].[Currency], [p].[Description], [p].[DiscountType], [p].[DiscountValue], [p].[MaxAge], [p].[MaxParticipants], [p].[MinAge], [p].[MinParticipants], [p].[PriceType], [p].[Type], [m].[ActivityId], [m].[Id], [m].[Address], [m].[Latitude], [m].[Longitude], [m].[Name], [s].[Id], [s].[ActivityId], [s].[CanBeBookedAfterStartTime], [s].[CutOff], [s].[Duration], [s].[EndTime], [s].[FromDate], [s].[Name], [s].[StartTime], [s].[UntilDate], [s].[Weekdays], [s].[Id0], [s].[Amount], [s].[Currency], [s].[MaxAge], [s].[MaxSeats], [s].[MinAge], [s].[MinSeats], [s].[Name0], [s].[OptionId], [s].[PriceType], [s].[Type]
FROM [Activities] AS [a]
LEFT JOIN [ActivityLanguages] AS [a0] ON [a].[Id] = [a0].[ActivityId]
LEFT JOIN [Addons] AS [a1] ON [a].[Id] = [a1].[ActivityId]
LEFT JOIN [PriceCategory] AS [p] ON [a].[Id] = [p].[ActivityPricingActivityId]
LEFT JOIN [MeetingPoint] AS [m] ON [a].[Id] = [m].[ActivityId]
LEFT JOIN (
    SELECT [o].[Id], [o].[ActivityId], [o].[CanBeBookedAfterStartTime], [o].[CutOff], [o].[Duration], [o].[EndTime], [o].[FromDate], [o].[Name], [o].[StartTime], [o].[UntilDate], [o].[Weekdays], [t].[Id] AS [Id0], [t].[Amount], [t].[Currency], [t].[MaxAge], [t].[MaxSeats], [t].[MinAge], [t].[MinSeats], [t].[Name] AS [Name0], [t].[OptionId], [t].[PriceType], [t].[Type]
    FROM [Options] AS [o]
    LEFT JOIN [TicketCategories] AS [t] ON [o].[Id] = [t].[OptionId]
) AS [s] ON [a].[Id] = [s].[ActivityId]
ORDER BY [a].[Id], [a0].[Id], [a1].[Id], [p].[ActivityPricingActivityId], [p].[Id], [m].[ActivityId], [m].[Id], [s].[Id]
[2025-08-02 18:25:35 INF] Executed action TourManagementApi.Controllers.Api.RezdyConnectController.GetProducts (TourManagementApi) in 222139.2871ms
[2025-08-02 18:25:35 INF] Executed endpoint 'TourManagementApi.Controllers.Api.RezdyConnectController.GetProducts (TourManagementApi)'
[2025-08-02 18:25:35 ERR] Bir sistem hatası oluştu. Path: /api/rezdyconnect/products, CorrelationId: 2b0d71ea-59b7-44dd-9a36-1e090d1f30e6
System.InvalidOperationException: Sequence contains no elements
   at System.Linq.ThrowHelper.ThrowNoElementsException()
   at System.Linq.Enumerable.Min[TSource](IEnumerable`1 source, Func`2 selector)
   at TourManagementApi.Services.ActivityExtensions.ToRezdyDto(Activity activity, String apiKey, String baseApiUrl, String baseImageUrl) in D:\TFS\Lymranet\Tourism\B2B\HotelWidget\TourManagement\Services\ProductService.cs:line 103
   at TourManagementApi.Services.ProductService.<>c__DisplayClass4_0.<GetAll>b__6(Activity a) in D:\TFS\Lymranet\Tourism\B2B\HotelWidget\TourManagement\Services\ProductService.cs:line 40
   at System.Linq.Enumerable.SelectListIterator`2.Fill(ReadOnlySpan`1 source, Span`1 destination, Func`2 func)
   at System.Linq.Enumerable.SelectListIterator`2.ToList()
   at TourManagementApi.Services.ProductService.GetAll() in D:\TFS\Lymranet\Tourism\B2B\HotelWidget\TourManagement\Services\ProductService.cs:line 40
   at TourManagementApi.Controllers.Api.RezdyConnectController.GetProducts(String apiKey, Int32 offset, Int32 limit, List`1 productCodes, List`1 externalProductCodes) in D:\TFS\Lymranet\Tourism\B2B\HotelWidget\TourManagement\Controllers\Api\RezdyConnectController.cs:line 79
   at lambda_method24(Closure, Object, Object[])
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.SyncActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.StatusCodePagesMiddleware.Invoke(HttpContext context)
   at TourManagementApi.Middleware.GlobalExceptionMiddleware.Invoke(HttpContext context) in D:\TFS\Lymranet\Tourism\B2B\HotelWidget\TourManagement\Middleware\GlobalExceptionMiddleware.cs:line 32
[2025-08-02 18:25:35 INF] Request finished HTTP/1.1 GET http://localhost:5050/api/rezdyconnect/products?apiKey=6f686c1986af4830aefb398dc2525bc6&externalProductCode=42&productCode=PSMJP4&offset=0&limit=100 - 500 null application/json 222412.0288ms
[2025-08-02 18:25:37 INF] Request starting HTTP/1.1 GET http://localhost:5050/api/rezdyconnect/products?apiKey=6f686c1986af4830aefb398dc2525bc6&externalProductCode=42&productCode=PSMJP4&offset=0&limit=100 - null null
[2025-08-02 18:25:37 INF] Executing endpoint 'TourManagementApi.Controllers.Api.RezdyConnectController.GetProducts (TourManagementApi)'
[2025-08-02 18:25:37 INF] Route matched with {action = "GetProducts", controller = "RezdyConnect"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetProducts(System.String, Int32, Int32, System.Collections.Generic.List`1[System.String], System.Collections.Generic.List`1[System.String]) on controller TourManagementApi.Controllers.Api.RezdyConnectController (TourManagementApi).
[2025-08-02 18:25:37 INF] Executing action method TourManagementApi.Controllers.Api.RezdyConnectController.GetProducts (TourManagementApi) - Validation state: "Valid"
[2025-08-02 18:25:38 INF] Executed DbCommand (38ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[B2BAgencyId], [a].[Category], [a].[ContactInfo_Email], [a].[ContactInfoIsNull], [a].[ContactInfo_Name], [a].[ContactInfo_Phone], [a].[ContactInfo_Role], [a].[CountryCode], [a].[CoverImage], [a].[CreatedAt], [a].[Description], [a].[DestinationCode], [a].[DestinationName], [a].[DetailsUrl], [a].[Duration], [a].[Exclusions], [a].[ExclusionsJson], [a].[GalleryImages], [a].[GuestFields], [a].[GuestFieldsJson], [a].[Highlights], [a].[ImportantInfo], [a].[ImportantInfoJson], [a].[Inclusions], [a].[InclusionsJson], [a].[IsActive], [a].[IsFreeCancellation], [a].[Itinerary], [a].[Label], [a].[Media_Videos], [a].[PartnerSupplierId], [a].[PreviewImage], [a].[Rating], [a].[Status], [a].[Title], [a].[TotalRatingCount], [a].[TourCompanyId], [a].[UpdatedAt], [a0].[Id], [a0].[ActivityId], [a0].[LanguageCode], [a1].[Id], [a1].[ActivityId], [a1].[Currency], [a1].[Description], [a1].[PriceAmount], [a1].[Title], [a1].[Type], [p].[ActivityPricingActivityId], [p].[Id], [p].[Amount], [p].[Currency], [p].[Description], [p].[DiscountType], [p].[DiscountValue], [p].[MaxAge], [p].[MaxParticipants], [p].[MinAge], [p].[MinParticipants], [p].[PriceType], [p].[Type], [m].[ActivityId], [m].[Id], [m].[Address], [m].[Latitude], [m].[Longitude], [m].[Name], [s].[Id], [s].[ActivityId], [s].[CanBeBookedAfterStartTime], [s].[CutOff], [s].[Duration], [s].[EndTime], [s].[FromDate], [s].[Name], [s].[StartTime], [s].[UntilDate], [s].[Weekdays], [s].[Id0], [s].[Amount], [s].[Currency], [s].[MaxAge], [s].[MaxSeats], [s].[MinAge], [s].[MinSeats], [s].[Name0], [s].[OptionId], [s].[PriceType], [s].[Type]
FROM [Activities] AS [a]
LEFT JOIN [ActivityLanguages] AS [a0] ON [a].[Id] = [a0].[ActivityId]
LEFT JOIN [Addons] AS [a1] ON [a].[Id] = [a1].[ActivityId]
LEFT JOIN [PriceCategory] AS [p] ON [a].[Id] = [p].[ActivityPricingActivityId]
LEFT JOIN [MeetingPoint] AS [m] ON [a].[Id] = [m].[ActivityId]
LEFT JOIN (
    SELECT [o].[Id], [o].[ActivityId], [o].[CanBeBookedAfterStartTime], [o].[CutOff], [o].[Duration], [o].[EndTime], [o].[FromDate], [o].[Name], [o].[StartTime], [o].[UntilDate], [o].[Weekdays], [t].[Id] AS [Id0], [t].[Amount], [t].[Currency], [t].[MaxAge], [t].[MaxSeats], [t].[MinAge], [t].[MinSeats], [t].[Name] AS [Name0], [t].[OptionId], [t].[PriceType], [t].[Type]
    FROM [Options] AS [o]
    LEFT JOIN [TicketCategories] AS [t] ON [o].[Id] = [t].[OptionId]
) AS [s] ON [a].[Id] = [s].[ActivityId]
ORDER BY [a].[Id], [a0].[Id], [a1].[Id], [p].[ActivityPricingActivityId], [p].[Id], [m].[ActivityId], [m].[Id], [s].[Id]
[2025-08-02 18:31:05 WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
[2025-08-02 18:31:05 ERR] Veritabanı güncellenirken bir hata oluştu.
System.InvalidOperationException: An error was generated for warning 'Microsoft.EntityFrameworkCore.Migrations.PendingModelChangesWarning': The model for context 'ApplicationDbContext' has pending changes. Add a new migration before updating the database. See https://aka.ms/efcore-docs-pending-changes. This exception can be suppressed or logged by passing event ID 'RelationalEventId.PendingModelChangesWarning' to the 'ConfigureWarnings' method in 'DbContext.OnConfiguring' or 'AddDbContext'.
   at Microsoft.EntityFrameworkCore.Diagnostics.EventDefinition`1.Log[TLoggerCategory](IDiagnosticsLogger`1 logger, TParam arg)
   at Microsoft.EntityFrameworkCore.Diagnostics.RelationalLoggerExtensions.PendingModelChangesWarning(IDiagnosticsLogger`1 diagnostics, Type contextType)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.Migrator.ValidateMigrations(Boolean useTransaction, String targetMigration)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.Migrator.Migrate(String targetMigration)
   at Microsoft.EntityFrameworkCore.RelationalDatabaseFacadeExtensions.Migrate(DatabaseFacade databaseFacade)
   at Program.<Main>$(String[] args) in D:\TFS\Lymranet\Tourism\B2B\HotelWidget\TourManagement\Program.cs:line 160
[2025-08-02 18:31:06 INF] User profile is available. Using 'C:\Users\OZKAN\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2025-08-02 18:31:06 INF] Now listening on: http://localhost:5050
[2025-08-02 18:31:06 INF] Application started. Press Ctrl+C to shut down.
[2025-08-02 18:31:06 INF] Hosting environment: Development
[2025-08-02 18:31:06 INF] Content root path: D:\TFS\Lymranet\Tourism\B2B\HotelWidget\TourManagement
[2025-08-02 18:31:06 INF] Request starting HTTP/1.1 GET http://localhost:5050/api/rezdyconnect/products?apiKey=6f686c1986af4830aefb398dc2525bc6&externalProductCode=42&productCode=PSMJP4&offset=0&limit=100 - null null
[2025-08-02 18:31:06 INF] Executing endpoint 'TourManagementApi.Controllers.Api.RezdyConnectController.GetProducts (TourManagementApi)'
[2025-08-02 18:31:06 INF] Route matched with {action = "GetProducts", controller = "RezdyConnect"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetProducts(System.String, Int32, Int32, System.Collections.Generic.List`1[System.String], System.Collections.Generic.List`1[System.String]) on controller TourManagementApi.Controllers.Api.RezdyConnectController (TourManagementApi).
[2025-08-02 18:31:06 INF] Executing action method TourManagementApi.Controllers.Api.RezdyConnectController.GetProducts (TourManagementApi) - Validation state: "Valid"
[2025-08-02 18:31:06 WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
[2025-08-02 18:31:07 INF] Executed DbCommand (70ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[B2BAgencyId], [a].[Category], [a].[ContactInfo_Email], [a].[ContactInfoIsNull], [a].[ContactInfo_Name], [a].[ContactInfo_Phone], [a].[ContactInfo_Role], [a].[CountryCode], [a].[CoverImage], [a].[CreatedAt], [a].[Description], [a].[DestinationCode], [a].[DestinationName], [a].[DetailsUrl], [a].[Duration], [a].[Exclusions], [a].[ExclusionsJson], [a].[GalleryImages], [a].[GuestFields], [a].[GuestFieldsJson], [a].[Highlights], [a].[ImportantInfo], [a].[ImportantInfoJson], [a].[Inclusions], [a].[InclusionsJson], [a].[IsActive], [a].[IsFreeCancellation], [a].[Itinerary], [a].[Label], [a].[Media_Videos], [a].[PartnerSupplierId], [a].[PreviewImage], [a].[Rating], [a].[Status], [a].[Title], [a].[TotalRatingCount], [a].[TourCompanyId], [a].[UpdatedAt], [a0].[Id], [a0].[ActivityId], [a0].[LanguageCode], [a1].[Id], [a1].[ActivityId], [a1].[Currency], [a1].[Description], [a1].[PriceAmount], [a1].[Title], [a1].[Type], [p].[ActivityPricingActivityId], [p].[Id], [p].[Amount], [p].[Currency], [p].[Description], [p].[DiscountType], [p].[DiscountValue], [p].[MaxAge], [p].[MaxParticipants], [p].[MinAge], [p].[MinParticipants], [p].[PriceType], [p].[Type], [m].[ActivityId], [m].[Id], [m].[Address], [m].[Latitude], [m].[Longitude], [m].[Name], [s].[Id], [s].[ActivityId], [s].[CanBeBookedAfterStartTime], [s].[CutOff], [s].[Duration], [s].[EndTime], [s].[FromDate], [s].[Name], [s].[StartTime], [s].[UntilDate], [s].[Weekdays], [s].[Id0], [s].[Amount], [s].[Currency], [s].[MaxAge], [s].[MaxSeats], [s].[MinAge], [s].[MinSeats], [s].[Name0], [s].[OptionId], [s].[PriceType], [s].[Type]
FROM [Activities] AS [a]
LEFT JOIN [ActivityLanguages] AS [a0] ON [a].[Id] = [a0].[ActivityId]
LEFT JOIN [Addons] AS [a1] ON [a].[Id] = [a1].[ActivityId]
LEFT JOIN [PriceCategory] AS [p] ON [a].[Id] = [p].[ActivityPricingActivityId]
LEFT JOIN [MeetingPoint] AS [m] ON [a].[Id] = [m].[ActivityId]
LEFT JOIN (
    SELECT [o].[Id], [o].[ActivityId], [o].[CanBeBookedAfterStartTime], [o].[CutOff], [o].[Duration], [o].[EndTime], [o].[FromDate], [o].[Name], [o].[StartTime], [o].[UntilDate], [o].[Weekdays], [t].[Id] AS [Id0], [t].[Amount], [t].[Currency], [t].[MaxAge], [t].[MaxSeats], [t].[MinAge], [t].[MinSeats], [t].[Name] AS [Name0], [t].[OptionId], [t].[PriceType], [t].[Type]
    FROM [Options] AS [o]
    LEFT JOIN [TicketCategories] AS [t] ON [o].[Id] = [t].[OptionId]
) AS [s] ON [a].[Id] = [s].[ActivityId]
ORDER BY [a].[Id], [a0].[Id], [a1].[Id], [p].[ActivityPricingActivityId], [p].[Id], [m].[ActivityId], [m].[Id], [s].[Id]
[2025-08-02 18:31:11 INF] Executed action method TourManagementApi.Controllers.Api.RezdyConnectController.GetProducts (TourManagementApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 5167.3141ms.
[2025-08-02 18:31:11 INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType35`2[[<>f__AnonymousType1`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], TourManagementApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[TourManagementApi.Models.Api.RezdyConnectModels.RezdyProductDto, TourManagementApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-08-02 18:31:11 INF] Executed action TourManagementApi.Controllers.Api.RezdyConnectController.GetProducts (TourManagementApi) in 5225.9173ms
[2025-08-02 18:31:11 INF] Executed endpoint 'TourManagementApi.Controllers.Api.RezdyConnectController.GetProducts (TourManagementApi)'
[2025-08-02 18:31:11 INF] Request finished HTTP/1.1 GET http://localhost:5050/api/rezdyconnect/products?apiKey=6f686c1986af4830aefb398dc2525bc6&externalProductCode=42&productCode=PSMJP4&offset=0&limit=100 - 200 null application/json; charset=utf-8 5395.2844ms
[2025-08-02 18:32:26 WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
[2025-08-02 18:32:26 ERR] Veritabanı güncellenirken bir hata oluştu.
System.InvalidOperationException: An error was generated for warning 'Microsoft.EntityFrameworkCore.Migrations.PendingModelChangesWarning': The model for context 'ApplicationDbContext' has pending changes. Add a new migration before updating the database. See https://aka.ms/efcore-docs-pending-changes. This exception can be suppressed or logged by passing event ID 'RelationalEventId.PendingModelChangesWarning' to the 'ConfigureWarnings' method in 'DbContext.OnConfiguring' or 'AddDbContext'.
   at Microsoft.EntityFrameworkCore.Diagnostics.EventDefinition`1.Log[TLoggerCategory](IDiagnosticsLogger`1 logger, TParam arg)
   at Microsoft.EntityFrameworkCore.Diagnostics.RelationalLoggerExtensions.PendingModelChangesWarning(IDiagnosticsLogger`1 diagnostics, Type contextType)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.Migrator.ValidateMigrations(Boolean useTransaction, String targetMigration)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.Migrator.Migrate(String targetMigration)
   at Microsoft.EntityFrameworkCore.RelationalDatabaseFacadeExtensions.Migrate(DatabaseFacade databaseFacade)
   at Program.<Main>$(String[] args) in D:\TFS\Lymranet\Tourism\B2B\HotelWidget\TourManagement\Program.cs:line 160
[2025-08-02 18:32:26 INF] User profile is available. Using 'C:\Users\OZKAN\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2025-08-02 18:32:26 INF] Now listening on: http://localhost:5050
[2025-08-02 18:32:26 INF] Application started. Press Ctrl+C to shut down.
[2025-08-02 18:32:26 INF] Hosting environment: Development
[2025-08-02 18:32:26 INF] Content root path: D:\TFS\Lymranet\Tourism\B2B\HotelWidget\TourManagement
[2025-08-02 18:32:31 INF] Request starting HTTP/1.1 GET http://localhost:5050/api/rezdyconnect/products?apiKey=6f686c1986af4830aefb398dc2525bc6&externalProductCode=42&productCode=PSMJP4&offset=0&limit=100 - null null
[2025-08-02 18:32:31 INF] Executing endpoint 'TourManagementApi.Controllers.Api.RezdyConnectController.GetProducts (TourManagementApi)'
[2025-08-02 18:32:31 INF] Route matched with {action = "GetProducts", controller = "RezdyConnect"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetProducts(System.String, Int32, Int32, System.Collections.Generic.List`1[System.String], System.Collections.Generic.List`1[System.String]) on controller TourManagementApi.Controllers.Api.RezdyConnectController (TourManagementApi).
[2025-08-02 18:32:31 INF] Executing action method TourManagementApi.Controllers.Api.RezdyConnectController.GetProducts (TourManagementApi) - Validation state: "Valid"
[2025-08-02 18:32:31 WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
[2025-08-02 18:32:32 INF] Executed DbCommand (81ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[B2BAgencyId], [a].[Category], [a].[ContactInfo_Email], [a].[ContactInfoIsNull], [a].[ContactInfo_Name], [a].[ContactInfo_Phone], [a].[ContactInfo_Role], [a].[CountryCode], [a].[CoverImage], [a].[CreatedAt], [a].[Description], [a].[DestinationCode], [a].[DestinationName], [a].[DetailsUrl], [a].[Duration], [a].[Exclusions], [a].[ExclusionsJson], [a].[GalleryImages], [a].[GuestFields], [a].[GuestFieldsJson], [a].[Highlights], [a].[ImportantInfo], [a].[ImportantInfoJson], [a].[Inclusions], [a].[InclusionsJson], [a].[IsActive], [a].[IsFreeCancellation], [a].[Itinerary], [a].[Label], [a].[Media_Videos], [a].[PartnerSupplierId], [a].[PreviewImage], [a].[Rating], [a].[Status], [a].[Title], [a].[TotalRatingCount], [a].[TourCompanyId], [a].[UpdatedAt], [a0].[Id], [a0].[ActivityId], [a0].[LanguageCode], [a1].[Id], [a1].[ActivityId], [a1].[Currency], [a1].[Description], [a1].[PriceAmount], [a1].[Title], [a1].[Type], [p].[ActivityPricingActivityId], [p].[Id], [p].[Amount], [p].[Currency], [p].[Description], [p].[DiscountType], [p].[DiscountValue], [p].[MaxAge], [p].[MaxParticipants], [p].[MinAge], [p].[MinParticipants], [p].[PriceType], [p].[Type], [m].[ActivityId], [m].[Id], [m].[Address], [m].[Latitude], [m].[Longitude], [m].[Name], [s].[Id], [s].[ActivityId], [s].[CanBeBookedAfterStartTime], [s].[CutOff], [s].[Duration], [s].[EndTime], [s].[FromDate], [s].[Name], [s].[StartTime], [s].[UntilDate], [s].[Weekdays], [s].[Id0], [s].[Amount], [s].[Currency], [s].[MaxAge], [s].[MaxSeats], [s].[MinAge], [s].[MinSeats], [s].[Name0], [s].[OptionId], [s].[PriceType], [s].[Type]
FROM [Activities] AS [a]
LEFT JOIN [ActivityLanguages] AS [a0] ON [a].[Id] = [a0].[ActivityId]
LEFT JOIN [Addons] AS [a1] ON [a].[Id] = [a1].[ActivityId]
LEFT JOIN [PriceCategory] AS [p] ON [a].[Id] = [p].[ActivityPricingActivityId]
LEFT JOIN [MeetingPoint] AS [m] ON [a].[Id] = [m].[ActivityId]
LEFT JOIN (
    SELECT [o].[Id], [o].[ActivityId], [o].[CanBeBookedAfterStartTime], [o].[CutOff], [o].[Duration], [o].[EndTime], [o].[FromDate], [o].[Name], [o].[StartTime], [o].[UntilDate], [o].[Weekdays], [t].[Id] AS [Id0], [t].[Amount], [t].[Currency], [t].[MaxAge], [t].[MaxSeats], [t].[MinAge], [t].[MinSeats], [t].[Name] AS [Name0], [t].[OptionId], [t].[PriceType], [t].[Type]
    FROM [Options] AS [o]
    LEFT JOIN [TicketCategories] AS [t] ON [o].[Id] = [t].[OptionId]
) AS [s] ON [a].[Id] = [s].[ActivityId]
ORDER BY [a].[Id], [a0].[Id], [a1].[Id], [p].[ActivityPricingActivityId], [p].[Id], [m].[ActivityId], [m].[Id], [s].[Id]
[2025-08-02 18:33:20 WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
[2025-08-02 18:33:20 ERR] Veritabanı güncellenirken bir hata oluştu.
System.InvalidOperationException: An error was generated for warning 'Microsoft.EntityFrameworkCore.Migrations.PendingModelChangesWarning': The model for context 'ApplicationDbContext' has pending changes. Add a new migration before updating the database. See https://aka.ms/efcore-docs-pending-changes. This exception can be suppressed or logged by passing event ID 'RelationalEventId.PendingModelChangesWarning' to the 'ConfigureWarnings' method in 'DbContext.OnConfiguring' or 'AddDbContext'.
   at Microsoft.EntityFrameworkCore.Diagnostics.EventDefinition`1.Log[TLoggerCategory](IDiagnosticsLogger`1 logger, TParam arg)
   at Microsoft.EntityFrameworkCore.Diagnostics.RelationalLoggerExtensions.PendingModelChangesWarning(IDiagnosticsLogger`1 diagnostics, Type contextType)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.Migrator.ValidateMigrations(Boolean useTransaction, String targetMigration)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.Migrator.Migrate(String targetMigration)
   at Microsoft.EntityFrameworkCore.RelationalDatabaseFacadeExtensions.Migrate(DatabaseFacade databaseFacade)
   at Program.<Main>$(String[] args) in D:\TFS\Lymranet\Tourism\B2B\HotelWidget\TourManagement\Program.cs:line 160
[2025-08-02 18:33:20 INF] User profile is available. Using 'C:\Users\OZKAN\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2025-08-02 18:33:20 INF] Now listening on: http://localhost:5050
[2025-08-02 18:33:20 INF] Application started. Press Ctrl+C to shut down.
[2025-08-02 18:33:20 INF] Hosting environment: Development
[2025-08-02 18:33:20 INF] Content root path: D:\TFS\Lymranet\Tourism\B2B\HotelWidget\TourManagement
[2025-08-02 18:33:24 INF] Request starting HTTP/1.1 GET http://localhost:5050/api/rezdyconnect/products?apiKey=6f686c1986af4830aefb398dc2525bc6&externalProductCode=42&productCode=PSMJP4&offset=0&limit=100 - null null
[2025-08-02 18:33:24 INF] Executing endpoint 'TourManagementApi.Controllers.Api.RezdyConnectController.GetProducts (TourManagementApi)'
[2025-08-02 18:33:24 INF] Route matched with {action = "GetProducts", controller = "RezdyConnect"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetProducts(System.String, Int32, Int32, System.Collections.Generic.List`1[System.String], System.Collections.Generic.List`1[System.String]) on controller TourManagementApi.Controllers.Api.RezdyConnectController (TourManagementApi).
[2025-08-02 18:33:24 INF] Executing action method TourManagementApi.Controllers.Api.RezdyConnectController.GetProducts (TourManagementApi) - Validation state: "Valid"
[2025-08-02 18:33:32 WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
[2025-08-02 18:33:32 INF] Executed DbCommand (68ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[B2BAgencyId], [a].[Category], [a].[ContactInfo_Email], [a].[ContactInfoIsNull], [a].[ContactInfo_Name], [a].[ContactInfo_Phone], [a].[ContactInfo_Role], [a].[CountryCode], [a].[CoverImage], [a].[CreatedAt], [a].[Description], [a].[DestinationCode], [a].[DestinationName], [a].[DetailsUrl], [a].[Duration], [a].[Exclusions], [a].[ExclusionsJson], [a].[GalleryImages], [a].[GuestFields], [a].[GuestFieldsJson], [a].[Highlights], [a].[ImportantInfo], [a].[ImportantInfoJson], [a].[Inclusions], [a].[InclusionsJson], [a].[IsActive], [a].[IsFreeCancellation], [a].[Itinerary], [a].[Label], [a].[Media_Videos], [a].[PartnerSupplierId], [a].[PreviewImage], [a].[Rating], [a].[Status], [a].[Title], [a].[TotalRatingCount], [a].[TourCompanyId], [a].[UpdatedAt], [a0].[Id], [a0].[ActivityId], [a0].[LanguageCode], [a1].[Id], [a1].[ActivityId], [a1].[Currency], [a1].[Description], [a1].[PriceAmount], [a1].[Title], [a1].[Type], [p].[ActivityPricingActivityId], [p].[Id], [p].[Amount], [p].[Currency], [p].[Description], [p].[DiscountType], [p].[DiscountValue], [p].[MaxAge], [p].[MaxParticipants], [p].[MinAge], [p].[MinParticipants], [p].[PriceType], [p].[Type], [m].[ActivityId], [m].[Id], [m].[Address], [m].[Latitude], [m].[Longitude], [m].[Name], [s].[Id], [s].[ActivityId], [s].[CanBeBookedAfterStartTime], [s].[CutOff], [s].[Duration], [s].[EndTime], [s].[FromDate], [s].[Name], [s].[StartTime], [s].[UntilDate], [s].[Weekdays], [s].[Id0], [s].[Amount], [s].[Currency], [s].[MaxAge], [s].[MaxSeats], [s].[MinAge], [s].[MinSeats], [s].[Name0], [s].[OptionId], [s].[PriceType], [s].[Type]
FROM [Activities] AS [a]
LEFT JOIN [ActivityLanguages] AS [a0] ON [a].[Id] = [a0].[ActivityId]
LEFT JOIN [Addons] AS [a1] ON [a].[Id] = [a1].[ActivityId]
LEFT JOIN [PriceCategory] AS [p] ON [a].[Id] = [p].[ActivityPricingActivityId]
LEFT JOIN [MeetingPoint] AS [m] ON [a].[Id] = [m].[ActivityId]
LEFT JOIN (
    SELECT [o].[Id], [o].[ActivityId], [o].[CanBeBookedAfterStartTime], [o].[CutOff], [o].[Duration], [o].[EndTime], [o].[FromDate], [o].[Name], [o].[StartTime], [o].[UntilDate], [o].[Weekdays], [t].[Id] AS [Id0], [t].[Amount], [t].[Currency], [t].[MaxAge], [t].[MaxSeats], [t].[MinAge], [t].[MinSeats], [t].[Name] AS [Name0], [t].[OptionId], [t].[PriceType], [t].[Type]
    FROM [Options] AS [o]
    LEFT JOIN [TicketCategories] AS [t] ON [o].[Id] = [t].[OptionId]
) AS [s] ON [a].[Id] = [s].[ActivityId]
ORDER BY [a].[Id], [a0].[Id], [a1].[Id], [p].[ActivityPricingActivityId], [p].[Id], [m].[ActivityId], [m].[Id], [s].[Id]
[2025-08-02 18:34:32 INF] Executed action TourManagementApi.Controllers.Api.RezdyConnectController.GetProducts (TourManagementApi) in 68479.0929ms
[2025-08-02 18:34:33 INF] Executed endpoint 'TourManagementApi.Controllers.Api.RezdyConnectController.GetProducts (TourManagementApi)'
[2025-08-02 18:34:40 WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
[2025-08-02 18:34:40 ERR] Veritabanı güncellenirken bir hata oluştu.
System.InvalidOperationException: An error was generated for warning 'Microsoft.EntityFrameworkCore.Migrations.PendingModelChangesWarning': The model for context 'ApplicationDbContext' has pending changes. Add a new migration before updating the database. See https://aka.ms/efcore-docs-pending-changes. This exception can be suppressed or logged by passing event ID 'RelationalEventId.PendingModelChangesWarning' to the 'ConfigureWarnings' method in 'DbContext.OnConfiguring' or 'AddDbContext'.
   at Microsoft.EntityFrameworkCore.Diagnostics.EventDefinition`1.Log[TLoggerCategory](IDiagnosticsLogger`1 logger, TParam arg)
   at Microsoft.EntityFrameworkCore.Diagnostics.RelationalLoggerExtensions.PendingModelChangesWarning(IDiagnosticsLogger`1 diagnostics, Type contextType)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.Migrator.ValidateMigrations(Boolean useTransaction, String targetMigration)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.Migrator.Migrate(String targetMigration)
   at Microsoft.EntityFrameworkCore.RelationalDatabaseFacadeExtensions.Migrate(DatabaseFacade databaseFacade)
   at Program.<Main>$(String[] args) in D:\TFS\Lymranet\Tourism\B2B\HotelWidget\TourManagement\Program.cs:line 160
[2025-08-02 18:34:40 INF] User profile is available. Using 'C:\Users\OZKAN\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2025-08-02 18:34:40 INF] Now listening on: http://localhost:5050
[2025-08-02 18:34:40 INF] Application started. Press Ctrl+C to shut down.
[2025-08-02 18:34:40 INF] Hosting environment: Development
[2025-08-02 18:34:40 INF] Content root path: D:\TFS\Lymranet\Tourism\B2B\HotelWidget\TourManagement
[2025-08-02 18:34:40 INF] Request starting HTTP/1.1 GET http://localhost:5050/api/rezdyconnect/products?apiKey=6f686c1986af4830aefb398dc2525bc6&externalProductCode=42&productCode=PSMJP4&offset=0&limit=100 - null null
[2025-08-02 18:34:41 INF] Executing endpoint 'TourManagementApi.Controllers.Api.RezdyConnectController.GetProducts (TourManagementApi)'
[2025-08-02 18:34:41 INF] Route matched with {action = "GetProducts", controller = "RezdyConnect"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetProducts(System.String, Int32, Int32, System.Collections.Generic.List`1[System.String], System.Collections.Generic.List`1[System.String]) on controller TourManagementApi.Controllers.Api.RezdyConnectController (TourManagementApi).
[2025-08-02 18:34:41 INF] Executing action method TourManagementApi.Controllers.Api.RezdyConnectController.GetProducts (TourManagementApi) - Validation state: "Valid"
[2025-08-02 18:34:46 WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
[2025-08-02 18:34:47 INF] Executed DbCommand (69ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[B2BAgencyId], [a].[Category], [a].[ContactInfo_Email], [a].[ContactInfoIsNull], [a].[ContactInfo_Name], [a].[ContactInfo_Phone], [a].[ContactInfo_Role], [a].[CountryCode], [a].[CoverImage], [a].[CreatedAt], [a].[Description], [a].[DestinationCode], [a].[DestinationName], [a].[DetailsUrl], [a].[Duration], [a].[Exclusions], [a].[ExclusionsJson], [a].[GalleryImages], [a].[GuestFields], [a].[GuestFieldsJson], [a].[Highlights], [a].[ImportantInfo], [a].[ImportantInfoJson], [a].[Inclusions], [a].[InclusionsJson], [a].[IsActive], [a].[IsFreeCancellation], [a].[Itinerary], [a].[Label], [a].[Media_Videos], [a].[PartnerSupplierId], [a].[PreviewImage], [a].[Rating], [a].[Status], [a].[Title], [a].[TotalRatingCount], [a].[TourCompanyId], [a].[UpdatedAt], [a0].[Id], [a0].[ActivityId], [a0].[LanguageCode], [a1].[Id], [a1].[ActivityId], [a1].[Currency], [a1].[Description], [a1].[PriceAmount], [a1].[Title], [a1].[Type], [p].[ActivityPricingActivityId], [p].[Id], [p].[Amount], [p].[Currency], [p].[Description], [p].[DiscountType], [p].[DiscountValue], [p].[MaxAge], [p].[MaxParticipants], [p].[MinAge], [p].[MinParticipants], [p].[PriceType], [p].[Type], [m].[ActivityId], [m].[Id], [m].[Address], [m].[Latitude], [m].[Longitude], [m].[Name], [s].[Id], [s].[ActivityId], [s].[CanBeBookedAfterStartTime], [s].[CutOff], [s].[Duration], [s].[EndTime], [s].[FromDate], [s].[Name], [s].[StartTime], [s].[UntilDate], [s].[Weekdays], [s].[Id0], [s].[Amount], [s].[Currency], [s].[MaxAge], [s].[MaxSeats], [s].[MinAge], [s].[MinSeats], [s].[Name0], [s].[OptionId], [s].[PriceType], [s].[Type]
FROM [Activities] AS [a]
LEFT JOIN [ActivityLanguages] AS [a0] ON [a].[Id] = [a0].[ActivityId]
LEFT JOIN [Addons] AS [a1] ON [a].[Id] = [a1].[ActivityId]
LEFT JOIN [PriceCategory] AS [p] ON [a].[Id] = [p].[ActivityPricingActivityId]
LEFT JOIN [MeetingPoint] AS [m] ON [a].[Id] = [m].[ActivityId]
LEFT JOIN (
    SELECT [o].[Id], [o].[ActivityId], [o].[CanBeBookedAfterStartTime], [o].[CutOff], [o].[Duration], [o].[EndTime], [o].[FromDate], [o].[Name], [o].[StartTime], [o].[UntilDate], [o].[Weekdays], [t].[Id] AS [Id0], [t].[Amount], [t].[Currency], [t].[MaxAge], [t].[MaxSeats], [t].[MinAge], [t].[MinSeats], [t].[Name] AS [Name0], [t].[OptionId], [t].[PriceType], [t].[Type]
    FROM [Options] AS [o]
    LEFT JOIN [TicketCategories] AS [t] ON [o].[Id] = [t].[OptionId]
) AS [s] ON [a].[Id] = [s].[ActivityId]
ORDER BY [a].[Id], [a0].[Id], [a1].[Id], [p].[ActivityPricingActivityId], [p].[Id], [m].[ActivityId], [m].[Id], [s].[Id]
[2025-08-02 18:35:45 WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
[2025-08-02 18:35:45 ERR] Veritabanı güncellenirken bir hata oluştu.
System.InvalidOperationException: An error was generated for warning 'Microsoft.EntityFrameworkCore.Migrations.PendingModelChangesWarning': The model for context 'ApplicationDbContext' has pending changes. Add a new migration before updating the database. See https://aka.ms/efcore-docs-pending-changes. This exception can be suppressed or logged by passing event ID 'RelationalEventId.PendingModelChangesWarning' to the 'ConfigureWarnings' method in 'DbContext.OnConfiguring' or 'AddDbContext'.
   at Microsoft.EntityFrameworkCore.Diagnostics.EventDefinition`1.Log[TLoggerCategory](IDiagnosticsLogger`1 logger, TParam arg)
   at Microsoft.EntityFrameworkCore.Diagnostics.RelationalLoggerExtensions.PendingModelChangesWarning(IDiagnosticsLogger`1 diagnostics, Type contextType)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.Migrator.ValidateMigrations(Boolean useTransaction, String targetMigration)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.Migrator.Migrate(String targetMigration)
   at Microsoft.EntityFrameworkCore.RelationalDatabaseFacadeExtensions.Migrate(DatabaseFacade databaseFacade)
   at Program.<Main>$(String[] args) in D:\TFS\Lymranet\Tourism\B2B\HotelWidget\TourManagement\Program.cs:line 160
[2025-08-02 18:35:46 INF] User profile is available. Using 'C:\Users\OZKAN\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2025-08-02 18:35:46 INF] Now listening on: http://localhost:5050
[2025-08-02 18:35:46 INF] Application started. Press Ctrl+C to shut down.
[2025-08-02 18:35:46 INF] Hosting environment: Development
[2025-08-02 18:35:46 INF] Content root path: D:\TFS\Lymranet\Tourism\B2B\HotelWidget\TourManagement
[2025-08-02 18:35:47 INF] Request starting HTTP/1.1 GET http://localhost:5050/api/rezdyconnect/products?apiKey=6f686c1986af4830aefb398dc2525bc6&externalProductCode=42&productCode=PSMJP4&offset=0&limit=100 - null null
[2025-08-02 18:35:47 INF] Executing endpoint 'TourManagementApi.Controllers.Api.RezdyConnectController.GetProducts (TourManagementApi)'
[2025-08-02 18:35:47 INF] Route matched with {action = "GetProducts", controller = "RezdyConnect"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetProducts(System.String, Int32, Int32, System.Collections.Generic.List`1[System.String], System.Collections.Generic.List`1[System.String]) on controller TourManagementApi.Controllers.Api.RezdyConnectController (TourManagementApi).
[2025-08-02 18:35:47 INF] Executing action method TourManagementApi.Controllers.Api.RezdyConnectController.GetProducts (TourManagementApi) - Validation state: "Valid"
[2025-08-02 18:35:52 INF] Request starting HTTP/1.1 GET http://localhost:5050/api/rezdyconnect/products?apiKey=6f686c1986af4830aefb398dc2525bc6&externalProductCode=42&productCode=PSMJP4&offset=0&limit=100 - null null
[2025-08-02 18:35:52 INF] Executing endpoint 'TourManagementApi.Controllers.Api.RezdyConnectController.GetProducts (TourManagementApi)'
[2025-08-02 18:35:52 INF] Route matched with {action = "GetProducts", controller = "RezdyConnect"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetProducts(System.String, Int32, Int32, System.Collections.Generic.List`1[System.String], System.Collections.Generic.List`1[System.String]) on controller TourManagementApi.Controllers.Api.RezdyConnectController (TourManagementApi).
[2025-08-02 18:35:52 INF] Executing action method TourManagementApi.Controllers.Api.RezdyConnectController.GetProducts (TourManagementApi) - Validation state: "Valid"
[2025-08-02 18:35:55 WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
[2025-08-02 18:35:55 INF] Executed DbCommand (110ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[B2BAgencyId], [a].[Category], [a].[ContactInfo_Email], [a].[ContactInfoIsNull], [a].[ContactInfo_Name], [a].[ContactInfo_Phone], [a].[ContactInfo_Role], [a].[CountryCode], [a].[CoverImage], [a].[CreatedAt], [a].[Description], [a].[DestinationCode], [a].[DestinationName], [a].[DetailsUrl], [a].[Duration], [a].[Exclusions], [a].[ExclusionsJson], [a].[GalleryImages], [a].[GuestFields], [a].[GuestFieldsJson], [a].[Highlights], [a].[ImportantInfo], [a].[ImportantInfoJson], [a].[Inclusions], [a].[InclusionsJson], [a].[IsActive], [a].[IsFreeCancellation], [a].[Itinerary], [a].[Label], [a].[Media_Videos], [a].[PartnerSupplierId], [a].[PreviewImage], [a].[Rating], [a].[Status], [a].[Title], [a].[TotalRatingCount], [a].[TourCompanyId], [a].[UpdatedAt], [a0].[Id], [a0].[ActivityId], [a0].[LanguageCode], [a1].[Id], [a1].[ActivityId], [a1].[Currency], [a1].[Description], [a1].[PriceAmount], [a1].[Title], [a1].[Type], [p].[ActivityPricingActivityId], [p].[Id], [p].[Amount], [p].[Currency], [p].[Description], [p].[DiscountType], [p].[DiscountValue], [p].[MaxAge], [p].[MaxParticipants], [p].[MinAge], [p].[MinParticipants], [p].[PriceType], [p].[Type], [m].[ActivityId], [m].[Id], [m].[Address], [m].[Latitude], [m].[Longitude], [m].[Name], [s].[Id], [s].[ActivityId], [s].[CanBeBookedAfterStartTime], [s].[CutOff], [s].[Duration], [s].[EndTime], [s].[FromDate], [s].[Name], [s].[StartTime], [s].[UntilDate], [s].[Weekdays], [s].[Id0], [s].[Amount], [s].[Currency], [s].[MaxAge], [s].[MaxSeats], [s].[MinAge], [s].[MinSeats], [s].[Name0], [s].[OptionId], [s].[PriceType], [s].[Type]
FROM [Activities] AS [a]
LEFT JOIN [ActivityLanguages] AS [a0] ON [a].[Id] = [a0].[ActivityId]
LEFT JOIN [Addons] AS [a1] ON [a].[Id] = [a1].[ActivityId]
LEFT JOIN [PriceCategory] AS [p] ON [a].[Id] = [p].[ActivityPricingActivityId]
LEFT JOIN [MeetingPoint] AS [m] ON [a].[Id] = [m].[ActivityId]
LEFT JOIN (
    SELECT [o].[Id], [o].[ActivityId], [o].[CanBeBookedAfterStartTime], [o].[CutOff], [o].[Duration], [o].[EndTime], [o].[FromDate], [o].[Name], [o].[StartTime], [o].[UntilDate], [o].[Weekdays], [t].[Id] AS [Id0], [t].[Amount], [t].[Currency], [t].[MaxAge], [t].[MaxSeats], [t].[MinAge], [t].[MinSeats], [t].[Name] AS [Name0], [t].[OptionId], [t].[PriceType], [t].[Type]
    FROM [Options] AS [o]
    LEFT JOIN [TicketCategories] AS [t] ON [o].[Id] = [t].[OptionId]
) AS [s] ON [a].[Id] = [s].[ActivityId]
ORDER BY [a].[Id], [a0].[Id], [a1].[Id], [p].[ActivityPricingActivityId], [p].[Id], [m].[ActivityId], [m].[Id], [s].[Id]
[2025-08-02 18:35:55 INF] Executed DbCommand (61ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[B2BAgencyId], [a].[Category], [a].[ContactInfo_Email], [a].[ContactInfoIsNull], [a].[ContactInfo_Name], [a].[ContactInfo_Phone], [a].[ContactInfo_Role], [a].[CountryCode], [a].[CoverImage], [a].[CreatedAt], [a].[Description], [a].[DestinationCode], [a].[DestinationName], [a].[DetailsUrl], [a].[Duration], [a].[Exclusions], [a].[ExclusionsJson], [a].[GalleryImages], [a].[GuestFields], [a].[GuestFieldsJson], [a].[Highlights], [a].[ImportantInfo], [a].[ImportantInfoJson], [a].[Inclusions], [a].[InclusionsJson], [a].[IsActive], [a].[IsFreeCancellation], [a].[Itinerary], [a].[Label], [a].[Media_Videos], [a].[PartnerSupplierId], [a].[PreviewImage], [a].[Rating], [a].[Status], [a].[Title], [a].[TotalRatingCount], [a].[TourCompanyId], [a].[UpdatedAt], [a0].[Id], [a0].[ActivityId], [a0].[LanguageCode], [a1].[Id], [a1].[ActivityId], [a1].[Currency], [a1].[Description], [a1].[PriceAmount], [a1].[Title], [a1].[Type], [p].[ActivityPricingActivityId], [p].[Id], [p].[Amount], [p].[Currency], [p].[Description], [p].[DiscountType], [p].[DiscountValue], [p].[MaxAge], [p].[MaxParticipants], [p].[MinAge], [p].[MinParticipants], [p].[PriceType], [p].[Type], [m].[ActivityId], [m].[Id], [m].[Address], [m].[Latitude], [m].[Longitude], [m].[Name], [s].[Id], [s].[ActivityId], [s].[CanBeBookedAfterStartTime], [s].[CutOff], [s].[Duration], [s].[EndTime], [s].[FromDate], [s].[Name], [s].[StartTime], [s].[UntilDate], [s].[Weekdays], [s].[Id0], [s].[Amount], [s].[Currency], [s].[MaxAge], [s].[MaxSeats], [s].[MinAge], [s].[MinSeats], [s].[Name0], [s].[OptionId], [s].[PriceType], [s].[Type]
FROM [Activities] AS [a]
LEFT JOIN [ActivityLanguages] AS [a0] ON [a].[Id] = [a0].[ActivityId]
LEFT JOIN [Addons] AS [a1] ON [a].[Id] = [a1].[ActivityId]
LEFT JOIN [PriceCategory] AS [p] ON [a].[Id] = [p].[ActivityPricingActivityId]
LEFT JOIN [MeetingPoint] AS [m] ON [a].[Id] = [m].[ActivityId]
LEFT JOIN (
    SELECT [o].[Id], [o].[ActivityId], [o].[CanBeBookedAfterStartTime], [o].[CutOff], [o].[Duration], [o].[EndTime], [o].[FromDate], [o].[Name], [o].[StartTime], [o].[UntilDate], [o].[Weekdays], [t].[Id] AS [Id0], [t].[Amount], [t].[Currency], [t].[MaxAge], [t].[MaxSeats], [t].[MinAge], [t].[MinSeats], [t].[Name] AS [Name0], [t].[OptionId], [t].[PriceType], [t].[Type]
    FROM [Options] AS [o]
    LEFT JOIN [TicketCategories] AS [t] ON [o].[Id] = [t].[OptionId]
) AS [s] ON [a].[Id] = [s].[ActivityId]
ORDER BY [a].[Id], [a0].[Id], [a1].[Id], [p].[ActivityPricingActivityId], [p].[Id], [m].[ActivityId], [m].[Id], [s].[Id]
[2025-08-02 18:37:08 INF] Executed action method TourManagementApi.Controllers.Api.RezdyConnectController.GetProducts (TourManagementApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 81133.5609ms.
[2025-08-02 18:37:08 INF] Executed action method TourManagementApi.Controllers.Api.RezdyConnectController.GetProducts (TourManagementApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 76371.7003ms.
[2025-08-02 18:37:08 INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType35`2[[<>f__AnonymousType1`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], TourManagementApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[TourManagementApi.Models.Api.RezdyConnectModels.RezdyProductDto, TourManagementApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-08-02 18:37:08 INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType35`2[[<>f__AnonymousType1`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], TourManagementApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[TourManagementApi.Models.Api.RezdyConnectModels.RezdyProductDto, TourManagementApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-08-02 18:37:08 INF] Executed action TourManagementApi.Controllers.Api.RezdyConnectController.GetProducts (TourManagementApi) in 76443.8025ms
[2025-08-02 18:37:08 INF] Executed action TourManagementApi.Controllers.Api.RezdyConnectController.GetProducts (TourManagementApi) in 81266.0264ms
[2025-08-02 18:37:08 INF] Executed endpoint 'TourManagementApi.Controllers.Api.RezdyConnectController.GetProducts (TourManagementApi)'
[2025-08-02 18:37:08 INF] Executed endpoint 'TourManagementApi.Controllers.Api.RezdyConnectController.GetProducts (TourManagementApi)'
[2025-08-02 18:37:08 ERR] An unhandled exception has occurred while executing the request.
System.IO.IOException: The process cannot access the file 'D:\TFS\Lymranet\Tourism\B2B\HotelWidget\TourManagement\Logs\responses-2025-08-02.log' because it is being used by another process.
   at Microsoft.Win32.SafeHandles.SafeFileHandle.CreateFile(String fullPath, FileMode mode, FileAccess access, FileShare share, FileOptions options)
   at Microsoft.Win32.SafeHandles.SafeFileHandle.Open(String fullPath, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.File.OpenHandle(String path, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize)
   at System.IO.File.WriteToFileAsync(String path, FileMode mode, String contents, Encoding encoding, CancellationToken cancellationToken)
   at TourManagementApi.Middleware.RequestResponseLoggingMiddleware.Invoke(HttpContext context) in D:\TFS\Lymranet\Tourism\B2B\HotelWidget\TourManagement\Middleware\RequestResponseLoggingMiddleware.cs:line 107
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
[2025-08-02 18:37:08 INF] Request finished HTTP/1.1 GET http://localhost:5050/api/rezdyconnect/products?apiKey=6f686c1986af4830aefb398dc2525bc6&externalProductCode=42&productCode=PSMJP4&offset=0&limit=100 - 499 null application/json; charset=utf-8 81524.6586ms
[2025-08-02 18:37:08 ERR] An exception was thrown attempting to display the error page.
System.ObjectDisposedException: Cannot access a closed Stream.
Object name: 'MemoryStream'.
   at System.IO.Stream.ValidateCopyToArguments(Stream destination, Int32 bufferSize)
   at System.IO.MemoryStream.CopyToAsync(Stream destination, Int32 bufferSize, CancellationToken cancellationToken)
   at System.IO.Stream.CopyToAsync(Stream destination)
   at Microsoft.Extensions.RazorViews.BaseView.ExecuteAsync(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
[2025-08-02 18:37:08 ERR] An unhandled exception has occurred while executing the request.
System.IO.IOException: The process cannot access the file 'D:\TFS\Lymranet\Tourism\B2B\HotelWidget\TourManagement\Logs\responses-2025-08-02.log' because it is being used by another process.
   at Microsoft.Win32.SafeHandles.SafeFileHandle.CreateFile(String fullPath, FileMode mode, FileAccess access, FileShare share, FileOptions options)
   at Microsoft.Win32.SafeHandles.SafeFileHandle.Open(String fullPath, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.File.OpenHandle(String path, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize)
   at System.IO.File.WriteToFileAsync(String path, FileMode mode, String contents, Encoding encoding, CancellationToken cancellationToken)
   at TourManagementApi.Middleware.RequestResponseLoggingMiddleware.Invoke(HttpContext context) in D:\TFS\Lymranet\Tourism\B2B\HotelWidget\TourManagement\Middleware\RequestResponseLoggingMiddleware.cs:line 107
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
[2025-08-02 18:37:08 ERR] An exception was thrown attempting to display the error page.
System.ObjectDisposedException: Cannot access a closed Stream.
Object name: 'MemoryStream'.
   at System.IO.Stream.ValidateCopyToArguments(Stream destination, Int32 bufferSize)
   at System.IO.MemoryStream.CopyToAsync(Stream destination, Int32 bufferSize, CancellationToken cancellationToken)
   at System.IO.Stream.CopyToAsync(Stream destination)
   at Microsoft.Extensions.RazorViews.BaseView.ExecuteAsync(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
[2025-08-02 18:37:08 ERR] Connection id "0HNEHR908IM29", Request id "0HNEHR908IM29:00000001": An unhandled exception was thrown by the application.
System.IO.IOException: The process cannot access the file 'D:\TFS\Lymranet\Tourism\B2B\HotelWidget\TourManagement\Logs\responses-2025-08-02.log' because it is being used by another process.
   at Microsoft.Win32.SafeHandles.SafeFileHandle.CreateFile(String fullPath, FileMode mode, FileAccess access, FileShare share, FileOptions options)
   at Microsoft.Win32.SafeHandles.SafeFileHandle.Open(String fullPath, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.File.OpenHandle(String path, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize)
   at System.IO.File.WriteToFileAsync(String path, FileMode mode, String contents, Encoding encoding, CancellationToken cancellationToken)
   at TourManagementApi.Middleware.RequestResponseLoggingMiddleware.Invoke(HttpContext context) in D:\TFS\Lymranet\Tourism\B2B\HotelWidget\TourManagement\Middleware\RequestResponseLoggingMiddleware.cs:line 107
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
   at Microsoft.WebTools.BrowserLink.Net.BrowserLinkMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Watch.BrowserRefresh.BrowserRefreshMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ProcessRequests[TContext](IHttpApplication`1 application)
[2025-08-02 18:37:08 INF] Request finished HTTP/1.1 GET http://localhost:5050/api/rezdyconnect/products?apiKey=6f686c1986af4830aefb398dc2525bc6&externalProductCode=42&productCode=PSMJP4&offset=0&limit=100 - 500 0 null 76775.1776ms
[2025-08-02 18:37:14 INF] Request starting HTTP/1.1 GET http://localhost:5050/api/rezdyconnect/products?apiKey=6f686c1986af4830aefb398dc2525bc6&externalProductCode=42&productCode=PSMJP4&offset=0&limit=100 - null null
[2025-08-02 18:37:14 INF] Executing endpoint 'TourManagementApi.Controllers.Api.RezdyConnectController.GetProducts (TourManagementApi)'
[2025-08-02 18:37:14 INF] Route matched with {action = "GetProducts", controller = "RezdyConnect"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetProducts(System.String, Int32, Int32, System.Collections.Generic.List`1[System.String], System.Collections.Generic.List`1[System.String]) on controller TourManagementApi.Controllers.Api.RezdyConnectController (TourManagementApi).
[2025-08-02 18:37:14 INF] Executing action method TourManagementApi.Controllers.Api.RezdyConnectController.GetProducts (TourManagementApi) - Validation state: "Valid"
[2025-08-02 18:37:20 INF] Executed DbCommand (37ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[B2BAgencyId], [a].[Category], [a].[ContactInfo_Email], [a].[ContactInfoIsNull], [a].[ContactInfo_Name], [a].[ContactInfo_Phone], [a].[ContactInfo_Role], [a].[CountryCode], [a].[CoverImage], [a].[CreatedAt], [a].[Description], [a].[DestinationCode], [a].[DestinationName], [a].[DetailsUrl], [a].[Duration], [a].[Exclusions], [a].[ExclusionsJson], [a].[GalleryImages], [a].[GuestFields], [a].[GuestFieldsJson], [a].[Highlights], [a].[ImportantInfo], [a].[ImportantInfoJson], [a].[Inclusions], [a].[InclusionsJson], [a].[IsActive], [a].[IsFreeCancellation], [a].[Itinerary], [a].[Label], [a].[Media_Videos], [a].[PartnerSupplierId], [a].[PreviewImage], [a].[Rating], [a].[Status], [a].[Title], [a].[TotalRatingCount], [a].[TourCompanyId], [a].[UpdatedAt], [a0].[Id], [a0].[ActivityId], [a0].[LanguageCode], [a1].[Id], [a1].[ActivityId], [a1].[Currency], [a1].[Description], [a1].[PriceAmount], [a1].[Title], [a1].[Type], [p].[ActivityPricingActivityId], [p].[Id], [p].[Amount], [p].[Currency], [p].[Description], [p].[DiscountType], [p].[DiscountValue], [p].[MaxAge], [p].[MaxParticipants], [p].[MinAge], [p].[MinParticipants], [p].[PriceType], [p].[Type], [m].[ActivityId], [m].[Id], [m].[Address], [m].[Latitude], [m].[Longitude], [m].[Name], [s].[Id], [s].[ActivityId], [s].[CanBeBookedAfterStartTime], [s].[CutOff], [s].[Duration], [s].[EndTime], [s].[FromDate], [s].[Name], [s].[StartTime], [s].[UntilDate], [s].[Weekdays], [s].[Id0], [s].[Amount], [s].[Currency], [s].[MaxAge], [s].[MaxSeats], [s].[MinAge], [s].[MinSeats], [s].[Name0], [s].[OptionId], [s].[PriceType], [s].[Type]
FROM [Activities] AS [a]
LEFT JOIN [ActivityLanguages] AS [a0] ON [a].[Id] = [a0].[ActivityId]
LEFT JOIN [Addons] AS [a1] ON [a].[Id] = [a1].[ActivityId]
LEFT JOIN [PriceCategory] AS [p] ON [a].[Id] = [p].[ActivityPricingActivityId]
LEFT JOIN [MeetingPoint] AS [m] ON [a].[Id] = [m].[ActivityId]
LEFT JOIN (
    SELECT [o].[Id], [o].[ActivityId], [o].[CanBeBookedAfterStartTime], [o].[CutOff], [o].[Duration], [o].[EndTime], [o].[FromDate], [o].[Name], [o].[StartTime], [o].[UntilDate], [o].[Weekdays], [t].[Id] AS [Id0], [t].[Amount], [t].[Currency], [t].[MaxAge], [t].[MaxSeats], [t].[MinAge], [t].[MinSeats], [t].[Name] AS [Name0], [t].[OptionId], [t].[PriceType], [t].[Type]
    FROM [Options] AS [o]
    LEFT JOIN [TicketCategories] AS [t] ON [o].[Id] = [t].[OptionId]
) AS [s] ON [a].[Id] = [s].[ActivityId]
ORDER BY [a].[Id], [a0].[Id], [a1].[Id], [p].[ActivityPricingActivityId], [p].[Id], [m].[ActivityId], [m].[Id], [s].[Id]
[2025-08-02 18:37:21 INF] Executed action method TourManagementApi.Controllers.Api.RezdyConnectController.GetProducts (TourManagementApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 6841.9902ms.
[2025-08-02 18:37:21 INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType35`2[[<>f__AnonymousType1`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], TourManagementApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[TourManagementApi.Models.Api.RezdyConnectModels.RezdyProductDto, TourManagementApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-08-02 18:37:21 INF] Executed action TourManagementApi.Controllers.Api.RezdyConnectController.GetProducts (TourManagementApi) in 6872.2447ms
[2025-08-02 18:37:21 INF] Executed endpoint 'TourManagementApi.Controllers.Api.RezdyConnectController.GetProducts (TourManagementApi)'
[2025-08-02 18:37:21 INF] Request finished HTTP/1.1 GET http://localhost:5050/api/rezdyconnect/products?apiKey=6f686c1986af4830aefb398dc2525bc6&externalProductCode=42&productCode=PSMJP4&offset=0&limit=100 - 200 null application/json; charset=utf-8 6938.3487ms
[2025-08-02 18:37:48 INF] Request starting HTTP/1.1 GET http://localhost:5050/ - null null
[2025-08-02 18:37:48 INF] Executing endpoint 'TourManagementApi.Controllers.ActivitiesWizardController.Index (TourManagementApi)'
[2025-08-02 18:37:48 INF] Route matched with {action = "Index", controller = "ActivitiesWizard"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Index(System.String) on controller TourManagementApi.Controllers.ActivitiesWizardController (TourManagementApi).
[2025-08-02 18:37:48 INF] Executing action method TourManagementApi.Controllers.ActivitiesWizardController.Index (TourManagementApi) - Validation state: "Invalid"
[2025-08-02 18:37:48 INF] Accessing expired session, Key:9197a2e7-8108-f16f-1ec9-56dc9812da82
[2025-08-02 18:37:48 INF] Executed DbCommand (67ms) [Parameters=[@__Id_0='96d2940f09674b0f81d86bc821c69ff6' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[Title], [a].[Description], [a].[Category], [t].[CompanyName], [a].[Label], [a].[Status], [t].[Id], [o].[Id], [o].[ActivityId], [o].[CanBeBookedAfterStartTime], [o].[CutOff], [o].[Duration], [o].[EndTime], [o].[FromDate], [o].[Name], [o].[StartTime], [o].[UntilDate], [o].[Weekdays], [a].[CountryCode], [a].[DestinationCode], [a].[DestinationName], [a].[CreatedAt], [a].[UpdatedAt], [a].[Rating], [a].[IsFreeCancellation], (
    SELECT COUNT(*)
    FROM [Reservations] AS [r]
    WHERE [a].[Id] = [r].[ActivityId]), (
    SELECT COUNT(*)
    FROM [Availabilities] AS [a0]
    WHERE [a].[Id] = [a0].[ActivityId])
FROM [Activities] AS [a]
LEFT JOIN [TourCompanies] AS [t] ON [a].[TourCompanyId] = [t].[Id]
LEFT JOIN [Options] AS [o] ON [a].[Id] = [o].[ActivityId]
WHERE [a].[B2BAgencyId] = @__Id_0
ORDER BY [a].[Id], [t].[Id]
[2025-08-02 18:37:48 INF] Executed action method TourManagementApi.Controllers.ActivitiesWizardController.Index (TourManagementApi), returned result Microsoft.AspNetCore.Mvc.ViewResult in 147.6541ms.
[2025-08-02 18:37:50 INF] Executing ViewResult, running view Index.
[2025-08-02 18:37:50 INF] Executed ViewResult - view Index executed in 2293.7295ms.
[2025-08-02 18:37:50 INF] Executed action TourManagementApi.Controllers.ActivitiesWizardController.Index (TourManagementApi) in 2455.0344ms
[2025-08-02 18:37:50 INF] Executed endpoint 'TourManagementApi.Controllers.ActivitiesWizardController.Index (TourManagementApi)'
[2025-08-02 18:37:50 INF] Session started; Key:9197a2e7-8108-f16f-1ec9-56dc9812da82, Id:8beb0d1a-6319-a750-0770-572b6559a8c8
[2025-08-02 18:37:50 INF] Request finished HTTP/1.1 GET http://localhost:5050/ - 200 null text/html; charset=utf-8 2492.9017ms
[2025-08-02 18:37:50 INF] Request starting HTTP/1.1 GET http://localhost:5050/_framework/aspnetcore-browser-refresh.js - null null
[2025-08-02 18:37:50 INF] Request finished HTTP/1.1 GET http://localhost:5050/_framework/aspnetcore-browser-refresh.js - 200 13770 application/javascript; charset=utf-8 2.5952ms
[2025-08-02 18:37:50 INF] Request starting HTTP/1.1 GET http://localhost:5050/_vs/browserLink - null null
[2025-08-02 18:37:51 INF] Request finished HTTP/1.1 GET http://localhost:5050/_vs/browserLink - 200 null text/javascript; charset=UTF-8 27.6857ms
[2025-08-02 18:37:59 INF] Request starting HTTP/1.1 GET http://localhost:5050/ActivitiesWizard/CreateBasic/42 - null null
[2025-08-02 18:37:59 INF] Executing endpoint 'TourManagementApi.Controllers.ActivitiesWizardController.CreateBasic (TourManagementApi)'
[2025-08-02 18:37:59 INF] Route matched with {action = "CreateBasic", controller = "ActivitiesWizard"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateBasic(System.Nullable`1[System.Int32]) on controller TourManagementApi.Controllers.ActivitiesWizardController (TourManagementApi).
[2025-08-02 18:37:59 INF] Executing action method TourManagementApi.Controllers.ActivitiesWizardController.CreateBasic (TourManagementApi) - Validation state: "Valid"
[2025-08-02 18:37:59 INF] Executed DbCommand (35ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CONVERT(varchar(11), [t].[Id]) AS [Value], [t].[CompanyName] AS [Text]
FROM [TourCompanies] AS [t]
ORDER BY [t].[CompanyName]
[2025-08-02 18:38:00 INF] Executed DbCommand (26ms) [Parameters=[@__p_0='42'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[B2BAgencyId], [a].[Category], [a].[ContactInfo_Email], [a].[ContactInfoIsNull], [a].[ContactInfo_Name], [a].[ContactInfo_Phone], [a].[ContactInfo_Role], [a].[CountryCode], [a].[CoverImage], [a].[CreatedAt], [a].[Description], [a].[DestinationCode], [a].[DestinationName], [a].[DetailsUrl], [a].[Duration], [a].[Exclusions], [a].[ExclusionsJson], [a].[GalleryImages], [a].[GuestFields], [a].[GuestFieldsJson], [a].[Highlights], [a].[ImportantInfo], [a].[ImportantInfoJson], [a].[Inclusions], [a].[InclusionsJson], [a].[IsActive], [a].[IsFreeCancellation], [a].[Itinerary], [a].[Label], [a].[Media_Videos], [a].[PartnerSupplierId], [a].[PreviewImage], [a].[Rating], [a].[Status], [a].[Title], [a].[TotalRatingCount], [a].[TourCompanyId], [a].[UpdatedAt]
FROM [Activities] AS [a]
WHERE [a].[Id] = @__p_0
[2025-08-02 18:38:00 INF] Executed action method TourManagementApi.Controllers.ActivitiesWizardController.CreateBasic (TourManagementApi), returned result Microsoft.AspNetCore.Mvc.ViewResult in 110.3984ms.
[2025-08-02 18:38:00 INF] Executing ViewResult, running view CreateBasic.
[2025-08-02 18:38:00 INF] Executed ViewResult - view CreateBasic executed in 530.3154ms.
[2025-08-02 18:38:00 INF] Executed action TourManagementApi.Controllers.ActivitiesWizardController.CreateBasic (TourManagementApi) in 649.9259ms
[2025-08-02 18:38:00 INF] Executed endpoint 'TourManagementApi.Controllers.ActivitiesWizardController.CreateBasic (TourManagementApi)'
[2025-08-02 18:38:00 INF] Request finished HTTP/1.1 GET http://localhost:5050/ActivitiesWizard/CreateBasic/42 - 200 null text/html; charset=utf-8 672.2166ms
[2025-08-02 18:38:00 INF] Request starting HTTP/1.1 GET http://localhost:5050/_framework/aspnetcore-browser-refresh.js - null null
[2025-08-02 18:38:00 INF] Request finished HTTP/1.1 GET http://localhost:5050/_framework/aspnetcore-browser-refresh.js - 200 13770 application/javascript; charset=utf-8 0.5704ms
[2025-08-02 18:38:00 INF] Request starting HTTP/1.1 GET http://localhost:5050/_vs/browserLink - null null
[2025-08-02 18:38:00 INF] Request finished HTTP/1.1 GET http://localhost:5050/_vs/browserLink - 200 null text/javascript; charset=UTF-8 15.2031ms
[2025-08-02 18:38:04 INF] Request starting HTTP/1.1 GET http://localhost:5050/ - null null
[2025-08-02 18:38:04 INF] Executing endpoint 'TourManagementApi.Controllers.ActivitiesWizardController.Index (TourManagementApi)'
[2025-08-02 18:38:04 INF] Route matched with {action = "Index", controller = "ActivitiesWizard"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Index(System.String) on controller TourManagementApi.Controllers.ActivitiesWizardController (TourManagementApi).
[2025-08-02 18:38:04 INF] Executing action method TourManagementApi.Controllers.ActivitiesWizardController.Index (TourManagementApi) - Validation state: "Invalid"
[2025-08-02 18:38:04 INF] Executed DbCommand (28ms) [Parameters=[@__Id_0='96d2940f09674b0f81d86bc821c69ff6' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[Title], [a].[Description], [a].[Category], [t].[CompanyName], [a].[Label], [a].[Status], [t].[Id], [o].[Id], [o].[ActivityId], [o].[CanBeBookedAfterStartTime], [o].[CutOff], [o].[Duration], [o].[EndTime], [o].[FromDate], [o].[Name], [o].[StartTime], [o].[UntilDate], [o].[Weekdays], [a].[CountryCode], [a].[DestinationCode], [a].[DestinationName], [a].[CreatedAt], [a].[UpdatedAt], [a].[Rating], [a].[IsFreeCancellation], (
    SELECT COUNT(*)
    FROM [Reservations] AS [r]
    WHERE [a].[Id] = [r].[ActivityId]), (
    SELECT COUNT(*)
    FROM [Availabilities] AS [a0]
    WHERE [a].[Id] = [a0].[ActivityId])
FROM [Activities] AS [a]
LEFT JOIN [TourCompanies] AS [t] ON [a].[TourCompanyId] = [t].[Id]
LEFT JOIN [Options] AS [o] ON [a].[Id] = [o].[ActivityId]
WHERE [a].[B2BAgencyId] = @__Id_0
ORDER BY [a].[Id], [t].[Id]
[2025-08-02 18:38:04 INF] Executed action method TourManagementApi.Controllers.ActivitiesWizardController.Index (TourManagementApi), returned result Microsoft.AspNetCore.Mvc.ViewResult in 58.309ms.
[2025-08-02 18:38:04 INF] Executing ViewResult, running view Index.
[2025-08-02 18:38:04 INF] Executed ViewResult - view Index executed in 3.4673ms.
[2025-08-02 18:38:04 INF] Executed action TourManagementApi.Controllers.ActivitiesWizardController.Index (TourManagementApi) in 70.6557ms
[2025-08-02 18:38:04 INF] Executed endpoint 'TourManagementApi.Controllers.ActivitiesWizardController.Index (TourManagementApi)'
[2025-08-02 18:38:04 INF] Request finished HTTP/1.1 GET http://localhost:5050/ - 200 null text/html; charset=utf-8 93.8125ms
[2025-08-02 18:38:04 INF] Request starting HTTP/1.1 GET http://localhost:5050/_framework/aspnetcore-browser-refresh.js - null null
[2025-08-02 18:38:04 INF] Request finished HTTP/1.1 GET http://localhost:5050/_framework/aspnetcore-browser-refresh.js - 200 13770 application/javascript; charset=utf-8 0.1742ms
[2025-08-02 18:38:31 INF] Request starting HTTP/1.1 GET http://localhost:5050/api/rezdyconnect/products?apiKey=6f686c1986af4830aefb398dc2525bc6&externalProductCode=3&productCode=PSMJP4&offset=0&limit=100 - null null
[2025-08-02 18:38:31 INF] Executing endpoint 'TourManagementApi.Controllers.Api.RezdyConnectController.GetProducts (TourManagementApi)'
[2025-08-02 18:38:31 INF] Route matched with {action = "GetProducts", controller = "RezdyConnect"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetProducts(System.String, Int32, Int32, System.Collections.Generic.List`1[System.String], System.Collections.Generic.List`1[System.String]) on controller TourManagementApi.Controllers.Api.RezdyConnectController (TourManagementApi).
[2025-08-02 18:38:31 INF] Executing action method TourManagementApi.Controllers.Api.RezdyConnectController.GetProducts (TourManagementApi) - Validation state: "Valid"
[2025-08-02 18:38:35 INF] Executed DbCommand (51ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[B2BAgencyId], [a].[Category], [a].[ContactInfo_Email], [a].[ContactInfoIsNull], [a].[ContactInfo_Name], [a].[ContactInfo_Phone], [a].[ContactInfo_Role], [a].[CountryCode], [a].[CoverImage], [a].[CreatedAt], [a].[Description], [a].[DestinationCode], [a].[DestinationName], [a].[DetailsUrl], [a].[Duration], [a].[Exclusions], [a].[ExclusionsJson], [a].[GalleryImages], [a].[GuestFields], [a].[GuestFieldsJson], [a].[Highlights], [a].[ImportantInfo], [a].[ImportantInfoJson], [a].[Inclusions], [a].[InclusionsJson], [a].[IsActive], [a].[IsFreeCancellation], [a].[Itinerary], [a].[Label], [a].[Media_Videos], [a].[PartnerSupplierId], [a].[PreviewImage], [a].[Rating], [a].[Status], [a].[Title], [a].[TotalRatingCount], [a].[TourCompanyId], [a].[UpdatedAt], [a0].[Id], [a0].[ActivityId], [a0].[LanguageCode], [a1].[Id], [a1].[ActivityId], [a1].[Currency], [a1].[Description], [a1].[PriceAmount], [a1].[Title], [a1].[Type], [p].[ActivityPricingActivityId], [p].[Id], [p].[Amount], [p].[Currency], [p].[Description], [p].[DiscountType], [p].[DiscountValue], [p].[MaxAge], [p].[MaxParticipants], [p].[MinAge], [p].[MinParticipants], [p].[PriceType], [p].[Type], [m].[ActivityId], [m].[Id], [m].[Address], [m].[Latitude], [m].[Longitude], [m].[Name], [s].[Id], [s].[ActivityId], [s].[CanBeBookedAfterStartTime], [s].[CutOff], [s].[Duration], [s].[EndTime], [s].[FromDate], [s].[Name], [s].[StartTime], [s].[UntilDate], [s].[Weekdays], [s].[Id0], [s].[Amount], [s].[Currency], [s].[MaxAge], [s].[MaxSeats], [s].[MinAge], [s].[MinSeats], [s].[Name0], [s].[OptionId], [s].[PriceType], [s].[Type]
FROM [Activities] AS [a]
LEFT JOIN [ActivityLanguages] AS [a0] ON [a].[Id] = [a0].[ActivityId]
LEFT JOIN [Addons] AS [a1] ON [a].[Id] = [a1].[ActivityId]
LEFT JOIN [PriceCategory] AS [p] ON [a].[Id] = [p].[ActivityPricingActivityId]
LEFT JOIN [MeetingPoint] AS [m] ON [a].[Id] = [m].[ActivityId]
LEFT JOIN (
    SELECT [o].[Id], [o].[ActivityId], [o].[CanBeBookedAfterStartTime], [o].[CutOff], [o].[Duration], [o].[EndTime], [o].[FromDate], [o].[Name], [o].[StartTime], [o].[UntilDate], [o].[Weekdays], [t].[Id] AS [Id0], [t].[Amount], [t].[Currency], [t].[MaxAge], [t].[MaxSeats], [t].[MinAge], [t].[MinSeats], [t].[Name] AS [Name0], [t].[OptionId], [t].[PriceType], [t].[Type]
    FROM [Options] AS [o]
    LEFT JOIN [TicketCategories] AS [t] ON [o].[Id] = [t].[OptionId]
) AS [s] ON [a].[Id] = [s].[ActivityId]
ORDER BY [a].[Id], [a0].[Id], [a1].[Id], [p].[ActivityPricingActivityId], [p].[Id], [m].[ActivityId], [m].[Id], [s].[Id]
[2025-08-02 18:38:37 INF] Executed action method TourManagementApi.Controllers.Api.RezdyConnectController.GetProducts (TourManagementApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 5285.8529ms.
[2025-08-02 18:38:37 INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType35`2[[<>f__AnonymousType1`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], TourManagementApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[TourManagementApi.Models.Api.RezdyConnectModels.RezdyProductDto, TourManagementApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-08-02 18:38:37 INF] Executed action TourManagementApi.Controllers.Api.RezdyConnectController.GetProducts (TourManagementApi) in 5310.5051ms
[2025-08-02 18:38:37 INF] Executed endpoint 'TourManagementApi.Controllers.Api.RezdyConnectController.GetProducts (TourManagementApi)'
[2025-08-02 18:38:37 INF] Request finished HTTP/1.1 GET http://localhost:5050/api/rezdyconnect/products?apiKey=6f686c1986af4830aefb398dc2525bc6&externalProductCode=3&productCode=PSMJP4&offset=0&limit=100 - 200 null application/json; charset=utf-8 5336.1862ms
[2025-08-02 18:47:14 INF] Request starting HTTP/1.1 GET http://localhost:5050/ - null null
[2025-08-02 18:47:14 INF] Executing endpoint 'TourManagementApi.Controllers.ActivitiesWizardController.Index (TourManagementApi)'
[2025-08-02 18:47:14 INF] Route matched with {action = "Index", controller = "ActivitiesWizard"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Index(System.String) on controller TourManagementApi.Controllers.ActivitiesWizardController (TourManagementApi).
[2025-08-02 18:47:14 INF] Executing action method TourManagementApi.Controllers.ActivitiesWizardController.Index (TourManagementApi) - Validation state: "Invalid"
[2025-08-02 18:47:14 INF] Executed DbCommand (54ms) [Parameters=[@__Id_0='96d2940f09674b0f81d86bc821c69ff6' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[Title], [a].[Description], [a].[Category], [t].[CompanyName], [a].[Label], [a].[Status], [t].[Id], [o].[Id], [o].[ActivityId], [o].[CanBeBookedAfterStartTime], [o].[CutOff], [o].[Duration], [o].[EndTime], [o].[FromDate], [o].[Name], [o].[StartTime], [o].[UntilDate], [o].[Weekdays], [a].[CountryCode], [a].[DestinationCode], [a].[DestinationName], [a].[CreatedAt], [a].[UpdatedAt], [a].[Rating], [a].[IsFreeCancellation], (
    SELECT COUNT(*)
    FROM [Reservations] AS [r]
    WHERE [a].[Id] = [r].[ActivityId]), (
    SELECT COUNT(*)
    FROM [Availabilities] AS [a0]
    WHERE [a].[Id] = [a0].[ActivityId])
FROM [Activities] AS [a]
LEFT JOIN [TourCompanies] AS [t] ON [a].[TourCompanyId] = [t].[Id]
LEFT JOIN [Options] AS [o] ON [a].[Id] = [o].[ActivityId]
WHERE [a].[B2BAgencyId] = @__Id_0
ORDER BY [a].[Id], [t].[Id]
[2025-08-02 18:47:14 INF] Executed action method TourManagementApi.Controllers.ActivitiesWizardController.Index (TourManagementApi), returned result Microsoft.AspNetCore.Mvc.ViewResult in 240.1854ms.
[2025-08-02 18:47:14 INF] Executing ViewResult, running view Index.
[2025-08-02 18:47:14 INF] Executed ViewResult - view Index executed in 3.4873ms.
[2025-08-02 18:47:14 INF] Executed action TourManagementApi.Controllers.ActivitiesWizardController.Index (TourManagementApi) in 252.3565ms
[2025-08-02 18:47:14 INF] Executed endpoint 'TourManagementApi.Controllers.ActivitiesWizardController.Index (TourManagementApi)'
[2025-08-02 18:47:14 INF] Request finished HTTP/1.1 GET http://localhost:5050/ - 200 null text/html; charset=utf-8 282.7839ms
[2025-08-02 18:47:14 INF] Request starting HTTP/1.1 GET http://localhost:5050/_vs/browserLink - null null
[2025-08-02 18:47:14 INF] Request starting HTTP/1.1 GET http://localhost:5050/_framework/aspnetcore-browser-refresh.js - null null
[2025-08-02 18:47:14 INF] Request finished HTTP/1.1 GET http://localhost:5050/_framework/aspnetcore-browser-refresh.js - 200 13770 application/javascript; charset=utf-8 0.2581ms
[2025-08-02 18:47:14 INF] Request finished HTTP/1.1 GET http://localhost:5050/_vs/browserLink - 200 null text/javascript; charset=UTF-8 5.8894ms
[2025-08-02 18:47:25 INF] Request starting HTTP/1.1 GET http://localhost:5050/api/rezdyconnect/products?apiKey=6f686c1986af4830aefb398dc2525bc6&externalProductCode=3&productCode=PSMJP4&offset=0&limit=100 - null null
[2025-08-02 18:47:25 INF] Executing endpoint 'TourManagementApi.Controllers.Api.RezdyConnectController.GetProducts (TourManagementApi)'
[2025-08-02 18:47:25 INF] Route matched with {action = "GetProducts", controller = "RezdyConnect"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetProducts(System.String, Int32, Int32, System.Collections.Generic.List`1[System.String], System.Collections.Generic.List`1[System.String]) on controller TourManagementApi.Controllers.Api.RezdyConnectController (TourManagementApi).
[2025-08-02 18:47:25 INF] Executing action method TourManagementApi.Controllers.Api.RezdyConnectController.GetProducts (TourManagementApi) - Validation state: "Valid"
[2025-08-02 18:47:25 INF] Executed DbCommand (38ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[B2BAgencyId], [a].[Category], [a].[ContactInfo_Email], [a].[ContactInfoIsNull], [a].[ContactInfo_Name], [a].[ContactInfo_Phone], [a].[ContactInfo_Role], [a].[CountryCode], [a].[CoverImage], [a].[CreatedAt], [a].[Description], [a].[DestinationCode], [a].[DestinationName], [a].[DetailsUrl], [a].[Duration], [a].[Exclusions], [a].[ExclusionsJson], [a].[GalleryImages], [a].[GuestFields], [a].[GuestFieldsJson], [a].[Highlights], [a].[ImportantInfo], [a].[ImportantInfoJson], [a].[Inclusions], [a].[InclusionsJson], [a].[IsActive], [a].[IsFreeCancellation], [a].[Itinerary], [a].[Label], [a].[Media_Videos], [a].[PartnerSupplierId], [a].[PreviewImage], [a].[Rating], [a].[Status], [a].[Title], [a].[TotalRatingCount], [a].[TourCompanyId], [a].[UpdatedAt], [a0].[Id], [a0].[ActivityId], [a0].[LanguageCode], [a1].[Id], [a1].[ActivityId], [a1].[Currency], [a1].[Description], [a1].[PriceAmount], [a1].[Title], [a1].[Type], [p].[ActivityPricingActivityId], [p].[Id], [p].[Amount], [p].[Currency], [p].[Description], [p].[DiscountType], [p].[DiscountValue], [p].[MaxAge], [p].[MaxParticipants], [p].[MinAge], [p].[MinParticipants], [p].[PriceType], [p].[Type], [m].[ActivityId], [m].[Id], [m].[Address], [m].[Latitude], [m].[Longitude], [m].[Name], [s].[Id], [s].[ActivityId], [s].[CanBeBookedAfterStartTime], [s].[CutOff], [s].[Duration], [s].[EndTime], [s].[FromDate], [s].[Name], [s].[StartTime], [s].[UntilDate], [s].[Weekdays], [s].[Id0], [s].[Amount], [s].[Currency], [s].[MaxAge], [s].[MaxSeats], [s].[MinAge], [s].[MinSeats], [s].[Name0], [s].[OptionId], [s].[PriceType], [s].[Type]
FROM [Activities] AS [a]
LEFT JOIN [ActivityLanguages] AS [a0] ON [a].[Id] = [a0].[ActivityId]
LEFT JOIN [Addons] AS [a1] ON [a].[Id] = [a1].[ActivityId]
LEFT JOIN [PriceCategory] AS [p] ON [a].[Id] = [p].[ActivityPricingActivityId]
LEFT JOIN [MeetingPoint] AS [m] ON [a].[Id] = [m].[ActivityId]
LEFT JOIN (
    SELECT [o].[Id], [o].[ActivityId], [o].[CanBeBookedAfterStartTime], [o].[CutOff], [o].[Duration], [o].[EndTime], [o].[FromDate], [o].[Name], [o].[StartTime], [o].[UntilDate], [o].[Weekdays], [t].[Id] AS [Id0], [t].[Amount], [t].[Currency], [t].[MaxAge], [t].[MaxSeats], [t].[MinAge], [t].[MinSeats], [t].[Name] AS [Name0], [t].[OptionId], [t].[PriceType], [t].[Type]
    FROM [Options] AS [o]
    LEFT JOIN [TicketCategories] AS [t] ON [o].[Id] = [t].[OptionId]
) AS [s] ON [a].[Id] = [s].[ActivityId]
ORDER BY [a].[Id], [a0].[Id], [a1].[Id], [p].[ActivityPricingActivityId], [p].[Id], [m].[ActivityId], [m].[Id], [s].[Id]
[2025-08-02 18:47:27 INF] Executed action method TourManagementApi.Controllers.Api.RezdyConnectController.GetProducts (TourManagementApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1279.5918ms.
[2025-08-02 18:47:27 INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType35`2[[<>f__AnonymousType1`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], TourManagementApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[TourManagementApi.Models.Api.RezdyConnectModels.RezdyProductDto, TourManagementApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-08-02 18:47:27 INF] Executed action TourManagementApi.Controllers.Api.RezdyConnectController.GetProducts (TourManagementApi) in 1294.2297ms
[2025-08-02 18:47:27 INF] Executed endpoint 'TourManagementApi.Controllers.Api.RezdyConnectController.GetProducts (TourManagementApi)'
[2025-08-02 18:47:27 INF] Request finished HTTP/1.1 GET http://localhost:5050/api/rezdyconnect/products?apiKey=6f686c1986af4830aefb398dc2525bc6&externalProductCode=3&productCode=PSMJP4&offset=0&limit=100 - 200 null application/json; charset=utf-8 1327.4736ms
[2025-08-02 19:02:01 WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
[2025-08-02 19:02:02 ERR] Veritabanı güncellenirken bir hata oluştu.
System.InvalidOperationException: An error was generated for warning 'Microsoft.EntityFrameworkCore.Migrations.PendingModelChangesWarning': The model for context 'ApplicationDbContext' has pending changes. Add a new migration before updating the database. See https://aka.ms/efcore-docs-pending-changes. This exception can be suppressed or logged by passing event ID 'RelationalEventId.PendingModelChangesWarning' to the 'ConfigureWarnings' method in 'DbContext.OnConfiguring' or 'AddDbContext'.
   at Microsoft.EntityFrameworkCore.Diagnostics.EventDefinition`1.Log[TLoggerCategory](IDiagnosticsLogger`1 logger, TParam arg)
   at Microsoft.EntityFrameworkCore.Diagnostics.RelationalLoggerExtensions.PendingModelChangesWarning(IDiagnosticsLogger`1 diagnostics, Type contextType)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.Migrator.ValidateMigrations(Boolean useTransaction, String targetMigration)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.Migrator.Migrate(String targetMigration)
   at Microsoft.EntityFrameworkCore.RelationalDatabaseFacadeExtensions.Migrate(DatabaseFacade databaseFacade)
   at Program.<Main>$(String[] args) in D:\TFS\Lymranet\Tourism\B2B\HotelWidget\TourManagement\Program.cs:line 160
[2025-08-02 19:02:02 INF] User profile is available. Using 'C:\Users\OZKAN\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2025-08-02 19:02:02 INF] Now listening on: http://localhost:5050
[2025-08-02 19:02:02 INF] Application started. Press Ctrl+C to shut down.
[2025-08-02 19:02:02 INF] Hosting environment: Development
[2025-08-02 19:02:02 INF] Content root path: D:\TFS\Lymranet\Tourism\B2B\HotelWidget\TourManagement
[2025-08-02 19:02:02 INF] Request starting HTTP/1.1 GET http://localhost:5050/api/rezdyconnect/products?apiKey=6f686c1986af4830aefb398dc2525bc6&externalProductCode=3&productCode=PSMJP4&offset=0&limit=100 - null null
[2025-08-02 19:02:02 INF] Executing endpoint 'TourManagementApi.Controllers.Api.RezdyConnectController.GetProducts (TourManagementApi)'
[2025-08-02 19:02:02 INF] Route matched with {action = "GetProducts", controller = "RezdyConnect"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetProducts(System.String, Int32, Int32, System.Collections.Generic.List`1[System.String], System.Collections.Generic.List`1[System.String]) on controller TourManagementApi.Controllers.Api.RezdyConnectController (TourManagementApi).
[2025-08-02 19:02:02 INF] Executing action method TourManagementApi.Controllers.Api.RezdyConnectController.GetProducts (TourManagementApi) - Validation state: "Valid"
[2025-08-02 19:02:02 WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
[2025-08-02 19:02:03 INF] Executed DbCommand (71ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[B2BAgencyId], [a].[Category], [a].[ContactInfo_Email], [a].[ContactInfoIsNull], [a].[ContactInfo_Name], [a].[ContactInfo_Phone], [a].[ContactInfo_Role], [a].[CountryCode], [a].[CoverImage], [a].[CreatedAt], [a].[Description], [a].[DestinationCode], [a].[DestinationName], [a].[DetailsUrl], [a].[Duration], [a].[Exclusions], [a].[ExclusionsJson], [a].[GalleryImages], [a].[GuestFields], [a].[GuestFieldsJson], [a].[Highlights], [a].[ImportantInfo], [a].[ImportantInfoJson], [a].[Inclusions], [a].[InclusionsJson], [a].[IsActive], [a].[IsFreeCancellation], [a].[Itinerary], [a].[Label], [a].[Media_Videos], [a].[PartnerSupplierId], [a].[PreviewImage], [a].[Rating], [a].[Status], [a].[Title], [a].[TotalRatingCount], [a].[TourCompanyId], [a].[UpdatedAt], [a0].[Id], [a0].[ActivityId], [a0].[LanguageCode], [a1].[Id], [a1].[ActivityId], [a1].[Currency], [a1].[Description], [a1].[PriceAmount], [a1].[Title], [a1].[Type], [p].[ActivityPricingActivityId], [p].[Id], [p].[Amount], [p].[Currency], [p].[Description], [p].[DiscountType], [p].[DiscountValue], [p].[MaxAge], [p].[MaxParticipants], [p].[MinAge], [p].[MinParticipants], [p].[PriceType], [p].[Type], [m].[ActivityId], [m].[Id], [m].[Address], [m].[Latitude], [m].[Longitude], [m].[Name], [s].[Id], [s].[ActivityId], [s].[CanBeBookedAfterStartTime], [s].[CutOff], [s].[Duration], [s].[EndTime], [s].[FromDate], [s].[Name], [s].[StartTime], [s].[UntilDate], [s].[Weekdays], [s].[Id0], [s].[Amount], [s].[Currency], [s].[MaxAge], [s].[MaxSeats], [s].[MinAge], [s].[MinSeats], [s].[Name0], [s].[OptionId], [s].[PriceType], [s].[Type]
FROM [Activities] AS [a]
LEFT JOIN [ActivityLanguages] AS [a0] ON [a].[Id] = [a0].[ActivityId]
LEFT JOIN [Addons] AS [a1] ON [a].[Id] = [a1].[ActivityId]
LEFT JOIN [PriceCategory] AS [p] ON [a].[Id] = [p].[ActivityPricingActivityId]
LEFT JOIN [MeetingPoint] AS [m] ON [a].[Id] = [m].[ActivityId]
LEFT JOIN (
    SELECT [o].[Id], [o].[ActivityId], [o].[CanBeBookedAfterStartTime], [o].[CutOff], [o].[Duration], [o].[EndTime], [o].[FromDate], [o].[Name], [o].[StartTime], [o].[UntilDate], [o].[Weekdays], [t].[Id] AS [Id0], [t].[Amount], [t].[Currency], [t].[MaxAge], [t].[MaxSeats], [t].[MinAge], [t].[MinSeats], [t].[Name] AS [Name0], [t].[OptionId], [t].[PriceType], [t].[Type]
    FROM [Options] AS [o]
    LEFT JOIN [TicketCategories] AS [t] ON [o].[Id] = [t].[OptionId]
) AS [s] ON [a].[Id] = [s].[ActivityId]
ORDER BY [a].[Id], [a0].[Id], [a1].[Id], [p].[ActivityPricingActivityId], [p].[Id], [m].[ActivityId], [m].[Id], [s].[Id]
[2025-08-02 19:02:04 INF] Executed action method TourManagementApi.Controllers.Api.RezdyConnectController.GetProducts (TourManagementApi), returned result Microsoft.AspNetCore.Mvc.UnprocessableEntityObjectResult in 1485.2412ms.
[2025-08-02 19:02:04 INF] Executing UnprocessableEntityObjectResult, writing value of type '<>f__AnonymousType34`1[[<>f__AnonymousType0`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], TourManagementApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-08-02 19:02:04 INF] Executed action TourManagementApi.Controllers.Api.RezdyConnectController.GetProducts (TourManagementApi) in 1534.4826ms
[2025-08-02 19:02:04 INF] Executed endpoint 'TourManagementApi.Controllers.Api.RezdyConnectController.GetProducts (TourManagementApi)'
[2025-08-02 19:02:04 INF] Request finished HTTP/1.1 GET http://localhost:5050/api/rezdyconnect/products?apiKey=6f686c1986af4830aefb398dc2525bc6&externalProductCode=3&productCode=PSMJP4&offset=0&limit=100 - 422 null application/json; charset=utf-8 1717.9916ms
[2025-08-02 19:02:50 INF] Request starting HTTP/1.1 GET http://localhost:5050/api/rezdyconnect/products?apiKey=6f686c1986af4830aefb398dc2525bc6&externalProductCode=3&productCode=PSMJP4&offset=0&limit=100 - null null
[2025-08-02 19:02:50 INF] Executing endpoint 'TourManagementApi.Controllers.Api.RezdyConnectController.GetProducts (TourManagementApi)'
[2025-08-02 19:02:50 INF] Route matched with {action = "GetProducts", controller = "RezdyConnect"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetProducts(System.String, Int32, Int32, System.Collections.Generic.List`1[System.String], System.Collections.Generic.List`1[System.String]) on controller TourManagementApi.Controllers.Api.RezdyConnectController (TourManagementApi).
[2025-08-02 19:02:50 INF] Executing action method TourManagementApi.Controllers.Api.RezdyConnectController.GetProducts (TourManagementApi) - Validation state: "Valid"
[2025-08-02 19:02:50 INF] Executed DbCommand (38ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[B2BAgencyId], [a].[Category], [a].[ContactInfo_Email], [a].[ContactInfoIsNull], [a].[ContactInfo_Name], [a].[ContactInfo_Phone], [a].[ContactInfo_Role], [a].[CountryCode], [a].[CoverImage], [a].[CreatedAt], [a].[Description], [a].[DestinationCode], [a].[DestinationName], [a].[DetailsUrl], [a].[Duration], [a].[Exclusions], [a].[ExclusionsJson], [a].[GalleryImages], [a].[GuestFields], [a].[GuestFieldsJson], [a].[Highlights], [a].[ImportantInfo], [a].[ImportantInfoJson], [a].[Inclusions], [a].[InclusionsJson], [a].[IsActive], [a].[IsFreeCancellation], [a].[Itinerary], [a].[Label], [a].[Media_Videos], [a].[PartnerSupplierId], [a].[PreviewImage], [a].[Rating], [a].[Status], [a].[Title], [a].[TotalRatingCount], [a].[TourCompanyId], [a].[UpdatedAt], [a0].[Id], [a0].[ActivityId], [a0].[LanguageCode], [a1].[Id], [a1].[ActivityId], [a1].[Currency], [a1].[Description], [a1].[PriceAmount], [a1].[Title], [a1].[Type], [p].[ActivityPricingActivityId], [p].[Id], [p].[Amount], [p].[Currency], [p].[Description], [p].[DiscountType], [p].[DiscountValue], [p].[MaxAge], [p].[MaxParticipants], [p].[MinAge], [p].[MinParticipants], [p].[PriceType], [p].[Type], [m].[ActivityId], [m].[Id], [m].[Address], [m].[Latitude], [m].[Longitude], [m].[Name], [s].[Id], [s].[ActivityId], [s].[CanBeBookedAfterStartTime], [s].[CutOff], [s].[Duration], [s].[EndTime], [s].[FromDate], [s].[Name], [s].[StartTime], [s].[UntilDate], [s].[Weekdays], [s].[Id0], [s].[Amount], [s].[Currency], [s].[MaxAge], [s].[MaxSeats], [s].[MinAge], [s].[MinSeats], [s].[Name0], [s].[OptionId], [s].[PriceType], [s].[Type]
FROM [Activities] AS [a]
LEFT JOIN [ActivityLanguages] AS [a0] ON [a].[Id] = [a0].[ActivityId]
LEFT JOIN [Addons] AS [a1] ON [a].[Id] = [a1].[ActivityId]
LEFT JOIN [PriceCategory] AS [p] ON [a].[Id] = [p].[ActivityPricingActivityId]
LEFT JOIN [MeetingPoint] AS [m] ON [a].[Id] = [m].[ActivityId]
LEFT JOIN (
    SELECT [o].[Id], [o].[ActivityId], [o].[CanBeBookedAfterStartTime], [o].[CutOff], [o].[Duration], [o].[EndTime], [o].[FromDate], [o].[Name], [o].[StartTime], [o].[UntilDate], [o].[Weekdays], [t].[Id] AS [Id0], [t].[Amount], [t].[Currency], [t].[MaxAge], [t].[MaxSeats], [t].[MinAge], [t].[MinSeats], [t].[Name] AS [Name0], [t].[OptionId], [t].[PriceType], [t].[Type]
    FROM [Options] AS [o]
    LEFT JOIN [TicketCategories] AS [t] ON [o].[Id] = [t].[OptionId]
) AS [s] ON [a].[Id] = [s].[ActivityId]
ORDER BY [a].[Id], [a0].[Id], [a1].[Id], [p].[ActivityPricingActivityId], [p].[Id], [m].[ActivityId], [m].[Id], [s].[Id]
[2025-08-02 19:03:13 INF] Executed action method TourManagementApi.Controllers.Api.RezdyConnectController.GetProducts (TourManagementApi), returned result Microsoft.AspNetCore.Mvc.UnprocessableEntityObjectResult in 22532.9159ms.
[2025-08-02 19:03:13 INF] Executing UnprocessableEntityObjectResult, writing value of type '<>f__AnonymousType34`1[[<>f__AnonymousType0`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], TourManagementApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-08-02 19:03:13 INF] Executed action TourManagementApi.Controllers.Api.RezdyConnectController.GetProducts (TourManagementApi) in 22575.8551ms
[2025-08-02 19:03:13 INF] Executed endpoint 'TourManagementApi.Controllers.Api.RezdyConnectController.GetProducts (TourManagementApi)'
[2025-08-02 19:03:13 INF] Request finished HTTP/1.1 GET http://localhost:5050/api/rezdyconnect/products?apiKey=6f686c1986af4830aefb398dc2525bc6&externalProductCode=3&productCode=PSMJP4&offset=0&limit=100 - 422 null application/json; charset=utf-8 22621.028ms
[2025-08-02 19:03:28 INF] Request starting HTTP/1.1 GET http://localhost:5050/api/rezdyconnect/products?apiKey=6f686c1986af4830aefb398dc2525bc6&externalProductCode=3&productCode=PSMJP4&offset=0&limit=100 - null null
[2025-08-02 19:03:28 INF] Executing endpoint 'TourManagementApi.Controllers.Api.RezdyConnectController.GetProducts (TourManagementApi)'
[2025-08-02 19:03:28 INF] Route matched with {action = "GetProducts", controller = "RezdyConnect"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetProducts(System.String, Int32, Int32, System.Collections.Generic.List`1[System.String], System.Collections.Generic.List`1[System.String]) on controller TourManagementApi.Controllers.Api.RezdyConnectController (TourManagementApi).
[2025-08-02 19:03:28 INF] Executing action method TourManagementApi.Controllers.Api.RezdyConnectController.GetProducts (TourManagementApi) - Validation state: "Valid"
[2025-08-02 19:03:28 INF] Executed DbCommand (70ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[B2BAgencyId], [a].[Category], [a].[ContactInfo_Email], [a].[ContactInfoIsNull], [a].[ContactInfo_Name], [a].[ContactInfo_Phone], [a].[ContactInfo_Role], [a].[CountryCode], [a].[CoverImage], [a].[CreatedAt], [a].[Description], [a].[DestinationCode], [a].[DestinationName], [a].[DetailsUrl], [a].[Duration], [a].[Exclusions], [a].[ExclusionsJson], [a].[GalleryImages], [a].[GuestFields], [a].[GuestFieldsJson], [a].[Highlights], [a].[ImportantInfo], [a].[ImportantInfoJson], [a].[Inclusions], [a].[InclusionsJson], [a].[IsActive], [a].[IsFreeCancellation], [a].[Itinerary], [a].[Label], [a].[Media_Videos], [a].[PartnerSupplierId], [a].[PreviewImage], [a].[Rating], [a].[Status], [a].[Title], [a].[TotalRatingCount], [a].[TourCompanyId], [a].[UpdatedAt], [a0].[Id], [a0].[ActivityId], [a0].[LanguageCode], [a1].[Id], [a1].[ActivityId], [a1].[Currency], [a1].[Description], [a1].[PriceAmount], [a1].[Title], [a1].[Type], [p].[ActivityPricingActivityId], [p].[Id], [p].[Amount], [p].[Currency], [p].[Description], [p].[DiscountType], [p].[DiscountValue], [p].[MaxAge], [p].[MaxParticipants], [p].[MinAge], [p].[MinParticipants], [p].[PriceType], [p].[Type], [m].[ActivityId], [m].[Id], [m].[Address], [m].[Latitude], [m].[Longitude], [m].[Name], [s].[Id], [s].[ActivityId], [s].[CanBeBookedAfterStartTime], [s].[CutOff], [s].[Duration], [s].[EndTime], [s].[FromDate], [s].[Name], [s].[StartTime], [s].[UntilDate], [s].[Weekdays], [s].[Id0], [s].[Amount], [s].[Currency], [s].[MaxAge], [s].[MaxSeats], [s].[MinAge], [s].[MinSeats], [s].[Name0], [s].[OptionId], [s].[PriceType], [s].[Type]
FROM [Activities] AS [a]
LEFT JOIN [ActivityLanguages] AS [a0] ON [a].[Id] = [a0].[ActivityId]
LEFT JOIN [Addons] AS [a1] ON [a].[Id] = [a1].[ActivityId]
LEFT JOIN [PriceCategory] AS [p] ON [a].[Id] = [p].[ActivityPricingActivityId]
LEFT JOIN [MeetingPoint] AS [m] ON [a].[Id] = [m].[ActivityId]
LEFT JOIN (
    SELECT [o].[Id], [o].[ActivityId], [o].[CanBeBookedAfterStartTime], [o].[CutOff], [o].[Duration], [o].[EndTime], [o].[FromDate], [o].[Name], [o].[StartTime], [o].[UntilDate], [o].[Weekdays], [t].[Id] AS [Id0], [t].[Amount], [t].[Currency], [t].[MaxAge], [t].[MaxSeats], [t].[MinAge], [t].[MinSeats], [t].[Name] AS [Name0], [t].[OptionId], [t].[PriceType], [t].[Type]
    FROM [Options] AS [o]
    LEFT JOIN [TicketCategories] AS [t] ON [o].[Id] = [t].[OptionId]
) AS [s] ON [a].[Id] = [s].[ActivityId]
ORDER BY [a].[Id], [a0].[Id], [a1].[Id], [p].[ActivityPricingActivityId], [p].[Id], [m].[ActivityId], [m].[Id], [s].[Id]
[2025-08-02 19:06:28 INF] Executed action method TourManagementApi.Controllers.Api.RezdyConnectController.GetProducts (TourManagementApi), returned result Microsoft.AspNetCore.Mvc.UnprocessableEntityObjectResult in 179572.5135ms.
[2025-08-02 19:06:28 INF] Executing UnprocessableEntityObjectResult, writing value of type '<>f__AnonymousType34`1[[<>f__AnonymousType0`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], TourManagementApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-08-02 19:06:28 INF] Executed action TourManagementApi.Controllers.Api.RezdyConnectController.GetProducts (TourManagementApi) in 179594.0652ms
[2025-08-02 19:06:28 INF] Executed endpoint 'TourManagementApi.Controllers.Api.RezdyConnectController.GetProducts (TourManagementApi)'
[2025-08-02 19:06:28 INF] Request finished HTTP/1.1 GET http://localhost:5050/api/rezdyconnect/products?apiKey=6f686c1986af4830aefb398dc2525bc6&externalProductCode=3&productCode=PSMJP4&offset=0&limit=100 - 422 null application/json; charset=utf-8 179640.8027ms
[2025-08-02 19:06:36 INF] Request starting HTTP/1.1 GET http://localhost:5050/api/rezdyconnect/products?apiKey=6f686c1986af4830aefb398dc2525bc6& - null null
[2025-08-02 19:06:36 INF] Executing endpoint 'TourManagementApi.Controllers.Api.RezdyConnectController.GetProducts (TourManagementApi)'
[2025-08-02 19:06:36 INF] Route matched with {action = "GetProducts", controller = "RezdyConnect"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetProducts(System.String, Int32, Int32, System.Collections.Generic.List`1[System.String], System.Collections.Generic.List`1[System.String]) on controller TourManagementApi.Controllers.Api.RezdyConnectController (TourManagementApi).
[2025-08-02 19:06:36 INF] Executing action method TourManagementApi.Controllers.Api.RezdyConnectController.GetProducts (TourManagementApi) - Validation state: "Valid"
[2025-08-02 19:06:36 INF] Executed DbCommand (97ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[B2BAgencyId], [a].[Category], [a].[ContactInfo_Email], [a].[ContactInfoIsNull], [a].[ContactInfo_Name], [a].[ContactInfo_Phone], [a].[ContactInfo_Role], [a].[CountryCode], [a].[CoverImage], [a].[CreatedAt], [a].[Description], [a].[DestinationCode], [a].[DestinationName], [a].[DetailsUrl], [a].[Duration], [a].[Exclusions], [a].[ExclusionsJson], [a].[GalleryImages], [a].[GuestFields], [a].[GuestFieldsJson], [a].[Highlights], [a].[ImportantInfo], [a].[ImportantInfoJson], [a].[Inclusions], [a].[InclusionsJson], [a].[IsActive], [a].[IsFreeCancellation], [a].[Itinerary], [a].[Label], [a].[Media_Videos], [a].[PartnerSupplierId], [a].[PreviewImage], [a].[Rating], [a].[Status], [a].[Title], [a].[TotalRatingCount], [a].[TourCompanyId], [a].[UpdatedAt], [a0].[Id], [a0].[ActivityId], [a0].[LanguageCode], [a1].[Id], [a1].[ActivityId], [a1].[Currency], [a1].[Description], [a1].[PriceAmount], [a1].[Title], [a1].[Type], [p].[ActivityPricingActivityId], [p].[Id], [p].[Amount], [p].[Currency], [p].[Description], [p].[DiscountType], [p].[DiscountValue], [p].[MaxAge], [p].[MaxParticipants], [p].[MinAge], [p].[MinParticipants], [p].[PriceType], [p].[Type], [m].[ActivityId], [m].[Id], [m].[Address], [m].[Latitude], [m].[Longitude], [m].[Name], [s].[Id], [s].[ActivityId], [s].[CanBeBookedAfterStartTime], [s].[CutOff], [s].[Duration], [s].[EndTime], [s].[FromDate], [s].[Name], [s].[StartTime], [s].[UntilDate], [s].[Weekdays], [s].[Id0], [s].[Amount], [s].[Currency], [s].[MaxAge], [s].[MaxSeats], [s].[MinAge], [s].[MinSeats], [s].[Name0], [s].[OptionId], [s].[PriceType], [s].[Type]
FROM [Activities] AS [a]
LEFT JOIN [ActivityLanguages] AS [a0] ON [a].[Id] = [a0].[ActivityId]
LEFT JOIN [Addons] AS [a1] ON [a].[Id] = [a1].[ActivityId]
LEFT JOIN [PriceCategory] AS [p] ON [a].[Id] = [p].[ActivityPricingActivityId]
LEFT JOIN [MeetingPoint] AS [m] ON [a].[Id] = [m].[ActivityId]
LEFT JOIN (
    SELECT [o].[Id], [o].[ActivityId], [o].[CanBeBookedAfterStartTime], [o].[CutOff], [o].[Duration], [o].[EndTime], [o].[FromDate], [o].[Name], [o].[StartTime], [o].[UntilDate], [o].[Weekdays], [t].[Id] AS [Id0], [t].[Amount], [t].[Currency], [t].[MaxAge], [t].[MaxSeats], [t].[MinAge], [t].[MinSeats], [t].[Name] AS [Name0], [t].[OptionId], [t].[PriceType], [t].[Type]
    FROM [Options] AS [o]
    LEFT JOIN [TicketCategories] AS [t] ON [o].[Id] = [t].[OptionId]
) AS [s] ON [a].[Id] = [s].[ActivityId]
ORDER BY [a].[Id], [a0].[Id], [a1].[Id], [p].[ActivityPricingActivityId], [p].[Id], [m].[ActivityId], [m].[Id], [s].[Id]
[2025-08-02 19:06:41 INF] Executed action method TourManagementApi.Controllers.Api.RezdyConnectController.GetProducts (TourManagementApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 4562.1745ms.
[2025-08-02 19:06:41 INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType35`2[[<>f__AnonymousType1`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], TourManagementApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[TourManagementApi.Models.Api.RezdyConnectModels.RezdyProductDto, TourManagementApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-08-02 19:06:41 INF] Executed action TourManagementApi.Controllers.Api.RezdyConnectController.GetProducts (TourManagementApi) in 4584.8993ms
[2025-08-02 19:06:41 INF] Executed endpoint 'TourManagementApi.Controllers.Api.RezdyConnectController.GetProducts (TourManagementApi)'
[2025-08-02 19:06:41 INF] Request finished HTTP/1.1 GET http://localhost:5050/api/rezdyconnect/products?apiKey=6f686c1986af4830aefb398dc2525bc6& - 200 null application/json; charset=utf-8 4631.7695ms
[2025-08-02 19:07:40 INF] Request starting HTTP/1.1 GET http://localhost:5050/api/rezdyconnect/products?apiKey=6f686c1986af4830aefb398dc2525bc6&externalProductCode=3-1&productCode=PSMJP4&offset=0&limit=100 - null null
[2025-08-02 19:07:40 INF] Executing endpoint 'TourManagementApi.Controllers.Api.RezdyConnectController.GetProducts (TourManagementApi)'
[2025-08-02 19:07:40 INF] Route matched with {action = "GetProducts", controller = "RezdyConnect"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetProducts(System.String, Int32, Int32, System.Collections.Generic.List`1[System.String], System.Collections.Generic.List`1[System.String]) on controller TourManagementApi.Controllers.Api.RezdyConnectController (TourManagementApi).
[2025-08-02 19:07:40 INF] Executing action method TourManagementApi.Controllers.Api.RezdyConnectController.GetProducts (TourManagementApi) - Validation state: "Valid"
[2025-08-02 19:07:41 INF] Executed DbCommand (37ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[B2BAgencyId], [a].[Category], [a].[ContactInfo_Email], [a].[ContactInfoIsNull], [a].[ContactInfo_Name], [a].[ContactInfo_Phone], [a].[ContactInfo_Role], [a].[CountryCode], [a].[CoverImage], [a].[CreatedAt], [a].[Description], [a].[DestinationCode], [a].[DestinationName], [a].[DetailsUrl], [a].[Duration], [a].[Exclusions], [a].[ExclusionsJson], [a].[GalleryImages], [a].[GuestFields], [a].[GuestFieldsJson], [a].[Highlights], [a].[ImportantInfo], [a].[ImportantInfoJson], [a].[Inclusions], [a].[InclusionsJson], [a].[IsActive], [a].[IsFreeCancellation], [a].[Itinerary], [a].[Label], [a].[Media_Videos], [a].[PartnerSupplierId], [a].[PreviewImage], [a].[Rating], [a].[Status], [a].[Title], [a].[TotalRatingCount], [a].[TourCompanyId], [a].[UpdatedAt], [a0].[Id], [a0].[ActivityId], [a0].[LanguageCode], [a1].[Id], [a1].[ActivityId], [a1].[Currency], [a1].[Description], [a1].[PriceAmount], [a1].[Title], [a1].[Type], [p].[ActivityPricingActivityId], [p].[Id], [p].[Amount], [p].[Currency], [p].[Description], [p].[DiscountType], [p].[DiscountValue], [p].[MaxAge], [p].[MaxParticipants], [p].[MinAge], [p].[MinParticipants], [p].[PriceType], [p].[Type], [m].[ActivityId], [m].[Id], [m].[Address], [m].[Latitude], [m].[Longitude], [m].[Name], [s].[Id], [s].[ActivityId], [s].[CanBeBookedAfterStartTime], [s].[CutOff], [s].[Duration], [s].[EndTime], [s].[FromDate], [s].[Name], [s].[StartTime], [s].[UntilDate], [s].[Weekdays], [s].[Id0], [s].[Amount], [s].[Currency], [s].[MaxAge], [s].[MaxSeats], [s].[MinAge], [s].[MinSeats], [s].[Name0], [s].[OptionId], [s].[PriceType], [s].[Type]
FROM [Activities] AS [a]
LEFT JOIN [ActivityLanguages] AS [a0] ON [a].[Id] = [a0].[ActivityId]
LEFT JOIN [Addons] AS [a1] ON [a].[Id] = [a1].[ActivityId]
LEFT JOIN [PriceCategory] AS [p] ON [a].[Id] = [p].[ActivityPricingActivityId]
LEFT JOIN [MeetingPoint] AS [m] ON [a].[Id] = [m].[ActivityId]
LEFT JOIN (
    SELECT [o].[Id], [o].[ActivityId], [o].[CanBeBookedAfterStartTime], [o].[CutOff], [o].[Duration], [o].[EndTime], [o].[FromDate], [o].[Name], [o].[StartTime], [o].[UntilDate], [o].[Weekdays], [t].[Id] AS [Id0], [t].[Amount], [t].[Currency], [t].[MaxAge], [t].[MaxSeats], [t].[MinAge], [t].[MinSeats], [t].[Name] AS [Name0], [t].[OptionId], [t].[PriceType], [t].[Type]
    FROM [Options] AS [o]
    LEFT JOIN [TicketCategories] AS [t] ON [o].[Id] = [t].[OptionId]
) AS [s] ON [a].[Id] = [s].[ActivityId]
ORDER BY [a].[Id], [a0].[Id], [a1].[Id], [p].[ActivityPricingActivityId], [p].[Id], [m].[ActivityId], [m].[Id], [s].[Id]
[2025-08-02 19:07:41 INF] Executed action method TourManagementApi.Controllers.Api.RezdyConnectController.GetProducts (TourManagementApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 835.4048ms.
[2025-08-02 19:07:41 INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType35`2[[<>f__AnonymousType1`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], TourManagementApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[TourManagementApi.Models.Api.RezdyConnectModels.RezdyProductDto, TourManagementApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-08-02 19:07:41 INF] Executed action TourManagementApi.Controllers.Api.RezdyConnectController.GetProducts (TourManagementApi) in 845.8006ms
[2025-08-02 19:07:41 INF] Executed endpoint 'TourManagementApi.Controllers.Api.RezdyConnectController.GetProducts (TourManagementApi)'
[2025-08-02 19:07:41 INF] Request finished HTTP/1.1 GET http://localhost:5050/api/rezdyconnect/products?apiKey=6f686c1986af4830aefb398dc2525bc6&externalProductCode=3-1&productCode=PSMJP4&offset=0&limit=100 - 200 null application/json; charset=utf-8 883.0092ms
[2025-08-02 19:13:01 WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
[2025-08-02 19:13:01 ERR] Veritabanı güncellenirken bir hata oluştu.
System.InvalidOperationException: An error was generated for warning 'Microsoft.EntityFrameworkCore.Migrations.PendingModelChangesWarning': The model for context 'ApplicationDbContext' has pending changes. Add a new migration before updating the database. See https://aka.ms/efcore-docs-pending-changes. This exception can be suppressed or logged by passing event ID 'RelationalEventId.PendingModelChangesWarning' to the 'ConfigureWarnings' method in 'DbContext.OnConfiguring' or 'AddDbContext'.
   at Microsoft.EntityFrameworkCore.Diagnostics.EventDefinition`1.Log[TLoggerCategory](IDiagnosticsLogger`1 logger, TParam arg)
   at Microsoft.EntityFrameworkCore.Diagnostics.RelationalLoggerExtensions.PendingModelChangesWarning(IDiagnosticsLogger`1 diagnostics, Type contextType)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.Migrator.ValidateMigrations(Boolean useTransaction, String targetMigration)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.Migrator.Migrate(String targetMigration)
   at Microsoft.EntityFrameworkCore.RelationalDatabaseFacadeExtensions.Migrate(DatabaseFacade databaseFacade)
   at Program.<Main>$(String[] args) in D:\TFS\Lymranet\Tourism\B2B\HotelWidget\TourManagement\Program.cs:line 160
[2025-08-02 19:13:01 INF] User profile is available. Using 'C:\Users\OZKAN\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2025-08-02 19:13:01 INF] Now listening on: http://localhost:5050
[2025-08-02 19:13:01 INF] Application started. Press Ctrl+C to shut down.
[2025-08-02 19:13:01 INF] Hosting environment: Development
[2025-08-02 19:13:01 INF] Content root path: D:\TFS\Lymranet\Tourism\B2B\HotelWidget\TourManagement
[2025-08-02 19:13:03 INF] Request starting HTTP/1.1 GET http://localhost:5050/ - null null
[2025-08-02 19:13:03 INF] Executing endpoint 'TourManagementApi.Controllers.ActivitiesWizardController.Index (TourManagementApi)'
[2025-08-02 19:13:03 INF] Route matched with {action = "Index", controller = "ActivitiesWizard"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Index(System.String) on controller TourManagementApi.Controllers.ActivitiesWizardController (TourManagementApi).
[2025-08-02 19:13:03 INF] Executing action method TourManagementApi.Controllers.ActivitiesWizardController.Index (TourManagementApi) - Validation state: "Invalid"
[2025-08-02 19:13:03 INF] Accessing expired session, Key:9197a2e7-8108-f16f-1ec9-56dc9812da82
[2025-08-02 19:13:03 INF] Executed DbCommand (71ms) [Parameters=[@__Id_0='96d2940f09674b0f81d86bc821c69ff6' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[Title], [a].[Description], [a].[Category], [t].[CompanyName], [a].[Label], [a].[Status], [t].[Id], [o].[Id], [o].[ActivityId], [o].[CanBeBookedAfterStartTime], [o].[CutOff], [o].[Duration], [o].[EndTime], [o].[FromDate], [o].[Name], [o].[StartTime], [o].[UntilDate], [o].[Weekdays], [a].[CountryCode], [a].[DestinationCode], [a].[DestinationName], [a].[CreatedAt], [a].[UpdatedAt], [a].[Rating], [a].[IsFreeCancellation], (
    SELECT COUNT(*)
    FROM [Reservations] AS [r]
    WHERE [a].[Id] = [r].[ActivityId]), (
    SELECT COUNT(*)
    FROM [Availabilities] AS [a0]
    WHERE [a].[Id] = [a0].[ActivityId])
FROM [Activities] AS [a]
LEFT JOIN [TourCompanies] AS [t] ON [a].[TourCompanyId] = [t].[Id]
LEFT JOIN [Options] AS [o] ON [a].[Id] = [o].[ActivityId]
WHERE [a].[B2BAgencyId] = @__Id_0
ORDER BY [a].[Id], [t].[Id]
[2025-08-02 19:13:03 INF] Executed action method TourManagementApi.Controllers.ActivitiesWizardController.Index (TourManagementApi), returned result Microsoft.AspNetCore.Mvc.ViewResult in 615.2604ms.
[2025-08-02 19:13:05 INF] Executing ViewResult, running view Index.
[2025-08-02 19:13:05 INF] Executed ViewResult - view Index executed in 1862.8996ms.
[2025-08-02 19:13:05 INF] Executed action TourManagementApi.Controllers.ActivitiesWizardController.Index (TourManagementApi) in 2521.076ms
[2025-08-02 19:13:05 INF] Executed endpoint 'TourManagementApi.Controllers.ActivitiesWizardController.Index (TourManagementApi)'
[2025-08-02 19:13:05 INF] Session started; Key:9197a2e7-8108-f16f-1ec9-56dc9812da82, Id:833b07c4-05de-71b8-13ae-3e8a025fba3f
[2025-08-02 19:13:05 INF] Request finished HTTP/1.1 GET http://localhost:5050/ - 200 null text/html; charset=utf-8 2704.0572ms
[2025-08-02 19:13:05 INF] Request starting HTTP/1.1 GET http://localhost:5050/_framework/aspnetcore-browser-refresh.js - null null
[2025-08-02 19:13:05 INF] Request finished HTTP/1.1 GET http://localhost:5050/_framework/aspnetcore-browser-refresh.js - 200 13770 application/javascript; charset=utf-8 3.307ms
[2025-08-02 19:13:06 INF] Request starting HTTP/1.1 GET http://localhost:5050/_vs/browserLink - null null
[2025-08-02 19:13:06 INF] Request finished HTTP/1.1 GET http://localhost:5050/_vs/browserLink - 200 null text/javascript; charset=UTF-8 21.7281ms
[2025-08-02 19:13:12 INF] Request starting HTTP/1.1 GET http://localhost:5050/ActivitiesWizard/Availabilities?activityId=6 - null null
[2025-08-02 19:13:12 INF] Executing endpoint 'TourManagementApi.Controllers.ActivitiesWizardController.Availabilities (TourManagementApi)'
[2025-08-02 19:13:12 INF] Route matched with {action = "Availabilities", controller = "ActivitiesWizard"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Availabilities(Int32) on controller TourManagementApi.Controllers.ActivitiesWizardController (TourManagementApi).
[2025-08-02 19:13:12 INF] Executing action method TourManagementApi.Controllers.ActivitiesWizardController.Availabilities (TourManagementApi) - Validation state: "Valid"
[2025-08-02 19:13:12 WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
[2025-08-02 19:13:12 INF] Executed DbCommand (40ms) [Parameters=[@__activityId_0='6'], CommandType='"Text"', CommandTimeout='30']
SELECT [a1].[Id], [a1].[B2BAgencyId], [a1].[Category], [a1].[ContactInfo_Email], [a1].[ContactInfoIsNull], [a1].[ContactInfo_Name], [a1].[ContactInfo_Phone], [a1].[ContactInfo_Role], [a1].[CountryCode], [a1].[CoverImage], [a1].[CreatedAt], [a1].[Description], [a1].[DestinationCode], [a1].[DestinationName], [a1].[DetailsUrl], [a1].[Duration], [a1].[Exclusions], [a1].[ExclusionsJson], [a1].[GalleryImages], [a1].[GuestFields], [a1].[GuestFieldsJson], [a1].[Highlights], [a1].[ImportantInfo], [a1].[ImportantInfoJson], [a1].[Inclusions], [a1].[InclusionsJson], [a1].[IsActive], [a1].[IsFreeCancellation], [a1].[Itinerary], [a1].[Label], [a1].[Media_Videos], [a1].[PartnerSupplierId], [a1].[PreviewImage], [a1].[Rating], [a1].[Status], [a1].[Title], [a1].[TotalRatingCount], [a1].[TourCompanyId], [a1].[UpdatedAt], [s0].[Id], [s0].[ActivityId], [s0].[AvailableCapacity], [s0].[Date], [s0].[MaximumCapacity], [s0].[OptionId], [s0].[PartnerSupplierId], [s0].[StartTime], [s0].[Id0], [s0].[ActivityId0], [s0].[CanBeBookedAfterStartTime], [s0].[CutOff], [s0].[Duration], [s0].[EndTime], [s0].[FromDate], [s0].[Name], [s0].[StartTime0], [s0].[UntilDate], [s0].[Weekdays], [s0].[Id1], [s0].[AvailabilityId], [s0].[Capacity], [s0].[TicketCategoryId], [s0].[Id00], [s0].[Amount], [s0].[Currency], [s0].[MaxAge], [s0].[MaxSeats], [s0].[MinAge], [s0].[MinSeats], [s0].[Name0], [s0].[OptionId0], [s0].[PriceType], [s0].[Type]
FROM (
    SELECT TOP(1) [a].[Id], [a].[B2BAgencyId], [a].[Category], [a].[ContactInfo_Email], [a].[ContactInfoIsNull], [a].[ContactInfo_Name], [a].[ContactInfo_Phone], [a].[ContactInfo_Role], [a].[CountryCode], [a].[CoverImage], [a].[CreatedAt], [a].[Description], [a].[DestinationCode], [a].[DestinationName], [a].[DetailsUrl], [a].[Duration], [a].[Exclusions], [a].[ExclusionsJson], [a].[GalleryImages], [a].[GuestFields], [a].[GuestFieldsJson], [a].[Highlights], [a].[ImportantInfo], [a].[ImportantInfoJson], [a].[Inclusions], [a].[InclusionsJson], [a].[IsActive], [a].[IsFreeCancellation], [a].[Itinerary], [a].[Label], [a].[Media_Videos], [a].[PartnerSupplierId], [a].[PreviewImage], [a].[Rating], [a].[Status], [a].[Title], [a].[TotalRatingCount], [a].[TourCompanyId], [a].[UpdatedAt]
    FROM [Activities] AS [a]
    WHERE [a].[Id] = @__activityId_0
) AS [a1]
LEFT JOIN (
    SELECT [a0].[Id], [a0].[ActivityId], [a0].[AvailableCapacity], [a0].[Date], [a0].[MaximumCapacity], [a0].[OptionId], [a0].[PartnerSupplierId], [a0].[StartTime], [o].[Id] AS [Id0], [o].[ActivityId] AS [ActivityId0], [o].[CanBeBookedAfterStartTime], [o].[CutOff], [o].[Duration], [o].[EndTime], [o].[FromDate], [o].[Name], [o].[StartTime] AS [StartTime0], [o].[UntilDate], [o].[Weekdays], [s].[Id] AS [Id1], [s].[AvailabilityId], [s].[Capacity], [s].[TicketCategoryId], [s].[Id0] AS [Id00], [s].[Amount], [s].[Currency], [s].[MaxAge], [s].[MaxSeats], [s].[MinAge], [s].[MinSeats], [s].[Name] AS [Name0], [s].[OptionId] AS [OptionId0], [s].[PriceType], [s].[Type]
    FROM [Availabilities] AS [a0]
    INNER JOIN [Options] AS [o] ON [a0].[OptionId] = [o].[Id]
    LEFT JOIN (
        SELECT [t].[Id], [t].[AvailabilityId], [t].[Capacity], [t].[TicketCategoryId], [t0].[Id] AS [Id0], [t0].[Amount], [t0].[Currency], [t0].[MaxAge], [t0].[MaxSeats], [t0].[MinAge], [t0].[MinSeats], [t0].[Name], [t0].[OptionId], [t0].[PriceType], [t0].[Type]
        FROM [TicketCategoryCapacities] AS [t]
        INNER JOIN [TicketCategories] AS [t0] ON [t].[TicketCategoryId] = [t0].[Id]
    ) AS [s] ON [a0].[Id] = [s].[AvailabilityId]
) AS [s0] ON [a1].[Id] = [s0].[ActivityId]
ORDER BY [a1].[Id], [s0].[Id], [s0].[Id0], [s0].[Id1]
[2025-08-02 19:13:12 INF] Executed action method TourManagementApi.Controllers.ActivitiesWizardController.Availabilities (TourManagementApi), returned result Microsoft.AspNetCore.Mvc.ViewResult in 245.7758ms.
[2025-08-02 19:13:12 INF] Executing ViewResult, running view Availabilities.
[2025-08-02 19:13:12 INF] Executed ViewResult - view Availabilities executed in 168.0585ms.
[2025-08-02 19:13:12 INF] Executed action TourManagementApi.Controllers.ActivitiesWizardController.Availabilities (TourManagementApi) in 428.6746ms
[2025-08-02 19:13:12 INF] Executed endpoint 'TourManagementApi.Controllers.ActivitiesWizardController.Availabilities (TourManagementApi)'
[2025-08-02 19:13:12 INF] Request finished HTTP/1.1 GET http://localhost:5050/ActivitiesWizard/Availabilities?activityId=6 - 200 null text/html; charset=utf-8 465.133ms
[2025-08-02 19:13:12 INF] Request starting HTTP/1.1 GET http://localhost:5050/_vs/browserLink - null null
[2025-08-02 19:13:12 INF] Request starting HTTP/1.1 GET http://localhost:5050/_framework/aspnetcore-browser-refresh.js - null null
[2025-08-02 19:13:12 INF] Request finished HTTP/1.1 GET http://localhost:5050/_framework/aspnetcore-browser-refresh.js - 200 13770 application/javascript; charset=utf-8 0.2977ms
[2025-08-02 19:13:12 INF] Request finished HTTP/1.1 GET http://localhost:5050/_vs/browserLink - 200 null text/javascript; charset=UTF-8 26.6513ms
[2025-08-02 19:13:15 INF] Request starting HTTP/1.1 GET http://localhost:5050/ActivitiesWizard/Availabilities?activityId=3 - null null
[2025-08-02 19:13:15 INF] Executing endpoint 'TourManagementApi.Controllers.ActivitiesWizardController.Availabilities (TourManagementApi)'
[2025-08-02 19:13:15 INF] Route matched with {action = "Availabilities", controller = "ActivitiesWizard"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Availabilities(Int32) on controller TourManagementApi.Controllers.ActivitiesWizardController (TourManagementApi).
[2025-08-02 19:13:15 INF] Executing action method TourManagementApi.Controllers.ActivitiesWizardController.Availabilities (TourManagementApi) - Validation state: "Valid"
[2025-08-02 19:13:15 INF] Executed DbCommand (28ms) [Parameters=[@__activityId_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT [a1].[Id], [a1].[B2BAgencyId], [a1].[Category], [a1].[ContactInfo_Email], [a1].[ContactInfoIsNull], [a1].[ContactInfo_Name], [a1].[ContactInfo_Phone], [a1].[ContactInfo_Role], [a1].[CountryCode], [a1].[CoverImage], [a1].[CreatedAt], [a1].[Description], [a1].[DestinationCode], [a1].[DestinationName], [a1].[DetailsUrl], [a1].[Duration], [a1].[Exclusions], [a1].[ExclusionsJson], [a1].[GalleryImages], [a1].[GuestFields], [a1].[GuestFieldsJson], [a1].[Highlights], [a1].[ImportantInfo], [a1].[ImportantInfoJson], [a1].[Inclusions], [a1].[InclusionsJson], [a1].[IsActive], [a1].[IsFreeCancellation], [a1].[Itinerary], [a1].[Label], [a1].[Media_Videos], [a1].[PartnerSupplierId], [a1].[PreviewImage], [a1].[Rating], [a1].[Status], [a1].[Title], [a1].[TotalRatingCount], [a1].[TourCompanyId], [a1].[UpdatedAt], [s0].[Id], [s0].[ActivityId], [s0].[AvailableCapacity], [s0].[Date], [s0].[MaximumCapacity], [s0].[OptionId], [s0].[PartnerSupplierId], [s0].[StartTime], [s0].[Id0], [s0].[ActivityId0], [s0].[CanBeBookedAfterStartTime], [s0].[CutOff], [s0].[Duration], [s0].[EndTime], [s0].[FromDate], [s0].[Name], [s0].[StartTime0], [s0].[UntilDate], [s0].[Weekdays], [s0].[Id1], [s0].[AvailabilityId], [s0].[Capacity], [s0].[TicketCategoryId], [s0].[Id00], [s0].[Amount], [s0].[Currency], [s0].[MaxAge], [s0].[MaxSeats], [s0].[MinAge], [s0].[MinSeats], [s0].[Name0], [s0].[OptionId0], [s0].[PriceType], [s0].[Type]
FROM (
    SELECT TOP(1) [a].[Id], [a].[B2BAgencyId], [a].[Category], [a].[ContactInfo_Email], [a].[ContactInfoIsNull], [a].[ContactInfo_Name], [a].[ContactInfo_Phone], [a].[ContactInfo_Role], [a].[CountryCode], [a].[CoverImage], [a].[CreatedAt], [a].[Description], [a].[DestinationCode], [a].[DestinationName], [a].[DetailsUrl], [a].[Duration], [a].[Exclusions], [a].[ExclusionsJson], [a].[GalleryImages], [a].[GuestFields], [a].[GuestFieldsJson], [a].[Highlights], [a].[ImportantInfo], [a].[ImportantInfoJson], [a].[Inclusions], [a].[InclusionsJson], [a].[IsActive], [a].[IsFreeCancellation], [a].[Itinerary], [a].[Label], [a].[Media_Videos], [a].[PartnerSupplierId], [a].[PreviewImage], [a].[Rating], [a].[Status], [a].[Title], [a].[TotalRatingCount], [a].[TourCompanyId], [a].[UpdatedAt]
    FROM [Activities] AS [a]
    WHERE [a].[Id] = @__activityId_0
) AS [a1]
LEFT JOIN (
    SELECT [a0].[Id], [a0].[ActivityId], [a0].[AvailableCapacity], [a0].[Date], [a0].[MaximumCapacity], [a0].[OptionId], [a0].[PartnerSupplierId], [a0].[StartTime], [o].[Id] AS [Id0], [o].[ActivityId] AS [ActivityId0], [o].[CanBeBookedAfterStartTime], [o].[CutOff], [o].[Duration], [o].[EndTime], [o].[FromDate], [o].[Name], [o].[StartTime] AS [StartTime0], [o].[UntilDate], [o].[Weekdays], [s].[Id] AS [Id1], [s].[AvailabilityId], [s].[Capacity], [s].[TicketCategoryId], [s].[Id0] AS [Id00], [s].[Amount], [s].[Currency], [s].[MaxAge], [s].[MaxSeats], [s].[MinAge], [s].[MinSeats], [s].[Name] AS [Name0], [s].[OptionId] AS [OptionId0], [s].[PriceType], [s].[Type]
    FROM [Availabilities] AS [a0]
    INNER JOIN [Options] AS [o] ON [a0].[OptionId] = [o].[Id]
    LEFT JOIN (
        SELECT [t].[Id], [t].[AvailabilityId], [t].[Capacity], [t].[TicketCategoryId], [t0].[Id] AS [Id0], [t0].[Amount], [t0].[Currency], [t0].[MaxAge], [t0].[MaxSeats], [t0].[MinAge], [t0].[MinSeats], [t0].[Name], [t0].[OptionId], [t0].[PriceType], [t0].[Type]
        FROM [TicketCategoryCapacities] AS [t]
        INNER JOIN [TicketCategories] AS [t0] ON [t].[TicketCategoryId] = [t0].[Id]
    ) AS [s] ON [a0].[Id] = [s].[AvailabilityId]
) AS [s0] ON [a1].[Id] = [s0].[ActivityId]
ORDER BY [a1].[Id], [s0].[Id], [s0].[Id0], [s0].[Id1]
[2025-08-02 19:13:15 INF] Executed action method TourManagementApi.Controllers.ActivitiesWizardController.Availabilities (TourManagementApi), returned result Microsoft.AspNetCore.Mvc.ViewResult in 35.7168ms.
[2025-08-02 19:13:15 INF] Executing ViewResult, running view Availabilities.
[2025-08-02 19:13:15 INF] Executed ViewResult - view Availabilities executed in 1.6569ms.
[2025-08-02 19:13:15 INF] Executed action TourManagementApi.Controllers.ActivitiesWizardController.Availabilities (TourManagementApi) in 48.0998ms
[2025-08-02 19:13:15 INF] Executed endpoint 'TourManagementApi.Controllers.ActivitiesWizardController.Availabilities (TourManagementApi)'
[2025-08-02 19:13:15 INF] Request finished HTTP/1.1 GET http://localhost:5050/ActivitiesWizard/Availabilities?activityId=3 - 200 null text/html; charset=utf-8 76.0041ms
[2025-08-02 19:13:15 INF] Request starting HTTP/1.1 GET http://localhost:5050/_vs/browserLink - null null
[2025-08-02 19:13:15 INF] Request starting HTTP/1.1 GET http://localhost:5050/_framework/aspnetcore-browser-refresh.js - null null
[2025-08-02 19:13:15 INF] Request finished HTTP/1.1 GET http://localhost:5050/_framework/aspnetcore-browser-refresh.js - 200 13770 application/javascript; charset=utf-8 0.2171ms
[2025-08-02 19:13:15 INF] Request finished HTTP/1.1 GET http://localhost:5050/_vs/browserLink - 200 null text/javascript; charset=UTF-8 6.1991ms
[2025-08-02 19:13:16 INF] Request starting HTTP/1.1 GET http://localhost:5050/ActivitiesWizard/CreateAvailability/3 - null null
[2025-08-02 19:13:16 INF] Executing endpoint 'TourManagementApi.Controllers.ActivitiesWizardController.CreateAvailability (TourManagementApi)'
[2025-08-02 19:13:16 INF] Route matched with {action = "CreateAvailability", controller = "ActivitiesWizard"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateAvailability(Int32) on controller TourManagementApi.Controllers.ActivitiesWizardController (TourManagementApi).
[2025-08-02 19:13:16 INF] Executing action method TourManagementApi.Controllers.ActivitiesWizardController.CreateAvailability (TourManagementApi) - Validation state: "Valid"
[2025-08-02 19:13:16 WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
[2025-08-02 19:13:16 INF] Executed DbCommand (27ms) [Parameters=[@__id_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Id], [a0].[B2BAgencyId], [a0].[Category], [a0].[ContactInfo_Email], [a0].[ContactInfoIsNull], [a0].[ContactInfo_Name], [a0].[ContactInfo_Phone], [a0].[ContactInfo_Role], [a0].[CountryCode], [a0].[CoverImage], [a0].[CreatedAt], [a0].[Description], [a0].[DestinationCode], [a0].[DestinationName], [a0].[DetailsUrl], [a0].[Duration], [a0].[Exclusions], [a0].[ExclusionsJson], [a0].[GalleryImages], [a0].[GuestFields], [a0].[GuestFieldsJson], [a0].[Highlights], [a0].[ImportantInfo], [a0].[ImportantInfoJson], [a0].[Inclusions], [a0].[InclusionsJson], [a0].[IsActive], [a0].[IsFreeCancellation], [a0].[Itinerary], [a0].[Label], [a0].[Media_Videos], [a0].[PartnerSupplierId], [a0].[PreviewImage], [a0].[Rating], [a0].[Status], [a0].[Title], [a0].[TotalRatingCount], [a0].[TourCompanyId], [a0].[UpdatedAt], [s].[Id], [s].[ActivityId], [s].[CanBeBookedAfterStartTime], [s].[CutOff], [s].[Duration], [s].[EndTime], [s].[FromDate], [s].[Name], [s].[StartTime], [s].[UntilDate], [s].[Weekdays], [s].[Id0], [s].[Amount], [s].[Currency], [s].[MaxAge], [s].[MaxSeats], [s].[MinAge], [s].[MinSeats], [s].[Name0], [s].[OptionId], [s].[PriceType], [s].[Type]
FROM (
    SELECT TOP(1) [a].[Id], [a].[B2BAgencyId], [a].[Category], [a].[ContactInfo_Email], [a].[ContactInfoIsNull], [a].[ContactInfo_Name], [a].[ContactInfo_Phone], [a].[ContactInfo_Role], [a].[CountryCode], [a].[CoverImage], [a].[CreatedAt], [a].[Description], [a].[DestinationCode], [a].[DestinationName], [a].[DetailsUrl], [a].[Duration], [a].[Exclusions], [a].[ExclusionsJson], [a].[GalleryImages], [a].[GuestFields], [a].[GuestFieldsJson], [a].[Highlights], [a].[ImportantInfo], [a].[ImportantInfoJson], [a].[Inclusions], [a].[InclusionsJson], [a].[IsActive], [a].[IsFreeCancellation], [a].[Itinerary], [a].[Label], [a].[Media_Videos], [a].[PartnerSupplierId], [a].[PreviewImage], [a].[Rating], [a].[Status], [a].[Title], [a].[TotalRatingCount], [a].[TourCompanyId], [a].[UpdatedAt]
    FROM [Activities] AS [a]
    WHERE [a].[Id] = @__id_0
) AS [a0]
LEFT JOIN (
    SELECT [o].[Id], [o].[ActivityId], [o].[CanBeBookedAfterStartTime], [o].[CutOff], [o].[Duration], [o].[EndTime], [o].[FromDate], [o].[Name], [o].[StartTime], [o].[UntilDate], [o].[Weekdays], [t].[Id] AS [Id0], [t].[Amount], [t].[Currency], [t].[MaxAge], [t].[MaxSeats], [t].[MinAge], [t].[MinSeats], [t].[Name] AS [Name0], [t].[OptionId], [t].[PriceType], [t].[Type]
    FROM [Options] AS [o]
    LEFT JOIN [TicketCategories] AS [t] ON [o].[Id] = [t].[OptionId]
) AS [s] ON [a0].[Id] = [s].[ActivityId]
ORDER BY [a0].[Id], [s].[Id]
[2025-08-02 19:13:16 INF] Executed action method TourManagementApi.Controllers.ActivitiesWizardController.CreateAvailability (TourManagementApi), returned result Microsoft.AspNetCore.Mvc.ViewResult in 71.5847ms.
[2025-08-02 19:13:16 INF] Executing ViewResult, running view CreateAvailability.
[2025-08-02 19:13:16 INF] Executed ViewResult - view CreateAvailability executed in 99.1832ms.
[2025-08-02 19:13:16 INF] Executed action TourManagementApi.Controllers.ActivitiesWizardController.CreateAvailability (TourManagementApi) in 178.9432ms
[2025-08-02 19:13:16 INF] Executed endpoint 'TourManagementApi.Controllers.ActivitiesWizardController.CreateAvailability (TourManagementApi)'
[2025-08-02 19:13:16 INF] Request finished HTTP/1.1 GET http://localhost:5050/ActivitiesWizard/CreateAvailability/3 - 200 null text/html; charset=utf-8 203.8298ms
[2025-08-02 19:13:16 INF] Request starting HTTP/1.1 GET http://localhost:5050/_vs/browserLink - null null
[2025-08-02 19:13:16 INF] Request starting HTTP/1.1 GET http://localhost:5050/_framework/aspnetcore-browser-refresh.js - null null
[2025-08-02 19:13:16 INF] Request finished HTTP/1.1 GET http://localhost:5050/_vs/browserLink - 200 null text/javascript; charset=UTF-8 7.0019ms
[2025-08-02 19:13:16 INF] Request finished HTTP/1.1 GET http://localhost:5050/_framework/aspnetcore-browser-refresh.js - 200 13770 application/javascript; charset=utf-8 0.1564ms
[2025-08-02 19:13:18 INF] Request starting HTTP/1.1 GET http://localhost:5050/ActivitiesWizard/GetTicketCategories?optionId=1 - null null
[2025-08-02 19:13:18 INF] Executing endpoint 'TourManagementApi.Controllers.ActivitiesWizardController.GetTicketCategories (TourManagementApi)'
[2025-08-02 19:13:18 INF] Route matched with {action = "GetTicketCategories", controller = "ActivitiesWizard"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTicketCategories(Int32) on controller TourManagementApi.Controllers.ActivitiesWizardController (TourManagementApi).
[2025-08-02 19:13:18 INF] Executing action method TourManagementApi.Controllers.ActivitiesWizardController.GetTicketCategories (TourManagementApi) - Validation state: "Valid"
[2025-08-02 19:13:18 INF] Executed DbCommand (26ms) [Parameters=[@__optionId_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[ActivityId], [o0].[CanBeBookedAfterStartTime], [o0].[CutOff], [o0].[Duration], [o0].[EndTime], [o0].[FromDate], [o0].[Name], [o0].[StartTime], [o0].[UntilDate], [o0].[Weekdays], [t].[Id], [t].[Amount], [t].[Currency], [t].[MaxAge], [t].[MaxSeats], [t].[MinAge], [t].[MinSeats], [t].[Name], [t].[OptionId], [t].[PriceType], [t].[Type]
FROM (
    SELECT TOP(1) [o].[Id], [o].[ActivityId], [o].[CanBeBookedAfterStartTime], [o].[CutOff], [o].[Duration], [o].[EndTime], [o].[FromDate], [o].[Name], [o].[StartTime], [o].[UntilDate], [o].[Weekdays]
    FROM [Options] AS [o]
    WHERE [o].[Id] = @__optionId_0
) AS [o0]
LEFT JOIN [TicketCategories] AS [t] ON [o0].[Id] = [t].[OptionId]
ORDER BY [o0].[Id]
[2025-08-02 19:13:18 INF] Executed action method TourManagementApi.Controllers.ActivitiesWizardController.GetTicketCategories (TourManagementApi), returned result Microsoft.AspNetCore.Mvc.JsonResult in 42.6116ms.
[2025-08-02 19:13:18 INF] Executing JsonResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType3`2[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], TourManagementApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-08-02 19:13:18 INF] Executed action TourManagementApi.Controllers.ActivitiesWizardController.GetTicketCategories (TourManagementApi) in 53.7131ms
[2025-08-02 19:13:18 INF] Executed endpoint 'TourManagementApi.Controllers.ActivitiesWizardController.GetTicketCategories (TourManagementApi)'
[2025-08-02 19:13:18 INF] Request finished HTTP/1.1 GET http://localhost:5050/ActivitiesWizard/GetTicketCategories?optionId=1 - 200 null application/json; charset=utf-8 59.3933ms
[2025-08-02 19:13:44 INF] Request starting HTTP/1.1 POST http://localhost:5050/ActivitiesWizard/CreateAvailability/3 - application/x-www-form-urlencoded 670
[2025-08-02 19:13:44 INF] Executing endpoint 'TourManagementApi.Controllers.ActivitiesWizardController.CreateAvailability (TourManagementApi)'
[2025-08-02 19:13:44 INF] Route matched with {action = "CreateAvailability", controller = "ActivitiesWizard"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateAvailability(TourManagementApi.Models.ViewModels.CreateAvailabilityViewModel) on controller TourManagementApi.Controllers.ActivitiesWizardController (TourManagementApi).
[2025-08-02 19:13:45 INF] Executing action method TourManagementApi.Controllers.ActivitiesWizardController.CreateAvailability (TourManagementApi) - Validation state: "Valid"
[2025-08-02 19:13:45 INF] Executed DbCommand (25ms) [Parameters=[@__model_ActivityId_0='3', @__model_OptionId_1='1', @__model_StartDate_2='08/02/2025' (DbType = Date), @__model_EndDate_3='08/31/2025' (DbType = Date)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Date]
FROM [Availabilities] AS [a]
WHERE [a].[ActivityId] = @__model_ActivityId_0 AND [a].[OptionId] = @__model_OptionId_1 AND [a].[Date] >= @__model_StartDate_2 AND [a].[Date] <= @__model_EndDate_3
[2025-08-02 19:13:45 INF] Executed DbCommand (32ms) [Parameters=[@p0='3', @p1='10', @p2='08/02/2025' (DbType = Date), @p3='10', @p4='1', @p5='12004' (Nullable = false) (Size = 100), @p6='2025-08-02T09:00:00.0000000+03:00' (Nullable = true), @p7='3', @p8='10', @p9='08/03/2025' (DbType = Date), @p10='10', @p11='1', @p12='12004' (Nullable = false) (Size = 100), @p13='2025-08-03T09:00:00.0000000+03:00' (Nullable = true), @p14='3', @p15='10', @p16='08/04/2025' (DbType = Date), @p17='10', @p18='1', @p19='12004' (Nullable = false) (Size = 100), @p20='2025-08-04T09:00:00.0000000+03:00' (Nullable = true), @p21='3', @p22='10', @p23='08/05/2025' (DbType = Date), @p24='10', @p25='1', @p26='12004' (Nullable = false) (Size = 100), @p27='2025-08-05T09:00:00.0000000+03:00' (Nullable = true), @p28='3', @p29='10', @p30='08/06/2025' (DbType = Date), @p31='10', @p32='1', @p33='12004' (Nullable = false) (Size = 100), @p34='2025-08-06T09:00:00.0000000+03:00' (Nullable = true), @p35='3', @p36='10', @p37='08/07/2025' (DbType = Date), @p38='10', @p39='1', @p40='12004' (Nullable = false) (Size = 100), @p41='2025-08-07T09:00:00.0000000+03:00' (Nullable = true), @p42='3', @p43='10', @p44='08/08/2025' (DbType = Date), @p45='10', @p46='1', @p47='12004' (Nullable = false) (Size = 100), @p48='2025-08-08T09:00:00.0000000+03:00' (Nullable = true), @p49='3', @p50='10', @p51='08/09/2025' (DbType = Date), @p52='10', @p53='1', @p54='12004' (Nullable = false) (Size = 100), @p55='2025-08-09T09:00:00.0000000+03:00' (Nullable = true), @p56='3', @p57='10', @p58='08/10/2025' (DbType = Date), @p59='10', @p60='1', @p61='12004' (Nullable = false) (Size = 100), @p62='2025-08-10T09:00:00.0000000+03:00' (Nullable = true), @p63='3', @p64='10', @p65='08/11/2025' (DbType = Date), @p66='10', @p67='1', @p68='12004' (Nullable = false) (Size = 100), @p69='2025-08-11T09:00:00.0000000+03:00' (Nullable = true), @p70='3', @p71='10', @p72='08/12/2025' (DbType = Date), @p73='10', @p74='1', @p75='12004' (Nullable = false) (Size = 100), @p76='2025-08-12T09:00:00.0000000+03:00' (Nullable = true), @p77='3', @p78='10', @p79='08/13/2025' (DbType = Date), @p80='10', @p81='1', @p82='12004' (Nullable = false) (Size = 100), @p83='2025-08-13T09:00:00.0000000+03:00' (Nullable = true), @p84='3', @p85='10', @p86='08/14/2025' (DbType = Date), @p87='10', @p88='1', @p89='12004' (Nullable = false) (Size = 100), @p90='2025-08-14T09:00:00.0000000+03:00' (Nullable = true), @p91='3', @p92='10', @p93='08/15/2025' (DbType = Date), @p94='10', @p95='1', @p96='12004' (Nullable = false) (Size = 100), @p97='2025-08-15T09:00:00.0000000+03:00' (Nullable = true), @p98='3', @p99='10', @p100='08/16/2025' (DbType = Date), @p101='10', @p102='1', @p103='12004' (Nullable = false) (Size = 100), @p104='2025-08-16T09:00:00.0000000+03:00' (Nullable = true), @p105='3', @p106='10', @p107='08/17/2025' (DbType = Date), @p108='10', @p109='1', @p110='12004' (Nullable = false) (Size = 100), @p111='2025-08-17T09:00:00.0000000+03:00' (Nullable = true), @p112='3', @p113='10', @p114='08/18/2025' (DbType = Date), @p115='10', @p116='1', @p117='12004' (Nullable = false) (Size = 100), @p118='2025-08-18T09:00:00.0000000+03:00' (Nullable = true), @p119='3', @p120='10', @p121='08/19/2025' (DbType = Date), @p122='10', @p123='1', @p124='12004' (Nullable = false) (Size = 100), @p125='2025-08-19T09:00:00.0000000+03:00' (Nullable = true), @p126='3', @p127='10', @p128='08/20/2025' (DbType = Date), @p129='10', @p130='1', @p131='12004' (Nullable = false) (Size = 100), @p132='2025-08-20T09:00:00.0000000+03:00' (Nullable = true), @p133='3', @p134='10', @p135='08/21/2025' (DbType = Date), @p136='10', @p137='1', @p138='12004' (Nullable = false) (Size = 100), @p139='2025-08-21T09:00:00.0000000+03:00' (Nullable = true), @p140='3', @p141='10', @p142='08/22/2025' (DbType = Date), @p143='10', @p144='1', @p145='12004' (Nullable = false) (Size = 100), @p146='2025-08-22T09:00:00.0000000+03:00' (Nullable = true), @p147='3', @p148='10', @p149='08/23/2025' (DbType = Date), @p150='10', @p151='1', @p152='12004' (Nullable = false) (Size = 100), @p153='2025-08-23T09:00:00.0000000+03:00' (Nullable = true), @p154='3', @p155='10', @p156='08/24/2025' (DbType = Date), @p157='10', @p158='1', @p159='12004' (Nullable = false) (Size = 100), @p160='2025-08-24T09:00:00.0000000+03:00' (Nullable = true), @p161='3', @p162='10', @p163='08/25/2025' (DbType = Date), @p164='10', @p165='1', @p166='12004' (Nullable = false) (Size = 100), @p167='2025-08-25T09:00:00.0000000+03:00' (Nullable = true), @p168='3', @p169='10', @p170='08/26/2025' (DbType = Date), @p171='10', @p172='1', @p173='12004' (Nullable = false) (Size = 100), @p174='2025-08-26T09:00:00.0000000+03:00' (Nullable = true), @p175='3', @p176='10', @p177='08/27/2025' (DbType = Date), @p178='10', @p179='1', @p180='12004' (Nullable = false) (Size = 100), @p181='2025-08-27T09:00:00.0000000+03:00' (Nullable = true), @p182='3', @p183='10', @p184='08/28/2025' (DbType = Date), @p185='10', @p186='1', @p187='12004' (Nullable = false) (Size = 100), @p188='2025-08-28T09:00:00.0000000+03:00' (Nullable = true), @p189='3', @p190='10', @p191='08/29/2025' (DbType = Date), @p192='10', @p193='1', @p194='12004' (Nullable = false) (Size = 100), @p195='2025-08-29T09:00:00.0000000+03:00' (Nullable = true), @p196='3', @p197='10', @p198='08/30/2025' (DbType = Date), @p199='10', @p200='1', @p201='12004' (Nullable = false) (Size = 100), @p202='2025-08-30T09:00:00.0000000+03:00' (Nullable = true), @p203='3', @p204='10', @p205='08/31/2025' (DbType = Date), @p206='10', @p207='1', @p208='12004' (Nullable = false) (Size = 100), @p209='2025-08-31T09:00:00.0000000+03:00' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [Availabilities] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, 0),
(@p7, @p8, @p9, @p10, @p11, @p12, @p13, 1),
(@p14, @p15, @p16, @p17, @p18, @p19, @p20, 2),
(@p21, @p22, @p23, @p24, @p25, @p26, @p27, 3),
(@p28, @p29, @p30, @p31, @p32, @p33, @p34, 4),
(@p35, @p36, @p37, @p38, @p39, @p40, @p41, 5),
(@p42, @p43, @p44, @p45, @p46, @p47, @p48, 6),
(@p49, @p50, @p51, @p52, @p53, @p54, @p55, 7),
(@p56, @p57, @p58, @p59, @p60, @p61, @p62, 8),
(@p63, @p64, @p65, @p66, @p67, @p68, @p69, 9),
(@p70, @p71, @p72, @p73, @p74, @p75, @p76, 10),
(@p77, @p78, @p79, @p80, @p81, @p82, @p83, 11),
(@p84, @p85, @p86, @p87, @p88, @p89, @p90, 12),
(@p91, @p92, @p93, @p94, @p95, @p96, @p97, 13),
(@p98, @p99, @p100, @p101, @p102, @p103, @p104, 14),
(@p105, @p106, @p107, @p108, @p109, @p110, @p111, 15),
(@p112, @p113, @p114, @p115, @p116, @p117, @p118, 16),
(@p119, @p120, @p121, @p122, @p123, @p124, @p125, 17),
(@p126, @p127, @p128, @p129, @p130, @p131, @p132, 18),
(@p133, @p134, @p135, @p136, @p137, @p138, @p139, 19),
(@p140, @p141, @p142, @p143, @p144, @p145, @p146, 20),
(@p147, @p148, @p149, @p150, @p151, @p152, @p153, 21),
(@p154, @p155, @p156, @p157, @p158, @p159, @p160, 22),
(@p161, @p162, @p163, @p164, @p165, @p166, @p167, 23),
(@p168, @p169, @p170, @p171, @p172, @p173, @p174, 24),
(@p175, @p176, @p177, @p178, @p179, @p180, @p181, 25),
(@p182, @p183, @p184, @p185, @p186, @p187, @p188, 26),
(@p189, @p190, @p191, @p192, @p193, @p194, @p195, 27),
(@p196, @p197, @p198, @p199, @p200, @p201, @p202, 28),
(@p203, @p204, @p205, @p206, @p207, @p208, @p209, 29)) AS i ([ActivityId], [AvailableCapacity], [Date], [MaximumCapacity], [OptionId], [PartnerSupplierId], [StartTime], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([ActivityId], [AvailableCapacity], [Date], [MaximumCapacity], [OptionId], [PartnerSupplierId], [StartTime])
VALUES (i.[ActivityId], i.[AvailableCapacity], i.[Date], i.[MaximumCapacity], i.[OptionId], i.[PartnerSupplierId], i.[StartTime])
OUTPUT INSERTED.[Id], i._Position;
[2025-08-02 19:13:45 INF] Executed DbCommand (61ms) [Parameters=[@p210='739', @p211=NULL (DbType = Int32), @p212='50', @p213='739', @p214=NULL (DbType = Int32), @p215='51', @p216='740', @p217=NULL (DbType = Int32), @p218='50', @p219='740', @p220=NULL (DbType = Int32), @p221='51', @p222='741', @p223=NULL (DbType = Int32), @p224='50', @p225='741', @p226=NULL (DbType = Int32), @p227='51', @p228='742', @p229=NULL (DbType = Int32), @p230='50', @p231='742', @p232=NULL (DbType = Int32), @p233='51', @p234='743', @p235=NULL (DbType = Int32), @p236='50', @p237='743', @p238=NULL (DbType = Int32), @p239='51', @p240='744', @p241=NULL (DbType = Int32), @p242='50', @p243='744', @p244=NULL (DbType = Int32), @p245='51', @p246='745', @p247=NULL (DbType = Int32), @p248='50', @p249='745', @p250=NULL (DbType = Int32), @p251='51', @p252='746', @p253=NULL (DbType = Int32), @p254='50', @p255='746', @p256=NULL (DbType = Int32), @p257='51', @p258='747', @p259=NULL (DbType = Int32), @p260='50', @p261='747', @p262=NULL (DbType = Int32), @p263='51', @p264='748', @p265=NULL (DbType = Int32), @p266='50', @p267='748', @p268=NULL (DbType = Int32), @p269='51', @p270='749', @p271=NULL (DbType = Int32), @p272='50', @p273='749', @p274=NULL (DbType = Int32), @p275='51', @p276='750', @p277=NULL (DbType = Int32), @p278='50', @p279='750', @p280=NULL (DbType = Int32), @p281='51', @p282='751', @p283=NULL (DbType = Int32), @p284='50', @p285='751', @p286=NULL (DbType = Int32), @p287='51', @p288='752', @p289=NULL (DbType = Int32), @p290='50', @p291='752', @p292=NULL (DbType = Int32), @p293='51', @p294='753', @p295=NULL (DbType = Int32), @p296='50', @p297='753', @p298=NULL (DbType = Int32), @p299='51', @p300='754', @p301=NULL (DbType = Int32), @p302='50', @p303='754', @p304=NULL (DbType = Int32), @p305='51', @p306='755', @p307=NULL (DbType = Int32), @p308='50', @p309='755', @p310=NULL (DbType = Int32), @p311='51', @p312='756', @p313=NULL (DbType = Int32), @p314='50', @p315='756', @p316=NULL (DbType = Int32), @p317='51', @p318='757', @p319=NULL (DbType = Int32), @p320='50', @p321='757', @p322=NULL (DbType = Int32), @p323='51', @p324='758', @p325=NULL (DbType = Int32), @p326='50', @p327='758', @p328=NULL (DbType = Int32), @p329='51', @p330='759', @p331=NULL (DbType = Int32), @p332='50', @p333='759', @p334=NULL (DbType = Int32), @p335='51'], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [TicketCategoryCapacities] USING (
VALUES (@p210, @p211, @p212, 0),
(@p213, @p214, @p215, 1),
(@p216, @p217, @p218, 2),
(@p219, @p220, @p221, 3),
(@p222, @p223, @p224, 4),
(@p225, @p226, @p227, 5),
(@p228, @p229, @p230, 6),
(@p231, @p232, @p233, 7),
(@p234, @p235, @p236, 8),
(@p237, @p238, @p239, 9),
(@p240, @p241, @p242, 10),
(@p243, @p244, @p245, 11),
(@p246, @p247, @p248, 12),
(@p249, @p250, @p251, 13),
(@p252, @p253, @p254, 14),
(@p255, @p256, @p257, 15),
(@p258, @p259, @p260, 16),
(@p261, @p262, @p263, 17),
(@p264, @p265, @p266, 18),
(@p267, @p268, @p269, 19),
(@p270, @p271, @p272, 20),
(@p273, @p274, @p275, 21),
(@p276, @p277, @p278, 22),
(@p279, @p280, @p281, 23),
(@p282, @p283, @p284, 24),
(@p285, @p286, @p287, 25),
(@p288, @p289, @p290, 26),
(@p291, @p292, @p293, 27),
(@p294, @p295, @p296, 28),
(@p297, @p298, @p299, 29),
(@p300, @p301, @p302, 30),
(@p303, @p304, @p305, 31),
(@p306, @p307, @p308, 32),
(@p309, @p310, @p311, 33),
(@p312, @p313, @p314, 34),
(@p315, @p316, @p317, 35),
(@p318, @p319, @p320, 36),
(@p321, @p322, @p323, 37),
(@p324, @p325, @p326, 38),
(@p327, @p328, @p329, 39),
(@p330, @p331, @p332, 40),
(@p333, @p334, @p335, 41)) AS i ([AvailabilityId], [Capacity], [TicketCategoryId], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([AvailabilityId], [Capacity], [TicketCategoryId])
VALUES (i.[AvailabilityId], i.[Capacity], i.[TicketCategoryId])
OUTPUT INSERTED.[Id], i._Position;
[2025-08-02 19:13:45 INF] Executed DbCommand (53ms) [Parameters=[@p0='760', @p1=NULL (DbType = Int32), @p2='50', @p3='760', @p4=NULL (DbType = Int32), @p5='51', @p6='761', @p7=NULL (DbType = Int32), @p8='50', @p9='761', @p10=NULL (DbType = Int32), @p11='51', @p12='762', @p13=NULL (DbType = Int32), @p14='50', @p15='762', @p16=NULL (DbType = Int32), @p17='51', @p18='763', @p19=NULL (DbType = Int32), @p20='50', @p21='763', @p22=NULL (DbType = Int32), @p23='51', @p24='764', @p25=NULL (DbType = Int32), @p26='50', @p27='764', @p28=NULL (DbType = Int32), @p29='51', @p30='765', @p31=NULL (DbType = Int32), @p32='50', @p33='765', @p34=NULL (DbType = Int32), @p35='51', @p36='766', @p37=NULL (DbType = Int32), @p38='50', @p39='766', @p40=NULL (DbType = Int32), @p41='51', @p42='767', @p43=NULL (DbType = Int32), @p44='50', @p45='767', @p46=NULL (DbType = Int32), @p47='51', @p48='768', @p49=NULL (DbType = Int32), @p50='50', @p51='768', @p52=NULL (DbType = Int32), @p53='51'], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [TicketCategoryCapacities] USING (
VALUES (@p0, @p1, @p2, 0),
(@p3, @p4, @p5, 1),
(@p6, @p7, @p8, 2),
(@p9, @p10, @p11, 3),
(@p12, @p13, @p14, 4),
(@p15, @p16, @p17, 5),
(@p18, @p19, @p20, 6),
(@p21, @p22, @p23, 7),
(@p24, @p25, @p26, 8),
(@p27, @p28, @p29, 9),
(@p30, @p31, @p32, 10),
(@p33, @p34, @p35, 11),
(@p36, @p37, @p38, 12),
(@p39, @p40, @p41, 13),
(@p42, @p43, @p44, 14),
(@p45, @p46, @p47, 15),
(@p48, @p49, @p50, 16),
(@p51, @p52, @p53, 17)) AS i ([AvailabilityId], [Capacity], [TicketCategoryId], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([AvailabilityId], [Capacity], [TicketCategoryId])
VALUES (i.[AvailabilityId], i.[Capacity], i.[TicketCategoryId])
OUTPUT INSERTED.[Id], i._Position;
[2025-08-02 19:13:45 ERR] ExperienceBank availability notify failed (CreateAvailability)
System.FormatException: Input string was not in a correct format.
   at System.DateTimeFormat.IsValidCustomDateOnlyFormat(ReadOnlySpan`1 format, Boolean throwOnError)
   at System.DateOnly.ToString(String format, IFormatProvider provider)
   at TourManagementApi.Controllers.ActivitiesWizardController.CreateAvailability(CreateAvailabilityViewModel model) in D:\TFS\Lymranet\Tourism\B2B\HotelWidget\TourManagement\Controllers\ActivitiesWizardController.cs:line 977
[2025-08-02 19:13:45 INF] Executed action method TourManagementApi.Controllers.ActivitiesWizardController.CreateAvailability (TourManagementApi), returned result Microsoft.AspNetCore.Mvc.RedirectToActionResult in 418.6051ms.
[2025-08-02 19:13:45 INF] Executing RedirectResult, redirecting to /.
[2025-08-02 19:13:45 INF] Executed action TourManagementApi.Controllers.ActivitiesWizardController.CreateAvailability (TourManagementApi) in 441.7726ms
[2025-08-02 19:13:45 INF] Executed endpoint 'TourManagementApi.Controllers.ActivitiesWizardController.CreateAvailability (TourManagementApi)'
[2025-08-02 19:13:45 INF] Request finished HTTP/1.1 POST http://localhost:5050/ActivitiesWizard/CreateAvailability/3 - 302 0 null 472.8462ms
[2025-08-02 19:13:45 INF] Request starting HTTP/1.1 GET http://localhost:5050/ - null null
[2025-08-02 19:13:45 INF] Executing endpoint 'TourManagementApi.Controllers.ActivitiesWizardController.Index (TourManagementApi)'
[2025-08-02 19:13:45 INF] Route matched with {action = "Index", controller = "ActivitiesWizard"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Index(System.String) on controller TourManagementApi.Controllers.ActivitiesWizardController (TourManagementApi).
[2025-08-02 19:13:45 INF] Executing action method TourManagementApi.Controllers.ActivitiesWizardController.Index (TourManagementApi) - Validation state: "Invalid"
[2025-08-02 19:13:45 INF] Executed DbCommand (29ms) [Parameters=[@__Id_0='96d2940f09674b0f81d86bc821c69ff6' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[Title], [a].[Description], [a].[Category], [t].[CompanyName], [a].[Label], [a].[Status], [t].[Id], [o].[Id], [o].[ActivityId], [o].[CanBeBookedAfterStartTime], [o].[CutOff], [o].[Duration], [o].[EndTime], [o].[FromDate], [o].[Name], [o].[StartTime], [o].[UntilDate], [o].[Weekdays], [a].[CountryCode], [a].[DestinationCode], [a].[DestinationName], [a].[CreatedAt], [a].[UpdatedAt], [a].[Rating], [a].[IsFreeCancellation], (
    SELECT COUNT(*)
    FROM [Reservations] AS [r]
    WHERE [a].[Id] = [r].[ActivityId]), (
    SELECT COUNT(*)
    FROM [Availabilities] AS [a0]
    WHERE [a].[Id] = [a0].[ActivityId])
FROM [Activities] AS [a]
LEFT JOIN [TourCompanies] AS [t] ON [a].[TourCompanyId] = [t].[Id]
LEFT JOIN [Options] AS [o] ON [a].[Id] = [o].[ActivityId]
WHERE [a].[B2BAgencyId] = @__Id_0
ORDER BY [a].[Id], [t].[Id]
[2025-08-02 19:13:45 INF] Executed action method TourManagementApi.Controllers.ActivitiesWizardController.Index (TourManagementApi), returned result Microsoft.AspNetCore.Mvc.ViewResult in 59.8803ms.
[2025-08-02 19:13:45 INF] Executing ViewResult, running view Index.
[2025-08-02 19:13:45 INF] Executed ViewResult - view Index executed in 1.9835ms.
[2025-08-02 19:13:45 INF] Executed action TourManagementApi.Controllers.ActivitiesWizardController.Index (TourManagementApi) in 68.9682ms
[2025-08-02 19:13:45 INF] Executed endpoint 'TourManagementApi.Controllers.ActivitiesWizardController.Index (TourManagementApi)'
[2025-08-02 19:13:45 INF] Request finished HTTP/1.1 GET http://localhost:5050/ - 200 null text/html; charset=utf-8 87.0177ms
[2025-08-02 19:13:45 INF] Request starting HTTP/1.1 GET http://localhost:5050/_vs/browserLink - null null
[2025-08-02 19:13:45 INF] Request starting HTTP/1.1 GET http://localhost:5050/_framework/aspnetcore-browser-refresh.js - null null
[2025-08-02 19:13:45 INF] Request finished HTTP/1.1 GET http://localhost:5050/_framework/aspnetcore-browser-refresh.js - 200 13770 application/javascript; charset=utf-8 0.2486ms
[2025-08-02 19:13:45 INF] Request finished HTTP/1.1 GET http://localhost:5050/_vs/browserLink - 200 null text/javascript; charset=UTF-8 12.8534ms
[2025-08-02 19:13:47 INF] Request starting HTTP/1.1 GET http://localhost:5050/ActivitiesWizard/CreateAvailability/3 - null null
[2025-08-02 19:13:47 INF] Executing endpoint 'TourManagementApi.Controllers.ActivitiesWizardController.CreateAvailability (TourManagementApi)'
[2025-08-02 19:13:47 INF] Route matched with {action = "CreateAvailability", controller = "ActivitiesWizard"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateAvailability(Int32) on controller TourManagementApi.Controllers.ActivitiesWizardController (TourManagementApi).
[2025-08-02 19:13:47 INF] Executing action method TourManagementApi.Controllers.ActivitiesWizardController.CreateAvailability (TourManagementApi) - Validation state: "Valid"
[2025-08-02 19:13:47 INF] Executed DbCommand (27ms) [Parameters=[@__id_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Id], [a0].[B2BAgencyId], [a0].[Category], [a0].[ContactInfo_Email], [a0].[ContactInfoIsNull], [a0].[ContactInfo_Name], [a0].[ContactInfo_Phone], [a0].[ContactInfo_Role], [a0].[CountryCode], [a0].[CoverImage], [a0].[CreatedAt], [a0].[Description], [a0].[DestinationCode], [a0].[DestinationName], [a0].[DetailsUrl], [a0].[Duration], [a0].[Exclusions], [a0].[ExclusionsJson], [a0].[GalleryImages], [a0].[GuestFields], [a0].[GuestFieldsJson], [a0].[Highlights], [a0].[ImportantInfo], [a0].[ImportantInfoJson], [a0].[Inclusions], [a0].[InclusionsJson], [a0].[IsActive], [a0].[IsFreeCancellation], [a0].[Itinerary], [a0].[Label], [a0].[Media_Videos], [a0].[PartnerSupplierId], [a0].[PreviewImage], [a0].[Rating], [a0].[Status], [a0].[Title], [a0].[TotalRatingCount], [a0].[TourCompanyId], [a0].[UpdatedAt], [s].[Id], [s].[ActivityId], [s].[CanBeBookedAfterStartTime], [s].[CutOff], [s].[Duration], [s].[EndTime], [s].[FromDate], [s].[Name], [s].[StartTime], [s].[UntilDate], [s].[Weekdays], [s].[Id0], [s].[Amount], [s].[Currency], [s].[MaxAge], [s].[MaxSeats], [s].[MinAge], [s].[MinSeats], [s].[Name0], [s].[OptionId], [s].[PriceType], [s].[Type]
FROM (
    SELECT TOP(1) [a].[Id], [a].[B2BAgencyId], [a].[Category], [a].[ContactInfo_Email], [a].[ContactInfoIsNull], [a].[ContactInfo_Name], [a].[ContactInfo_Phone], [a].[ContactInfo_Role], [a].[CountryCode], [a].[CoverImage], [a].[CreatedAt], [a].[Description], [a].[DestinationCode], [a].[DestinationName], [a].[DetailsUrl], [a].[Duration], [a].[Exclusions], [a].[ExclusionsJson], [a].[GalleryImages], [a].[GuestFields], [a].[GuestFieldsJson], [a].[Highlights], [a].[ImportantInfo], [a].[ImportantInfoJson], [a].[Inclusions], [a].[InclusionsJson], [a].[IsActive], [a].[IsFreeCancellation], [a].[Itinerary], [a].[Label], [a].[Media_Videos], [a].[PartnerSupplierId], [a].[PreviewImage], [a].[Rating], [a].[Status], [a].[Title], [a].[TotalRatingCount], [a].[TourCompanyId], [a].[UpdatedAt]
    FROM [Activities] AS [a]
    WHERE [a].[Id] = @__id_0
) AS [a0]
LEFT JOIN (
    SELECT [o].[Id], [o].[ActivityId], [o].[CanBeBookedAfterStartTime], [o].[CutOff], [o].[Duration], [o].[EndTime], [o].[FromDate], [o].[Name], [o].[StartTime], [o].[UntilDate], [o].[Weekdays], [t].[Id] AS [Id0], [t].[Amount], [t].[Currency], [t].[MaxAge], [t].[MaxSeats], [t].[MinAge], [t].[MinSeats], [t].[Name] AS [Name0], [t].[OptionId], [t].[PriceType], [t].[Type]
    FROM [Options] AS [o]
    LEFT JOIN [TicketCategories] AS [t] ON [o].[Id] = [t].[OptionId]
) AS [s] ON [a0].[Id] = [s].[ActivityId]
ORDER BY [a0].[Id], [s].[Id]
[2025-08-02 19:13:47 INF] Executed action method TourManagementApi.Controllers.ActivitiesWizardController.CreateAvailability (TourManagementApi), returned result Microsoft.AspNetCore.Mvc.ViewResult in 30.7277ms.
[2025-08-02 19:13:47 INF] Executing ViewResult, running view CreateAvailability.
[2025-08-02 19:13:47 INF] Executed ViewResult - view CreateAvailability executed in 1.4531ms.
[2025-08-02 19:13:47 INF] Executed action TourManagementApi.Controllers.ActivitiesWizardController.CreateAvailability (TourManagementApi) in 57.4851ms
[2025-08-02 19:13:47 INF] Executed endpoint 'TourManagementApi.Controllers.ActivitiesWizardController.CreateAvailability (TourManagementApi)'
[2025-08-02 19:13:47 INF] Request finished HTTP/1.1 GET http://localhost:5050/ActivitiesWizard/CreateAvailability/3 - 200 null text/html; charset=utf-8 77.2519ms
[2025-08-02 19:13:47 INF] Request starting HTTP/1.1 GET http://localhost:5050/_framework/aspnetcore-browser-refresh.js - null null
[2025-08-02 19:13:47 INF] Request finished HTTP/1.1 GET http://localhost:5050/_framework/aspnetcore-browser-refresh.js - 200 13770 application/javascript; charset=utf-8 0.1767ms
[2025-08-02 19:13:48 INF] Request starting HTTP/1.1 GET http://localhost:5050/ActivitiesWizard/Availabilities?activityId=3 - null null
[2025-08-02 19:13:48 INF] Executing endpoint 'TourManagementApi.Controllers.ActivitiesWizardController.Availabilities (TourManagementApi)'
[2025-08-02 19:13:48 INF] Route matched with {action = "Availabilities", controller = "ActivitiesWizard"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Availabilities(Int32) on controller TourManagementApi.Controllers.ActivitiesWizardController (TourManagementApi).
[2025-08-02 19:13:48 INF] Executing action method TourManagementApi.Controllers.ActivitiesWizardController.Availabilities (TourManagementApi) - Validation state: "Valid"
[2025-08-02 19:13:49 INF] Executed DbCommand (30ms) [Parameters=[@__activityId_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT [a1].[Id], [a1].[B2BAgencyId], [a1].[Category], [a1].[ContactInfo_Email], [a1].[ContactInfoIsNull], [a1].[ContactInfo_Name], [a1].[ContactInfo_Phone], [a1].[ContactInfo_Role], [a1].[CountryCode], [a1].[CoverImage], [a1].[CreatedAt], [a1].[Description], [a1].[DestinationCode], [a1].[DestinationName], [a1].[DetailsUrl], [a1].[Duration], [a1].[Exclusions], [a1].[ExclusionsJson], [a1].[GalleryImages], [a1].[GuestFields], [a1].[GuestFieldsJson], [a1].[Highlights], [a1].[ImportantInfo], [a1].[ImportantInfoJson], [a1].[Inclusions], [a1].[InclusionsJson], [a1].[IsActive], [a1].[IsFreeCancellation], [a1].[Itinerary], [a1].[Label], [a1].[Media_Videos], [a1].[PartnerSupplierId], [a1].[PreviewImage], [a1].[Rating], [a1].[Status], [a1].[Title], [a1].[TotalRatingCount], [a1].[TourCompanyId], [a1].[UpdatedAt], [s0].[Id], [s0].[ActivityId], [s0].[AvailableCapacity], [s0].[Date], [s0].[MaximumCapacity], [s0].[OptionId], [s0].[PartnerSupplierId], [s0].[StartTime], [s0].[Id0], [s0].[ActivityId0], [s0].[CanBeBookedAfterStartTime], [s0].[CutOff], [s0].[Duration], [s0].[EndTime], [s0].[FromDate], [s0].[Name], [s0].[StartTime0], [s0].[UntilDate], [s0].[Weekdays], [s0].[Id1], [s0].[AvailabilityId], [s0].[Capacity], [s0].[TicketCategoryId], [s0].[Id00], [s0].[Amount], [s0].[Currency], [s0].[MaxAge], [s0].[MaxSeats], [s0].[MinAge], [s0].[MinSeats], [s0].[Name0], [s0].[OptionId0], [s0].[PriceType], [s0].[Type]
FROM (
    SELECT TOP(1) [a].[Id], [a].[B2BAgencyId], [a].[Category], [a].[ContactInfo_Email], [a].[ContactInfoIsNull], [a].[ContactInfo_Name], [a].[ContactInfo_Phone], [a].[ContactInfo_Role], [a].[CountryCode], [a].[CoverImage], [a].[CreatedAt], [a].[Description], [a].[DestinationCode], [a].[DestinationName], [a].[DetailsUrl], [a].[Duration], [a].[Exclusions], [a].[ExclusionsJson], [a].[GalleryImages], [a].[GuestFields], [a].[GuestFieldsJson], [a].[Highlights], [a].[ImportantInfo], [a].[ImportantInfoJson], [a].[Inclusions], [a].[InclusionsJson], [a].[IsActive], [a].[IsFreeCancellation], [a].[Itinerary], [a].[Label], [a].[Media_Videos], [a].[PartnerSupplierId], [a].[PreviewImage], [a].[Rating], [a].[Status], [a].[Title], [a].[TotalRatingCount], [a].[TourCompanyId], [a].[UpdatedAt]
    FROM [Activities] AS [a]
    WHERE [a].[Id] = @__activityId_0
) AS [a1]
LEFT JOIN (
    SELECT [a0].[Id], [a0].[ActivityId], [a0].[AvailableCapacity], [a0].[Date], [a0].[MaximumCapacity], [a0].[OptionId], [a0].[PartnerSupplierId], [a0].[StartTime], [o].[Id] AS [Id0], [o].[ActivityId] AS [ActivityId0], [o].[CanBeBookedAfterStartTime], [o].[CutOff], [o].[Duration], [o].[EndTime], [o].[FromDate], [o].[Name], [o].[StartTime] AS [StartTime0], [o].[UntilDate], [o].[Weekdays], [s].[Id] AS [Id1], [s].[AvailabilityId], [s].[Capacity], [s].[TicketCategoryId], [s].[Id0] AS [Id00], [s].[Amount], [s].[Currency], [s].[MaxAge], [s].[MaxSeats], [s].[MinAge], [s].[MinSeats], [s].[Name] AS [Name0], [s].[OptionId] AS [OptionId0], [s].[PriceType], [s].[Type]
    FROM [Availabilities] AS [a0]
    INNER JOIN [Options] AS [o] ON [a0].[OptionId] = [o].[Id]
    LEFT JOIN (
        SELECT [t].[Id], [t].[AvailabilityId], [t].[Capacity], [t].[TicketCategoryId], [t0].[Id] AS [Id0], [t0].[Amount], [t0].[Currency], [t0].[MaxAge], [t0].[MaxSeats], [t0].[MinAge], [t0].[MinSeats], [t0].[Name], [t0].[OptionId], [t0].[PriceType], [t0].[Type]
        FROM [TicketCategoryCapacities] AS [t]
        INNER JOIN [TicketCategories] AS [t0] ON [t].[TicketCategoryId] = [t0].[Id]
    ) AS [s] ON [a0].[Id] = [s].[AvailabilityId]
) AS [s0] ON [a1].[Id] = [s0].[ActivityId]
ORDER BY [a1].[Id], [s0].[Id], [s0].[Id0], [s0].[Id1]
[2025-08-02 19:13:49 INF] Executed action method TourManagementApi.Controllers.ActivitiesWizardController.Availabilities (TourManagementApi), returned result Microsoft.AspNetCore.Mvc.ViewResult in 459.4714ms.
[2025-08-02 19:13:49 INF] Executing ViewResult, running view Availabilities.
[2025-08-02 19:13:49 INF] Executed ViewResult - view Availabilities executed in 1.5648ms.
[2025-08-02 19:13:49 INF] Executed action TourManagementApi.Controllers.ActivitiesWizardController.Availabilities (TourManagementApi) in 472.4173ms
[2025-08-02 19:13:49 INF] Executed endpoint 'TourManagementApi.Controllers.ActivitiesWizardController.Availabilities (TourManagementApi)'
[2025-08-02 19:13:49 INF] Request finished HTTP/1.1 GET http://localhost:5050/ActivitiesWizard/Availabilities?activityId=3 - 200 null text/html; charset=utf-8 493.4508ms
[2025-08-02 19:13:49 INF] Request starting HTTP/1.1 GET http://localhost:5050/_framework/aspnetcore-browser-refresh.js - null null
[2025-08-02 19:13:49 INF] Request finished HTTP/1.1 GET http://localhost:5050/_framework/aspnetcore-browser-refresh.js - 200 13770 application/javascript; charset=utf-8 0.1618ms
[2025-08-02 19:13:49 INF] Request starting HTTP/1.1 GET http://localhost:5050/ActivitiesWizard/Availabilities?activityId=6 - null null
[2025-08-02 19:13:49 INF] Executing endpoint 'TourManagementApi.Controllers.ActivitiesWizardController.Availabilities (TourManagementApi)'
[2025-08-02 19:13:49 INF] Route matched with {action = "Availabilities", controller = "ActivitiesWizard"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Availabilities(Int32) on controller TourManagementApi.Controllers.ActivitiesWizardController (TourManagementApi).
[2025-08-02 19:13:49 INF] Executing action method TourManagementApi.Controllers.ActivitiesWizardController.Availabilities (TourManagementApi) - Validation state: "Valid"
[2025-08-02 19:13:49 INF] Executed DbCommand (28ms) [Parameters=[@__activityId_0='6'], CommandType='"Text"', CommandTimeout='30']
SELECT [a1].[Id], [a1].[B2BAgencyId], [a1].[Category], [a1].[ContactInfo_Email], [a1].[ContactInfoIsNull], [a1].[ContactInfo_Name], [a1].[ContactInfo_Phone], [a1].[ContactInfo_Role], [a1].[CountryCode], [a1].[CoverImage], [a1].[CreatedAt], [a1].[Description], [a1].[DestinationCode], [a1].[DestinationName], [a1].[DetailsUrl], [a1].[Duration], [a1].[Exclusions], [a1].[ExclusionsJson], [a1].[GalleryImages], [a1].[GuestFields], [a1].[GuestFieldsJson], [a1].[Highlights], [a1].[ImportantInfo], [a1].[ImportantInfoJson], [a1].[Inclusions], [a1].[InclusionsJson], [a1].[IsActive], [a1].[IsFreeCancellation], [a1].[Itinerary], [a1].[Label], [a1].[Media_Videos], [a1].[PartnerSupplierId], [a1].[PreviewImage], [a1].[Rating], [a1].[Status], [a1].[Title], [a1].[TotalRatingCount], [a1].[TourCompanyId], [a1].[UpdatedAt], [s0].[Id], [s0].[ActivityId], [s0].[AvailableCapacity], [s0].[Date], [s0].[MaximumCapacity], [s0].[OptionId], [s0].[PartnerSupplierId], [s0].[StartTime], [s0].[Id0], [s0].[ActivityId0], [s0].[CanBeBookedAfterStartTime], [s0].[CutOff], [s0].[Duration], [s0].[EndTime], [s0].[FromDate], [s0].[Name], [s0].[StartTime0], [s0].[UntilDate], [s0].[Weekdays], [s0].[Id1], [s0].[AvailabilityId], [s0].[Capacity], [s0].[TicketCategoryId], [s0].[Id00], [s0].[Amount], [s0].[Currency], [s0].[MaxAge], [s0].[MaxSeats], [s0].[MinAge], [s0].[MinSeats], [s0].[Name0], [s0].[OptionId0], [s0].[PriceType], [s0].[Type]
FROM (
    SELECT TOP(1) [a].[Id], [a].[B2BAgencyId], [a].[Category], [a].[ContactInfo_Email], [a].[ContactInfoIsNull], [a].[ContactInfo_Name], [a].[ContactInfo_Phone], [a].[ContactInfo_Role], [a].[CountryCode], [a].[CoverImage], [a].[CreatedAt], [a].[Description], [a].[DestinationCode], [a].[DestinationName], [a].[DetailsUrl], [a].[Duration], [a].[Exclusions], [a].[ExclusionsJson], [a].[GalleryImages], [a].[GuestFields], [a].[GuestFieldsJson], [a].[Highlights], [a].[ImportantInfo], [a].[ImportantInfoJson], [a].[Inclusions], [a].[InclusionsJson], [a].[IsActive], [a].[IsFreeCancellation], [a].[Itinerary], [a].[Label], [a].[Media_Videos], [a].[PartnerSupplierId], [a].[PreviewImage], [a].[Rating], [a].[Status], [a].[Title], [a].[TotalRatingCount], [a].[TourCompanyId], [a].[UpdatedAt]
    FROM [Activities] AS [a]
    WHERE [a].[Id] = @__activityId_0
) AS [a1]
LEFT JOIN (
    SELECT [a0].[Id], [a0].[ActivityId], [a0].[AvailableCapacity], [a0].[Date], [a0].[MaximumCapacity], [a0].[OptionId], [a0].[PartnerSupplierId], [a0].[StartTime], [o].[Id] AS [Id0], [o].[ActivityId] AS [ActivityId0], [o].[CanBeBookedAfterStartTime], [o].[CutOff], [o].[Duration], [o].[EndTime], [o].[FromDate], [o].[Name], [o].[StartTime] AS [StartTime0], [o].[UntilDate], [o].[Weekdays], [s].[Id] AS [Id1], [s].[AvailabilityId], [s].[Capacity], [s].[TicketCategoryId], [s].[Id0] AS [Id00], [s].[Amount], [s].[Currency], [s].[MaxAge], [s].[MaxSeats], [s].[MinAge], [s].[MinSeats], [s].[Name] AS [Name0], [s].[OptionId] AS [OptionId0], [s].[PriceType], [s].[Type]
    FROM [Availabilities] AS [a0]
    INNER JOIN [Options] AS [o] ON [a0].[OptionId] = [o].[Id]
    LEFT JOIN (
        SELECT [t].[Id], [t].[AvailabilityId], [t].[Capacity], [t].[TicketCategoryId], [t0].[Id] AS [Id0], [t0].[Amount], [t0].[Currency], [t0].[MaxAge], [t0].[MaxSeats], [t0].[MinAge], [t0].[MinSeats], [t0].[Name], [t0].[OptionId], [t0].[PriceType], [t0].[Type]
        FROM [TicketCategoryCapacities] AS [t]
        INNER JOIN [TicketCategories] AS [t0] ON [t].[TicketCategoryId] = [t0].[Id]
    ) AS [s] ON [a0].[Id] = [s].[AvailabilityId]
) AS [s0] ON [a1].[Id] = [s0].[ActivityId]
ORDER BY [a1].[Id], [s0].[Id], [s0].[Id0], [s0].[Id1]
[2025-08-02 19:13:49 INF] Executed action method TourManagementApi.Controllers.ActivitiesWizardController.Availabilities (TourManagementApi), returned result Microsoft.AspNetCore.Mvc.ViewResult in 84.0108ms.
[2025-08-02 19:13:49 INF] Executing ViewResult, running view Availabilities.
[2025-08-02 19:13:49 INF] Executed ViewResult - view Availabilities executed in 0.7452ms.
[2025-08-02 19:13:49 INF] Executed action TourManagementApi.Controllers.ActivitiesWizardController.Availabilities (TourManagementApi) in 94.7332ms
[2025-08-02 19:13:49 INF] Executed endpoint 'TourManagementApi.Controllers.ActivitiesWizardController.Availabilities (TourManagementApi)'
[2025-08-02 19:13:49 INF] Request finished HTTP/1.1 GET http://localhost:5050/ActivitiesWizard/Availabilities?activityId=6 - 200 null text/html; charset=utf-8 116.1058ms
[2025-08-02 19:13:49 INF] Request starting HTTP/1.1 GET http://localhost:5050/_framework/aspnetcore-browser-refresh.js - null null
[2025-08-02 19:13:49 INF] Request finished HTTP/1.1 GET http://localhost:5050/_framework/aspnetcore-browser-refresh.js - 200 13770 application/javascript; charset=utf-8 0.1491ms
[2025-08-02 19:13:50 INF] Request starting HTTP/1.1 GET http://localhost:5050/ActivitiesWizard/Availabilities?activityId=3 - null null
[2025-08-02 19:13:50 INF] Executing endpoint 'TourManagementApi.Controllers.ActivitiesWizardController.Availabilities (TourManagementApi)'
[2025-08-02 19:13:50 INF] Route matched with {action = "Availabilities", controller = "ActivitiesWizard"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Availabilities(Int32) on controller TourManagementApi.Controllers.ActivitiesWizardController (TourManagementApi).
[2025-08-02 19:13:50 INF] Executing action method TourManagementApi.Controllers.ActivitiesWizardController.Availabilities (TourManagementApi) - Validation state: "Valid"
[2025-08-02 19:13:50 INF] Executed DbCommand (28ms) [Parameters=[@__activityId_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT [a1].[Id], [a1].[B2BAgencyId], [a1].[Category], [a1].[ContactInfo_Email], [a1].[ContactInfoIsNull], [a1].[ContactInfo_Name], [a1].[ContactInfo_Phone], [a1].[ContactInfo_Role], [a1].[CountryCode], [a1].[CoverImage], [a1].[CreatedAt], [a1].[Description], [a1].[DestinationCode], [a1].[DestinationName], [a1].[DetailsUrl], [a1].[Duration], [a1].[Exclusions], [a1].[ExclusionsJson], [a1].[GalleryImages], [a1].[GuestFields], [a1].[GuestFieldsJson], [a1].[Highlights], [a1].[ImportantInfo], [a1].[ImportantInfoJson], [a1].[Inclusions], [a1].[InclusionsJson], [a1].[IsActive], [a1].[IsFreeCancellation], [a1].[Itinerary], [a1].[Label], [a1].[Media_Videos], [a1].[PartnerSupplierId], [a1].[PreviewImage], [a1].[Rating], [a1].[Status], [a1].[Title], [a1].[TotalRatingCount], [a1].[TourCompanyId], [a1].[UpdatedAt], [s0].[Id], [s0].[ActivityId], [s0].[AvailableCapacity], [s0].[Date], [s0].[MaximumCapacity], [s0].[OptionId], [s0].[PartnerSupplierId], [s0].[StartTime], [s0].[Id0], [s0].[ActivityId0], [s0].[CanBeBookedAfterStartTime], [s0].[CutOff], [s0].[Duration], [s0].[EndTime], [s0].[FromDate], [s0].[Name], [s0].[StartTime0], [s0].[UntilDate], [s0].[Weekdays], [s0].[Id1], [s0].[AvailabilityId], [s0].[Capacity], [s0].[TicketCategoryId], [s0].[Id00], [s0].[Amount], [s0].[Currency], [s0].[MaxAge], [s0].[MaxSeats], [s0].[MinAge], [s0].[MinSeats], [s0].[Name0], [s0].[OptionId0], [s0].[PriceType], [s0].[Type]
FROM (
    SELECT TOP(1) [a].[Id], [a].[B2BAgencyId], [a].[Category], [a].[ContactInfo_Email], [a].[ContactInfoIsNull], [a].[ContactInfo_Name], [a].[ContactInfo_Phone], [a].[ContactInfo_Role], [a].[CountryCode], [a].[CoverImage], [a].[CreatedAt], [a].[Description], [a].[DestinationCode], [a].[DestinationName], [a].[DetailsUrl], [a].[Duration], [a].[Exclusions], [a].[ExclusionsJson], [a].[GalleryImages], [a].[GuestFields], [a].[GuestFieldsJson], [a].[Highlights], [a].[ImportantInfo], [a].[ImportantInfoJson], [a].[Inclusions], [a].[InclusionsJson], [a].[IsActive], [a].[IsFreeCancellation], [a].[Itinerary], [a].[Label], [a].[Media_Videos], [a].[PartnerSupplierId], [a].[PreviewImage], [a].[Rating], [a].[Status], [a].[Title], [a].[TotalRatingCount], [a].[TourCompanyId], [a].[UpdatedAt]
    FROM [Activities] AS [a]
    WHERE [a].[Id] = @__activityId_0
) AS [a1]
LEFT JOIN (
    SELECT [a0].[Id], [a0].[ActivityId], [a0].[AvailableCapacity], [a0].[Date], [a0].[MaximumCapacity], [a0].[OptionId], [a0].[PartnerSupplierId], [a0].[StartTime], [o].[Id] AS [Id0], [o].[ActivityId] AS [ActivityId0], [o].[CanBeBookedAfterStartTime], [o].[CutOff], [o].[Duration], [o].[EndTime], [o].[FromDate], [o].[Name], [o].[StartTime] AS [StartTime0], [o].[UntilDate], [o].[Weekdays], [s].[Id] AS [Id1], [s].[AvailabilityId], [s].[Capacity], [s].[TicketCategoryId], [s].[Id0] AS [Id00], [s].[Amount], [s].[Currency], [s].[MaxAge], [s].[MaxSeats], [s].[MinAge], [s].[MinSeats], [s].[Name] AS [Name0], [s].[OptionId] AS [OptionId0], [s].[PriceType], [s].[Type]
    FROM [Availabilities] AS [a0]
    INNER JOIN [Options] AS [o] ON [a0].[OptionId] = [o].[Id]
    LEFT JOIN (
        SELECT [t].[Id], [t].[AvailabilityId], [t].[Capacity], [t].[TicketCategoryId], [t0].[Id] AS [Id0], [t0].[Amount], [t0].[Currency], [t0].[MaxAge], [t0].[MaxSeats], [t0].[MinAge], [t0].[MinSeats], [t0].[Name], [t0].[OptionId], [t0].[PriceType], [t0].[Type]
        FROM [TicketCategoryCapacities] AS [t]
        INNER JOIN [TicketCategories] AS [t0] ON [t].[TicketCategoryId] = [t0].[Id]
    ) AS [s] ON [a0].[Id] = [s].[AvailabilityId]
) AS [s0] ON [a1].[Id] = [s0].[ActivityId]
ORDER BY [a1].[Id], [s0].[Id], [s0].[Id0], [s0].[Id1]
[2025-08-02 19:13:50 INF] Executed action method TourManagementApi.Controllers.ActivitiesWizardController.Availabilities (TourManagementApi), returned result Microsoft.AspNetCore.Mvc.ViewResult in 389.2976ms.
[2025-08-02 19:13:50 INF] Executing ViewResult, running view Availabilities.
[2025-08-02 19:13:50 INF] Executed ViewResult - view Availabilities executed in 0.9181ms.
[2025-08-02 19:13:50 INF] Executed action TourManagementApi.Controllers.ActivitiesWizardController.Availabilities (TourManagementApi) in 399.1139ms
[2025-08-02 19:13:50 INF] Executed endpoint 'TourManagementApi.Controllers.ActivitiesWizardController.Availabilities (TourManagementApi)'
[2025-08-02 19:13:50 INF] Request finished HTTP/1.1 GET http://localhost:5050/ActivitiesWizard/Availabilities?activityId=3 - 200 null text/html; charset=utf-8 416.0796ms
[2025-08-02 19:13:50 INF] Request starting HTTP/1.1 GET http://localhost:5050/_framework/aspnetcore-browser-refresh.js - null null
[2025-08-02 19:13:50 INF] Request finished HTTP/1.1 GET http://localhost:5050/_framework/aspnetcore-browser-refresh.js - 200 13770 application/javascript; charset=utf-8 0.2159ms
[2025-08-02 19:13:53 INF] Request starting HTTP/1.1 GET http://localhost:5050/ActivitiesWizard/CreateAvailability/3 - null null
[2025-08-02 19:13:53 INF] Executing endpoint 'TourManagementApi.Controllers.ActivitiesWizardController.CreateAvailability (TourManagementApi)'
[2025-08-02 19:13:53 INF] Route matched with {action = "CreateAvailability", controller = "ActivitiesWizard"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateAvailability(Int32) on controller TourManagementApi.Controllers.ActivitiesWizardController (TourManagementApi).
[2025-08-02 19:13:53 INF] Executing action method TourManagementApi.Controllers.ActivitiesWizardController.CreateAvailability (TourManagementApi) - Validation state: "Valid"
[2025-08-02 19:13:53 INF] Executed DbCommand (27ms) [Parameters=[@__id_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Id], [a0].[B2BAgencyId], [a0].[Category], [a0].[ContactInfo_Email], [a0].[ContactInfoIsNull], [a0].[ContactInfo_Name], [a0].[ContactInfo_Phone], [a0].[ContactInfo_Role], [a0].[CountryCode], [a0].[CoverImage], [a0].[CreatedAt], [a0].[Description], [a0].[DestinationCode], [a0].[DestinationName], [a0].[DetailsUrl], [a0].[Duration], [a0].[Exclusions], [a0].[ExclusionsJson], [a0].[GalleryImages], [a0].[GuestFields], [a0].[GuestFieldsJson], [a0].[Highlights], [a0].[ImportantInfo], [a0].[ImportantInfoJson], [a0].[Inclusions], [a0].[InclusionsJson], [a0].[IsActive], [a0].[IsFreeCancellation], [a0].[Itinerary], [a0].[Label], [a0].[Media_Videos], [a0].[PartnerSupplierId], [a0].[PreviewImage], [a0].[Rating], [a0].[Status], [a0].[Title], [a0].[TotalRatingCount], [a0].[TourCompanyId], [a0].[UpdatedAt], [s].[Id], [s].[ActivityId], [s].[CanBeBookedAfterStartTime], [s].[CutOff], [s].[Duration], [s].[EndTime], [s].[FromDate], [s].[Name], [s].[StartTime], [s].[UntilDate], [s].[Weekdays], [s].[Id0], [s].[Amount], [s].[Currency], [s].[MaxAge], [s].[MaxSeats], [s].[MinAge], [s].[MinSeats], [s].[Name0], [s].[OptionId], [s].[PriceType], [s].[Type]
FROM (
    SELECT TOP(1) [a].[Id], [a].[B2BAgencyId], [a].[Category], [a].[ContactInfo_Email], [a].[ContactInfoIsNull], [a].[ContactInfo_Name], [a].[ContactInfo_Phone], [a].[ContactInfo_Role], [a].[CountryCode], [a].[CoverImage], [a].[CreatedAt], [a].[Description], [a].[DestinationCode], [a].[DestinationName], [a].[DetailsUrl], [a].[Duration], [a].[Exclusions], [a].[ExclusionsJson], [a].[GalleryImages], [a].[GuestFields], [a].[GuestFieldsJson], [a].[Highlights], [a].[ImportantInfo], [a].[ImportantInfoJson], [a].[Inclusions], [a].[InclusionsJson], [a].[IsActive], [a].[IsFreeCancellation], [a].[Itinerary], [a].[Label], [a].[Media_Videos], [a].[PartnerSupplierId], [a].[PreviewImage], [a].[Rating], [a].[Status], [a].[Title], [a].[TotalRatingCount], [a].[TourCompanyId], [a].[UpdatedAt]
    FROM [Activities] AS [a]
    WHERE [a].[Id] = @__id_0
) AS [a0]
LEFT JOIN (
    SELECT [o].[Id], [o].[ActivityId], [o].[CanBeBookedAfterStartTime], [o].[CutOff], [o].[Duration], [o].[EndTime], [o].[FromDate], [o].[Name], [o].[StartTime], [o].[UntilDate], [o].[Weekdays], [t].[Id] AS [Id0], [t].[Amount], [t].[Currency], [t].[MaxAge], [t].[MaxSeats], [t].[MinAge], [t].[MinSeats], [t].[Name] AS [Name0], [t].[OptionId], [t].[PriceType], [t].[Type]
    FROM [Options] AS [o]
    LEFT JOIN [TicketCategories] AS [t] ON [o].[Id] = [t].[OptionId]
) AS [s] ON [a0].[Id] = [s].[ActivityId]
ORDER BY [a0].[Id], [s].[Id]
[2025-08-02 19:13:53 INF] Executed action method TourManagementApi.Controllers.ActivitiesWizardController.CreateAvailability (TourManagementApi), returned result Microsoft.AspNetCore.Mvc.ViewResult in 30.3515ms.
[2025-08-02 19:13:53 INF] Executing ViewResult, running view CreateAvailability.
[2025-08-02 19:13:53 INF] Executed ViewResult - view CreateAvailability executed in 1.3557ms.
[2025-08-02 19:13:53 INF] Executed action TourManagementApi.Controllers.ActivitiesWizardController.CreateAvailability (TourManagementApi) in 39.0708ms
[2025-08-02 19:13:53 INF] Executed endpoint 'TourManagementApi.Controllers.ActivitiesWizardController.CreateAvailability (TourManagementApi)'
[2025-08-02 19:13:53 INF] Request finished HTTP/1.1 GET http://localhost:5050/ActivitiesWizard/CreateAvailability/3 - 200 null text/html; charset=utf-8 58.3704ms
[2025-08-02 19:13:53 INF] Request starting HTTP/1.1 GET http://localhost:5050/_vs/browserLink - null null
[2025-08-02 19:13:53 INF] Request starting HTTP/1.1 GET http://localhost:5050/_framework/aspnetcore-browser-refresh.js - null null
[2025-08-02 19:13:53 INF] Request finished HTTP/1.1 GET http://localhost:5050/_framework/aspnetcore-browser-refresh.js - 200 13770 application/javascript; charset=utf-8 0.1839ms
[2025-08-02 19:13:53 INF] Request finished HTTP/1.1 GET http://localhost:5050/_vs/browserLink - 200 null text/javascript; charset=UTF-8 12.987ms
[2025-08-02 19:13:56 INF] Request starting HTTP/1.1 GET http://localhost:5050/ActivitiesWizard/GetTicketCategories?optionId=10 - null null
[2025-08-02 19:13:56 INF] Executing endpoint 'TourManagementApi.Controllers.ActivitiesWizardController.GetTicketCategories (TourManagementApi)'
[2025-08-02 19:13:56 INF] Route matched with {action = "GetTicketCategories", controller = "ActivitiesWizard"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTicketCategories(Int32) on controller TourManagementApi.Controllers.ActivitiesWizardController (TourManagementApi).
[2025-08-02 19:13:56 INF] Executing action method TourManagementApi.Controllers.ActivitiesWizardController.GetTicketCategories (TourManagementApi) - Validation state: "Valid"
[2025-08-02 19:13:56 INF] Executed DbCommand (26ms) [Parameters=[@__optionId_0='10'], CommandType='"Text"', CommandTimeout='30']
SELECT [o0].[Id], [o0].[ActivityId], [o0].[CanBeBookedAfterStartTime], [o0].[CutOff], [o0].[Duration], [o0].[EndTime], [o0].[FromDate], [o0].[Name], [o0].[StartTime], [o0].[UntilDate], [o0].[Weekdays], [t].[Id], [t].[Amount], [t].[Currency], [t].[MaxAge], [t].[MaxSeats], [t].[MinAge], [t].[MinSeats], [t].[Name], [t].[OptionId], [t].[PriceType], [t].[Type]
FROM (
    SELECT TOP(1) [o].[Id], [o].[ActivityId], [o].[CanBeBookedAfterStartTime], [o].[CutOff], [o].[Duration], [o].[EndTime], [o].[FromDate], [o].[Name], [o].[StartTime], [o].[UntilDate], [o].[Weekdays]
    FROM [Options] AS [o]
    WHERE [o].[Id] = @__optionId_0
) AS [o0]
LEFT JOIN [TicketCategories] AS [t] ON [o0].[Id] = [t].[OptionId]
ORDER BY [o0].[Id]
[2025-08-02 19:13:56 INF] Executed action method TourManagementApi.Controllers.ActivitiesWizardController.GetTicketCategories (TourManagementApi), returned result Microsoft.AspNetCore.Mvc.JsonResult in 27.3319ms.
[2025-08-02 19:13:56 INF] Executing JsonResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType3`2[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], TourManagementApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-08-02 19:13:56 INF] Executed action TourManagementApi.Controllers.ActivitiesWizardController.GetTicketCategories (TourManagementApi) in 40.1358ms
[2025-08-02 19:13:56 INF] Executed endpoint 'TourManagementApi.Controllers.ActivitiesWizardController.GetTicketCategories (TourManagementApi)'
[2025-08-02 19:13:56 INF] Request finished HTTP/1.1 GET http://localhost:5050/ActivitiesWizard/GetTicketCategories?optionId=10 - 200 null application/json; charset=utf-8 43.6771ms
[2025-08-02 19:14:10 INF] Request starting HTTP/1.1 POST http://localhost:5050/ActivitiesWizard/CreateAvailability/3 - application/x-www-form-urlencoded 543
[2025-08-02 19:14:10 INF] Executing endpoint 'TourManagementApi.Controllers.ActivitiesWizardController.CreateAvailability (TourManagementApi)'
[2025-08-02 19:14:10 INF] Route matched with {action = "CreateAvailability", controller = "ActivitiesWizard"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateAvailability(TourManagementApi.Models.ViewModels.CreateAvailabilityViewModel) on controller TourManagementApi.Controllers.ActivitiesWizardController (TourManagementApi).
[2025-08-02 19:14:10 INF] Executing action method TourManagementApi.Controllers.ActivitiesWizardController.CreateAvailability (TourManagementApi) - Validation state: "Valid"
[2025-08-02 19:14:10 INF] Executed DbCommand (25ms) [Parameters=[@__model_ActivityId_0='3', @__model_OptionId_1='10', @__model_StartDate_2='08/02/2025' (DbType = Date), @__model_EndDate_3='08/31/2025' (DbType = Date)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Date]
FROM [Availabilities] AS [a]
WHERE [a].[ActivityId] = @__model_ActivityId_0 AND [a].[OptionId] = @__model_OptionId_1 AND [a].[Date] >= @__model_StartDate_2 AND [a].[Date] <= @__model_EndDate_3
[2025-08-02 19:14:10 INF] Executed DbCommand (32ms) [Parameters=[@p0='3', @p1='12', @p2='08/02/2025' (DbType = Date), @p3='12', @p4='10', @p5='12004' (Nullable = false) (Size = 100), @p6='2025-08-02T00:00:00.0000000+03:00' (Nullable = true), @p7='3', @p8='12', @p9='08/03/2025' (DbType = Date), @p10='12', @p11='10', @p12='12004' (Nullable = false) (Size = 100), @p13='2025-08-03T00:00:00.0000000+03:00' (Nullable = true), @p14='3', @p15='12', @p16='08/04/2025' (DbType = Date), @p17='12', @p18='10', @p19='12004' (Nullable = false) (Size = 100), @p20='2025-08-04T00:00:00.0000000+03:00' (Nullable = true), @p21='3', @p22='12', @p23='08/05/2025' (DbType = Date), @p24='12', @p25='10', @p26='12004' (Nullable = false) (Size = 100), @p27='2025-08-05T00:00:00.0000000+03:00' (Nullable = true), @p28='3', @p29='12', @p30='08/06/2025' (DbType = Date), @p31='12', @p32='10', @p33='12004' (Nullable = false) (Size = 100), @p34='2025-08-06T00:00:00.0000000+03:00' (Nullable = true), @p35='3', @p36='12', @p37='08/07/2025' (DbType = Date), @p38='12', @p39='10', @p40='12004' (Nullable = false) (Size = 100), @p41='2025-08-07T00:00:00.0000000+03:00' (Nullable = true), @p42='3', @p43='12', @p44='08/08/2025' (DbType = Date), @p45='12', @p46='10', @p47='12004' (Nullable = false) (Size = 100), @p48='2025-08-08T00:00:00.0000000+03:00' (Nullable = true), @p49='3', @p50='12', @p51='08/09/2025' (DbType = Date), @p52='12', @p53='10', @p54='12004' (Nullable = false) (Size = 100), @p55='2025-08-09T00:00:00.0000000+03:00' (Nullable = true), @p56='3', @p57='12', @p58='08/10/2025' (DbType = Date), @p59='12', @p60='10', @p61='12004' (Nullable = false) (Size = 100), @p62='2025-08-10T00:00:00.0000000+03:00' (Nullable = true), @p63='3', @p64='12', @p65='08/11/2025' (DbType = Date), @p66='12', @p67='10', @p68='12004' (Nullable = false) (Size = 100), @p69='2025-08-11T00:00:00.0000000+03:00' (Nullable = true), @p70='3', @p71='12', @p72='08/12/2025' (DbType = Date), @p73='12', @p74='10', @p75='12004' (Nullable = false) (Size = 100), @p76='2025-08-12T00:00:00.0000000+03:00' (Nullable = true), @p77='3', @p78='12', @p79='08/13/2025' (DbType = Date), @p80='12', @p81='10', @p82='12004' (Nullable = false) (Size = 100), @p83='2025-08-13T00:00:00.0000000+03:00' (Nullable = true), @p84='3', @p85='12', @p86='08/14/2025' (DbType = Date), @p87='12', @p88='10', @p89='12004' (Nullable = false) (Size = 100), @p90='2025-08-14T00:00:00.0000000+03:00' (Nullable = true), @p91='3', @p92='12', @p93='08/15/2025' (DbType = Date), @p94='12', @p95='10', @p96='12004' (Nullable = false) (Size = 100), @p97='2025-08-15T00:00:00.0000000+03:00' (Nullable = true), @p98='3', @p99='12', @p100='08/16/2025' (DbType = Date), @p101='12', @p102='10', @p103='12004' (Nullable = false) (Size = 100), @p104='2025-08-16T00:00:00.0000000+03:00' (Nullable = true), @p105='3', @p106='12', @p107='08/17/2025' (DbType = Date), @p108='12', @p109='10', @p110='12004' (Nullable = false) (Size = 100), @p111='2025-08-17T00:00:00.0000000+03:00' (Nullable = true), @p112='3', @p113='12', @p114='08/18/2025' (DbType = Date), @p115='12', @p116='10', @p117='12004' (Nullable = false) (Size = 100), @p118='2025-08-18T00:00:00.0000000+03:00' (Nullable = true), @p119='3', @p120='12', @p121='08/19/2025' (DbType = Date), @p122='12', @p123='10', @p124='12004' (Nullable = false) (Size = 100), @p125='2025-08-19T00:00:00.0000000+03:00' (Nullable = true), @p126='3', @p127='12', @p128='08/20/2025' (DbType = Date), @p129='12', @p130='10', @p131='12004' (Nullable = false) (Size = 100), @p132='2025-08-20T00:00:00.0000000+03:00' (Nullable = true), @p133='3', @p134='12', @p135='08/21/2025' (DbType = Date), @p136='12', @p137='10', @p138='12004' (Nullable = false) (Size = 100), @p139='2025-08-21T00:00:00.0000000+03:00' (Nullable = true), @p140='3', @p141='12', @p142='08/22/2025' (DbType = Date), @p143='12', @p144='10', @p145='12004' (Nullable = false) (Size = 100), @p146='2025-08-22T00:00:00.0000000+03:00' (Nullable = true), @p147='3', @p148='12', @p149='08/23/2025' (DbType = Date), @p150='12', @p151='10', @p152='12004' (Nullable = false) (Size = 100), @p153='2025-08-23T00:00:00.0000000+03:00' (Nullable = true), @p154='3', @p155='12', @p156='08/24/2025' (DbType = Date), @p157='12', @p158='10', @p159='12004' (Nullable = false) (Size = 100), @p160='2025-08-24T00:00:00.0000000+03:00' (Nullable = true), @p161='3', @p162='12', @p163='08/25/2025' (DbType = Date), @p164='12', @p165='10', @p166='12004' (Nullable = false) (Size = 100), @p167='2025-08-25T00:00:00.0000000+03:00' (Nullable = true), @p168='3', @p169='12', @p170='08/26/2025' (DbType = Date), @p171='12', @p172='10', @p173='12004' (Nullable = false) (Size = 100), @p174='2025-08-26T00:00:00.0000000+03:00' (Nullable = true), @p175='3', @p176='12', @p177='08/27/2025' (DbType = Date), @p178='12', @p179='10', @p180='12004' (Nullable = false) (Size = 100), @p181='2025-08-27T00:00:00.0000000+03:00' (Nullable = true), @p182='3', @p183='12', @p184='08/28/2025' (DbType = Date), @p185='12', @p186='10', @p187='12004' (Nullable = false) (Size = 100), @p188='2025-08-28T00:00:00.0000000+03:00' (Nullable = true), @p189='3', @p190='12', @p191='08/29/2025' (DbType = Date), @p192='12', @p193='10', @p194='12004' (Nullable = false) (Size = 100), @p195='2025-08-29T00:00:00.0000000+03:00' (Nullable = true), @p196='3', @p197='12', @p198='08/30/2025' (DbType = Date), @p199='12', @p200='10', @p201='12004' (Nullable = false) (Size = 100), @p202='2025-08-30T00:00:00.0000000+03:00' (Nullable = true), @p203='3', @p204='12', @p205='08/31/2025' (DbType = Date), @p206='12', @p207='10', @p208='12004' (Nullable = false) (Size = 100), @p209='2025-08-31T00:00:00.0000000+03:00' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [Availabilities] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, 0),
(@p7, @p8, @p9, @p10, @p11, @p12, @p13, 1),
(@p14, @p15, @p16, @p17, @p18, @p19, @p20, 2),
(@p21, @p22, @p23, @p24, @p25, @p26, @p27, 3),
(@p28, @p29, @p30, @p31, @p32, @p33, @p34, 4),
(@p35, @p36, @p37, @p38, @p39, @p40, @p41, 5),
(@p42, @p43, @p44, @p45, @p46, @p47, @p48, 6),
(@p49, @p50, @p51, @p52, @p53, @p54, @p55, 7),
(@p56, @p57, @p58, @p59, @p60, @p61, @p62, 8),
(@p63, @p64, @p65, @p66, @p67, @p68, @p69, 9),
(@p70, @p71, @p72, @p73, @p74, @p75, @p76, 10),
(@p77, @p78, @p79, @p80, @p81, @p82, @p83, 11),
(@p84, @p85, @p86, @p87, @p88, @p89, @p90, 12),
(@p91, @p92, @p93, @p94, @p95, @p96, @p97, 13),
(@p98, @p99, @p100, @p101, @p102, @p103, @p104, 14),
(@p105, @p106, @p107, @p108, @p109, @p110, @p111, 15),
(@p112, @p113, @p114, @p115, @p116, @p117, @p118, 16),
(@p119, @p120, @p121, @p122, @p123, @p124, @p125, 17),
(@p126, @p127, @p128, @p129, @p130, @p131, @p132, 18),
(@p133, @p134, @p135, @p136, @p137, @p138, @p139, 19),
(@p140, @p141, @p142, @p143, @p144, @p145, @p146, 20),
(@p147, @p148, @p149, @p150, @p151, @p152, @p153, 21),
(@p154, @p155, @p156, @p157, @p158, @p159, @p160, 22),
(@p161, @p162, @p163, @p164, @p165, @p166, @p167, 23),
(@p168, @p169, @p170, @p171, @p172, @p173, @p174, 24),
(@p175, @p176, @p177, @p178, @p179, @p180, @p181, 25),
(@p182, @p183, @p184, @p185, @p186, @p187, @p188, 26),
(@p189, @p190, @p191, @p192, @p193, @p194, @p195, 27),
(@p196, @p197, @p198, @p199, @p200, @p201, @p202, 28),
(@p203, @p204, @p205, @p206, @p207, @p208, @p209, 29)) AS i ([ActivityId], [AvailableCapacity], [Date], [MaximumCapacity], [OptionId], [PartnerSupplierId], [StartTime], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([ActivityId], [AvailableCapacity], [Date], [MaximumCapacity], [OptionId], [PartnerSupplierId], [StartTime])
VALUES (i.[ActivityId], i.[AvailableCapacity], i.[Date], i.[MaximumCapacity], i.[OptionId], i.[PartnerSupplierId], i.[StartTime])
OUTPUT INSERTED.[Id], i._Position;
[2025-08-02 19:14:10 INF] Executed DbCommand (27ms) [Parameters=[@p210='769', @p211=NULL (DbType = Int32), @p212='30', @p213='770', @p214=NULL (DbType = Int32), @p215='30', @p216='771', @p217=NULL (DbType = Int32), @p218='30', @p219='772', @p220=NULL (DbType = Int32), @p221='30', @p222='773', @p223=NULL (DbType = Int32), @p224='30', @p225='774', @p226=NULL (DbType = Int32), @p227='30', @p228='775', @p229=NULL (DbType = Int32), @p230='30', @p231='776', @p232=NULL (DbType = Int32), @p233='30', @p234='777', @p235=NULL (DbType = Int32), @p236='30', @p237='778', @p238=NULL (DbType = Int32), @p239='30', @p240='779', @p241=NULL (DbType = Int32), @p242='30', @p243='780', @p244=NULL (DbType = Int32), @p245='30', @p246='781', @p247=NULL (DbType = Int32), @p248='30', @p249='782', @p250=NULL (DbType = Int32), @p251='30', @p252='783', @p253=NULL (DbType = Int32), @p254='30', @p255='784', @p256=NULL (DbType = Int32), @p257='30', @p258='785', @p259=NULL (DbType = Int32), @p260='30', @p261='786', @p262=NULL (DbType = Int32), @p263='30', @p264='787', @p265=NULL (DbType = Int32), @p266='30', @p267='788', @p268=NULL (DbType = Int32), @p269='30', @p270='789', @p271=NULL (DbType = Int32), @p272='30', @p273='790', @p274=NULL (DbType = Int32), @p275='30', @p276='791', @p277=NULL (DbType = Int32), @p278='30', @p279='792', @p280=NULL (DbType = Int32), @p281='30', @p282='793', @p283=NULL (DbType = Int32), @p284='30', @p285='794', @p286=NULL (DbType = Int32), @p287='30', @p288='795', @p289=NULL (DbType = Int32), @p290='30', @p291='796', @p292=NULL (DbType = Int32), @p293='30', @p294='797', @p295=NULL (DbType = Int32), @p296='30', @p297='798', @p298=NULL (DbType = Int32), @p299='30'], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [TicketCategoryCapacities] USING (
VALUES (@p210, @p211, @p212, 0),
(@p213, @p214, @p215, 1),
(@p216, @p217, @p218, 2),
(@p219, @p220, @p221, 3),
(@p222, @p223, @p224, 4),
(@p225, @p226, @p227, 5),
(@p228, @p229, @p230, 6),
(@p231, @p232, @p233, 7),
(@p234, @p235, @p236, 8),
(@p237, @p238, @p239, 9),
(@p240, @p241, @p242, 10),
(@p243, @p244, @p245, 11),
(@p246, @p247, @p248, 12),
(@p249, @p250, @p251, 13),
(@p252, @p253, @p254, 14),
(@p255, @p256, @p257, 15),
(@p258, @p259, @p260, 16),
(@p261, @p262, @p263, 17),
(@p264, @p265, @p266, 18),
(@p267, @p268, @p269, 19),
(@p270, @p271, @p272, 20),
(@p273, @p274, @p275, 21),
(@p276, @p277, @p278, 22),
(@p279, @p280, @p281, 23),
(@p282, @p283, @p284, 24),
(@p285, @p286, @p287, 25),
(@p288, @p289, @p290, 26),
(@p291, @p292, @p293, 27),
(@p294, @p295, @p296, 28),
(@p297, @p298, @p299, 29)) AS i ([AvailabilityId], [Capacity], [TicketCategoryId], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([AvailabilityId], [Capacity], [TicketCategoryId])
VALUES (i.[AvailabilityId], i.[Capacity], i.[TicketCategoryId])
OUTPUT INSERTED.[Id], i._Position;
[2025-08-02 19:14:10 ERR] ExperienceBank availability notify failed (CreateAvailability)
System.FormatException: Input string was not in a correct format.
   at System.DateTimeFormat.IsValidCustomDateOnlyFormat(ReadOnlySpan`1 format, Boolean throwOnError)
   at System.DateOnly.ToString(String format, IFormatProvider provider)
   at TourManagementApi.Controllers.ActivitiesWizardController.CreateAvailability(CreateAvailabilityViewModel model) in D:\TFS\Lymranet\Tourism\B2B\HotelWidget\TourManagement\Controllers\ActivitiesWizardController.cs:line 977
[2025-08-02 19:14:10 INF] Executed action method TourManagementApi.Controllers.ActivitiesWizardController.CreateAvailability (TourManagementApi), returned result Microsoft.AspNetCore.Mvc.RedirectToActionResult in 196.4693ms.
[2025-08-02 19:14:10 INF] Executing RedirectResult, redirecting to /.
[2025-08-02 19:14:10 INF] Executed action TourManagementApi.Controllers.ActivitiesWizardController.CreateAvailability (TourManagementApi) in 209.4183ms
[2025-08-02 19:14:10 INF] Executed endpoint 'TourManagementApi.Controllers.ActivitiesWizardController.CreateAvailability (TourManagementApi)'
[2025-08-02 19:14:10 INF] Request finished HTTP/1.1 POST http://localhost:5050/ActivitiesWizard/CreateAvailability/3 - 302 0 null 231.5913ms
[2025-08-02 19:14:10 INF] Request starting HTTP/1.1 GET http://localhost:5050/ - null null
[2025-08-02 19:14:10 INF] Executing endpoint 'TourManagementApi.Controllers.ActivitiesWizardController.Index (TourManagementApi)'
[2025-08-02 19:14:10 INF] Route matched with {action = "Index", controller = "ActivitiesWizard"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Index(System.String) on controller TourManagementApi.Controllers.ActivitiesWizardController (TourManagementApi).
[2025-08-02 19:14:10 INF] Executing action method TourManagementApi.Controllers.ActivitiesWizardController.Index (TourManagementApi) - Validation state: "Invalid"
[2025-08-02 19:14:10 INF] Executed DbCommand (29ms) [Parameters=[@__Id_0='96d2940f09674b0f81d86bc821c69ff6' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[Title], [a].[Description], [a].[Category], [t].[CompanyName], [a].[Label], [a].[Status], [t].[Id], [o].[Id], [o].[ActivityId], [o].[CanBeBookedAfterStartTime], [o].[CutOff], [o].[Duration], [o].[EndTime], [o].[FromDate], [o].[Name], [o].[StartTime], [o].[UntilDate], [o].[Weekdays], [a].[CountryCode], [a].[DestinationCode], [a].[DestinationName], [a].[CreatedAt], [a].[UpdatedAt], [a].[Rating], [a].[IsFreeCancellation], (
    SELECT COUNT(*)
    FROM [Reservations] AS [r]
    WHERE [a].[Id] = [r].[ActivityId]), (
    SELECT COUNT(*)
    FROM [Availabilities] AS [a0]
    WHERE [a].[Id] = [a0].[ActivityId])
FROM [Activities] AS [a]
LEFT JOIN [TourCompanies] AS [t] ON [a].[TourCompanyId] = [t].[Id]
LEFT JOIN [Options] AS [o] ON [a].[Id] = [o].[ActivityId]
WHERE [a].[B2BAgencyId] = @__Id_0
ORDER BY [a].[Id], [t].[Id]
[2025-08-02 19:14:10 INF] Executed action method TourManagementApi.Controllers.ActivitiesWizardController.Index (TourManagementApi), returned result Microsoft.AspNetCore.Mvc.ViewResult in 57.5238ms.
[2025-08-02 19:14:10 INF] Executing ViewResult, running view Index.
[2025-08-02 19:14:10 INF] Executed ViewResult - view Index executed in 1.7822ms.
[2025-08-02 19:14:10 INF] Executed action TourManagementApi.Controllers.ActivitiesWizardController.Index (TourManagementApi) in 68.4201ms
[2025-08-02 19:14:10 INF] Executed endpoint 'TourManagementApi.Controllers.ActivitiesWizardController.Index (TourManagementApi)'
[2025-08-02 19:14:10 INF] Request finished HTTP/1.1 GET http://localhost:5050/ - 200 null text/html; charset=utf-8 86.1901ms
[2025-08-02 19:14:10 INF] Request starting HTTP/1.1 GET http://localhost:5050/_vs/browserLink - null null
[2025-08-02 19:14:10 INF] Request finished HTTP/1.1 GET http://localhost:5050/_vs/browserLink - 200 null text/javascript; charset=UTF-8 5.66ms
[2025-08-02 19:14:10 INF] Request starting HTTP/1.1 GET http://localhost:5050/_framework/aspnetcore-browser-refresh.js - null null
[2025-08-02 19:14:10 INF] Request finished HTTP/1.1 GET http://localhost:5050/_framework/aspnetcore-browser-refresh.js - 200 13770 application/javascript; charset=utf-8 0.1821ms
[2025-08-02 19:14:44 INF] Request starting HTTP/1.1 GET http://localhost:5050/api/rezdyconnect/availability?apiKey=6f686c1986af4830aefb398dc2525bc6&productCode=PHN0ZK&externalProductCode=3-1&startTime=2025-08-04T21:00:00Z&endTime=2025-08-06T21:00:00Z&from=2025-08-04T21:00:00Z&to=2025-08-06T21:00:00Z&startTimeLocal=2025-08-05%2000:00:00&endTimeLocal=2025-08-07%2000:00:00&fromLocal=2025-08-05%2000:00:00&toLocal=2025-08-07%2000:00:00 - null null
[2025-08-02 19:14:44 INF] Executing endpoint 'TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi)'
[2025-08-02 19:14:44 INF] Route matched with {action = "GetAvailability", controller = "RezdyConnect"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAvailability(System.String, System.String, System.String, System.DateTime, System.DateTime, System.String, System.String) on controller TourManagementApi.Controllers.Api.RezdyConnectController (TourManagementApi).
[2025-08-02 19:14:44 INF] Executing action method TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi) - Validation state: "Valid"
[2025-08-02 19:14:44 INF] Executed action method TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1.8556ms.
[2025-08-02 19:14:44 INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`2[[<>f__AnonymousType1`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], TourManagementApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[TourManagementApi.Models.Api.RezdyConnectModels.AvailabilitySessionResponse, TourManagementApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-08-02 19:14:44 INF] Executed action TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi) in 32.1527ms
[2025-08-02 19:14:44 INF] Executed endpoint 'TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi)'
[2025-08-02 19:14:44 INF] Request finished HTTP/1.1 GET http://localhost:5050/api/rezdyconnect/availability?apiKey=6f686c1986af4830aefb398dc2525bc6&productCode=PHN0ZK&externalProductCode=3-1&startTime=2025-08-04T21:00:00Z&endTime=2025-08-06T21:00:00Z&from=2025-08-04T21:00:00Z&to=2025-08-06T21:00:00Z&startTimeLocal=2025-08-05%2000:00:00&endTimeLocal=2025-08-07%2000:00:00&fromLocal=2025-08-05%2000:00:00&toLocal=2025-08-07%2000:00:00 - 200 null application/json; charset=utf-8 76.3366ms
[2025-08-02 19:15:16 INF] Request starting HTTP/1.1 GET http://localhost:5050/api/rezdyconnect/availability?apiKey=6f686c1986af4830aefb398dc2525bc6&productCode=PHN0ZK&externalProductCode=3-1&startTime=2025-08-04T21:00:00Z&endTime=2025-08-06T21:00:00Z&from=2025-08-04T21:00:00Z&to=2025-08-06T21:00:00Z&startTimeLocal=2025-08-05%2000:00:00&endTimeLocal=2025-08-07%2000:00:00&fromLocal=2025-08-05%2000:00:00&toLocal=2025-08-07%2000:00:00 - null null
[2025-08-02 19:15:16 INF] Executing endpoint 'TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi)'
[2025-08-02 19:15:16 INF] Route matched with {action = "GetAvailability", controller = "RezdyConnect"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAvailability(System.String, System.String, System.String, System.DateTime, System.DateTime, System.String, System.String) on controller TourManagementApi.Controllers.Api.RezdyConnectController (TourManagementApi).
[2025-08-02 19:15:16 INF] Executing action method TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi) - Validation state: "Valid"
[2025-08-02 19:18:47 WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
[2025-08-02 19:18:47 ERR] Veritabanı güncellenirken bir hata oluştu.
System.InvalidOperationException: An error was generated for warning 'Microsoft.EntityFrameworkCore.Migrations.PendingModelChangesWarning': The model for context 'ApplicationDbContext' has pending changes. Add a new migration before updating the database. See https://aka.ms/efcore-docs-pending-changes. This exception can be suppressed or logged by passing event ID 'RelationalEventId.PendingModelChangesWarning' to the 'ConfigureWarnings' method in 'DbContext.OnConfiguring' or 'AddDbContext'.
   at Microsoft.EntityFrameworkCore.Diagnostics.EventDefinition`1.Log[TLoggerCategory](IDiagnosticsLogger`1 logger, TParam arg)
   at Microsoft.EntityFrameworkCore.Diagnostics.RelationalLoggerExtensions.PendingModelChangesWarning(IDiagnosticsLogger`1 diagnostics, Type contextType)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.Migrator.ValidateMigrations(Boolean useTransaction, String targetMigration)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.Migrator.Migrate(String targetMigration)
   at Microsoft.EntityFrameworkCore.RelationalDatabaseFacadeExtensions.Migrate(DatabaseFacade databaseFacade)
   at Program.<Main>$(String[] args) in D:\TFS\Lymranet\Tourism\B2B\HotelWidget\TourManagement\Program.cs:line 160
[2025-08-02 19:18:47 INF] User profile is available. Using 'C:\Users\OZKAN\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2025-08-02 19:18:47 INF] Now listening on: http://localhost:5050
[2025-08-02 19:18:47 INF] Application started. Press Ctrl+C to shut down.
[2025-08-02 19:18:47 INF] Hosting environment: Development
[2025-08-02 19:18:47 INF] Content root path: D:\TFS\Lymranet\Tourism\B2B\HotelWidget\TourManagement
[2025-08-02 19:18:48 INF] Request starting HTTP/1.1 GET http://localhost:5050/api/rezdyconnect/availability?apiKey=6f686c1986af4830aefb398dc2525bc6&productCode=PHN0ZK&externalProductCode=3-1&startTime=2025-08-04T21:00:00Z&endTime=2025-08-06T21:00:00Z&from=2025-08-04T21:00:00Z&to=2025-08-06T21:00:00Z&startTimeLocal=2025-08-05%2000:00:00&endTimeLocal=2025-08-07%2000:00:00&fromLocal=2025-08-05%2000:00:00&toLocal=2025-08-07%2000:00:00 - null null
[2025-08-02 19:18:48 INF] Executing endpoint 'TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi)'
[2025-08-02 19:18:48 INF] Route matched with {action = "GetAvailability", controller = "RezdyConnect"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAvailability(System.String, System.String, System.String, System.DateTime, System.DateTime, System.String, System.String) on controller TourManagementApi.Controllers.Api.RezdyConnectController (TourManagementApi).
[2025-08-02 19:18:49 INF] Executed DbCommand (36ms) [Parameters=[@__activityId_0='3', @__optionId_1='1', @__p_2='2025-08-04T21:00:00.0000000+00:00' (Nullable = true), @__p_3='2025-08-06T21:00:00.0000000+00:00' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ActivityId], [a].[AvailableCapacity], [a].[Date], [a].[MaximumCapacity], [a].[OptionId], [a].[PartnerSupplierId], [a].[StartTime], [o].[Id], [o].[ActivityId], [o].[CanBeBookedAfterStartTime], [o].[CutOff], [o].[Duration], [o].[EndTime], [o].[FromDate], [o].[Name], [o].[StartTime], [o].[UntilDate], [o].[Weekdays], [t].[Id], [t].[Amount], [t].[Currency], [t].[MaxAge], [t].[MaxSeats], [t].[MinAge], [t].[MinSeats], [t].[Name], [t].[OptionId], [t].[PriceType], [t].[Type]
FROM [Availabilities] AS [a]
INNER JOIN [Options] AS [o] ON [a].[OptionId] = [o].[Id]
LEFT JOIN [TicketCategories] AS [t] ON [o].[Id] = [t].[OptionId]
WHERE [a].[ActivityId] = @__activityId_0 AND [a].[OptionId] = @__optionId_1 AND [a].[StartTime] >= @__p_2 AND [a].[StartTime] <= @__p_3
ORDER BY [a].[Id], [o].[Id]
[2025-08-02 19:18:49 INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType36`2[[<>f__AnonymousType1`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], TourManagementApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[TourManagementApi.Models.Api.RezdyConnectModels.AvailabilitySessionResponse, TourManagementApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
[2025-08-02 19:18:49 INF] Executed action TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi) in 477.6236ms
[2025-08-02 19:18:49 INF] Executed endpoint 'TourManagementApi.Controllers.Api.RezdyConnectController.GetAvailability (TourManagementApi)'
[2025-08-02 19:18:49 INF] Request finished HTTP/1.1 GET http://localhost:5050/api/rezdyconnect/availability?apiKey=6f686c1986af4830aefb398dc2525bc6&productCode=PHN0ZK&externalProductCode=3-1&startTime=2025-08-04T21:00:00Z&endTime=2025-08-06T21:00:00Z&from=2025-08-04T21:00:00Z&to=2025-08-06T21:00:00Z&startTimeLocal=2025-08-05%2000:00:00&endTimeLocal=2025-08-07%2000:00:00&fromLocal=2025-08-05%2000:00:00&toLocal=2025-08-07%2000:00:00 - 200 null application/json; charset=utf-8 575.4006ms
